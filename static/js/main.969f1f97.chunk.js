(this.webpackJsonpelectronic_web=this.webpackJsonpelectronic_web||[]).push([[0],{483:function(e,t,r){},791:function(e,t,r){"use strict";r.r(t);var n,a=r(0),c=r.n(a),o=r(51),s=r.n(o),i=r(35),u=r(12),l=(r(483),r(793)),d=r(60),j=r(28),b=r(813),O=r(122),f=r(1),p=l.a.Header,h=function(){var e=c.a.useState(["/"]),t=Object(j.a)(e,2),r=t[0],n=t[1],a=Object(d.h)();return c.a.useEffect((function(){n([a.pathname.split("/")[1]])}),[a]),Object(f.jsx)(b.a,{offsetTop:0,children:Object(f.jsxs)(p,{className:"header",children:[Object(f.jsx)("div",{className:"header__logo",children:Object(f.jsx)(i.b,{to:"/",children:"\u041b\u043e\u0433\u043e\u0442\u0438\u043f"})}),Object(f.jsxs)(O.a,{theme:"dark",mode:"horizontal",defaultSelectedKeys:["/home"],selectedKeys:r,className:"header__menu",children:[Object(f.jsx)(O.a.Item,{children:Object(f.jsx)(i.b,{to:"/home",children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"})},"home"),Object(f.jsx)(O.a.Item,{children:Object(f.jsx)(i.b,{to:"/orders",children:"\u0417\u0430\u044f\u0432\u043a\u0438"})},"orders"),Object(f.jsx)(O.a.Item,{children:Object(f.jsx)(i.b,{to:"/contractors",children:"\u041a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u044b"})},"contractors"),Object(f.jsx)(O.a.Item,{children:Object(f.jsx)(i.b,{to:"/categories",children:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438"})},"categories")]}),Object(f.jsx)("div",{className:"header__logout",children:Object(f.jsx)(i.b,{to:"/suppliers",children:"\u0412\u044b\u0439\u0442\u0438"})})]})})},m=r(817),x=r(818),g=r(819),v=O.a.SubMenu,E=l.a.Sider,C=function(){var e=c.a.useState(["/"]),t=Object(j.a)(e,2),r=t[0],n=t[1],a=Object(d.h)();return c.a.useEffect((function(){n(["".concat(a.pathname).concat(a.search)])}),[a]),Object(f.jsx)(b.a,{offsetTop:64,children:Object(f.jsx)(E,{width:200,className:"site-layout-background sidebar",children:Object(f.jsxs)(O.a,{mode:"inline",className:"sidebar__menu",selectedKeys:r,children:[Object(f.jsxs)(v,{icon:Object(f.jsx)(m.a,{}),title:"\u0417\u0430\u044f\u0432\u043a\u0438",children:[Object(f.jsx)(O.a.Item,{children:Object(f.jsx)(i.b,{to:"/orders",children:"\u0412\u0441\u0435 \u0437\u0430\u044f\u0432\u043a\u0438"})},"/orders"),Object(f.jsx)(O.a.Item,{children:Object(f.jsx)(i.b,{to:"/orders?filter=active",children:"\u0410\u043a\u0442\u0438\u0432\u043d\u044b\u0435 \u0437\u0430\u044f\u0432\u043a\u0438"})},"/orders?filter=active"),Object(f.jsx)(O.a.Item,{children:Object(f.jsx)(i.b,{to:"/orders?filter=archived",children:"\u0410\u0440\u0445\u0438\u0432\u043d\u044b\u0435 \u0437\u0430\u044f\u0432\u043a\u0438"})},"/orders?filter=archived"),Object(f.jsx)(O.a.Item,{children:Object(f.jsx)(i.b,{to:"/orders?filter=deleted",children:"\u0423\u0434\u0430\u043b\u0435\u043d\u043d\u044b\u0435 \u0437\u0430\u044f\u0432\u043a\u0438"})},"/orders?filter=deleted"),Object(f.jsx)(O.a.Item,{children:Object(f.jsx)(i.b,{to:"/orders/create",children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0437\u0430\u044f\u0432\u043a\u0443"})},"/orders/create")]},"sub1"),Object(f.jsxs)(v,{icon:Object(f.jsx)(x.a,{}),title:"\u041a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u044b",children:[Object(f.jsx)(O.a.Item,{children:Object(f.jsx)(i.b,{to:"/contractors",children:"\u0412\u0441\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u044b"})},"/customcontractorsers"),Object(f.jsx)(O.a.Item,{children:Object(f.jsx)(i.b,{to:"/contractors?filter=customers",children:"\u0417\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0438"})},"/contractors?filter=customers"),Object(f.jsx)(O.a.Item,{children:Object(f.jsx)(i.b,{to:"/contractors?filter=supplier",children:"\u041f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a\u0438"})},"/contractors?filter=supplier"),Object(f.jsx)(O.a.Item,{children:Object(f.jsx)(i.b,{to:"/contractors?filter=deleted",children:"\u0423\u0434\u0430\u043b\u0435\u043d\u043d\u044b\u0435"})},"/contractors?filter=deleted"),Object(f.jsx)(O.a.Item,{children:Object(f.jsx)(i.b,{to:"/contractors/create",children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430"})},"/contractors/create")]},"sub3"),Object(f.jsxs)(v,{icon:Object(f.jsx)(g.a,{}),title:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438",children:[Object(f.jsx)(O.a.Item,{children:Object(f.jsx)(i.b,{to:"/categories",children:"\u0412\u0441\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438"})},"/categories"),Object(f.jsx)(O.a.Item,{children:Object(f.jsx)(i.b,{to:"/categories/deleted",children:"\u0423\u0434\u0430\u043b\u0435\u043d\u043d\u044b\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438"})},"/categories/deleted"),Object(f.jsx)(O.a.Item,{children:Object(f.jsx)(i.b,{to:"/categories/create",children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044e"})},"/categories/create")]},"sub4")]})})})},S=c.a.memo(C),y=r(258),R=function(e){var t=e.size,r=void 0===t?"default":t;return Object(f.jsx)("div",{className:"preloader",children:Object(f.jsx)(y.a,{size:r})})},N=r(469),_=function(e){var t=e.onChange,r=e.isUploading,n=c.a.useRef(null);return c.a.useEffect((function(){var e=n.current;return n&&(null===e||void 0===e||e.addEventListener("change",t)),function(){null===e||void 0===e||e.removeEventListener("change",t)}}),[t]),Object(f.jsx)("div",{className:"upload",children:Object(f.jsxs)("div",{className:"upload__btn",onClick:function(){var e;null===(e=n.current)||void 0===e||e.click()},children:[Object(f.jsx)("div",{className:"upload__btn-body",children:r?Object(f.jsx)(y.a,{}):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(N.a,{})," ",Object(f.jsx)("div",{children:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c"})]})}),Object(f.jsx)("input",{ref:n,type:"file",hidden:!0,accept:"image/*"})]})})},I=r(814);!function(e){e.SUCCESS="SUCCESS",e.ERROR="ERROR",e.NEVER="NEVER"}(n||(n={}));var T=function(e){var t=e.status,r=e.errorMessage,a=e.successMessage,c=e.onClose;return t===n.NEVER?null:Object(f.jsx)(I.a,{className:"error",message:t===n.ERROR?r:a,type:t===n.ERROR?"error":"success",closable:!0,onClose:c})},A=r(37),k=r(225),w=r(804),M=r(5),L=r.n(M),D=k.a.Option,U=w.a.Text,V=function(e){var t=e.mainCategories,r=e.handleChangeParentId,n=e.item,a=e.error;return Object(f.jsxs)("div",{className:L()("categories__select-wrapper",{"categories__select-error":a}),children:[Object(f.jsx)(U,{className:"subtitle",children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0440\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u0443\u044e \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044e"}),Object(f.jsx)(k.a,{defaultValue:n?n.parentId:0,onChange:r,className:"categories__select",children:t&&[{id:0,name:"\u041e\u0421\u041d\u041e\u0412\u041d\u0410\u042f \u041a\u0410\u0422\u0415\u0413\u041e\u0420\u0418\u042f"}].concat(Object(A.a)(t)).map((function(e){return Object(f.jsx)(D,{value:e.id,children:e.name},e.id)}))}),Object(f.jsx)(U,{className:"error-text",children:a})]})},P=r(226),G=Object(P.withScriptjs)(Object(P.withGoogleMap)((function(e){var t=e.handleSelectCoords,r=e.marker;return Object(f.jsx)(P.GoogleMap,{defaultZoom:r&&r.coordinatesLatitude.length>0?12:7,defaultCenter:r&&r.coordinatesLatitude.length>0?{lat:Number(r.coordinatesLatitude),lng:Number(r.coordinatesLongitude)}:{lat:51.2146889644867,lng:68.80153486533352},onClick:function(e){t(e.latLng)},children:r&&Object(f.jsx)(P.Marker,{position:{lat:Number(r.coordinatesLatitude),lng:Number(r.coordinatesLongitude)}})})}))),q=r(179),B=r.n(q),F="https://office.e-health.kz:8889";B.a.interceptors.request.use((function(e){return e.headers["Content-Security-Policy-Report-Only"]="default-src 'none';",e.headers.Authorization="Basic YWRtaW46Z2hidnRo",e.baseURL=F,e.timeout=5e3,e}));var W,z,H=r(820),Y=r(130),K=r(801),X=function(e){var t=e.images,r=e.editMode,n=e.removeImage;return Object(f.jsx)("div",{className:"order__images-list",children:t&&t.map((function(e){return Object(f.jsxs)("div",{className:"order__image-wrapper",children:[r&&Object(f.jsx)(Y.a,{type:"default",shape:"circle",icon:Object(f.jsx)(H.a,{}),size:"middle",className:"order__image-delete",onClick:function(){return n(e.id)}}),Object(f.jsx)(K.a,{width:200,src:"".concat(F).concat(e.attachmentLink),className:"order__image"})]},String(e.id))}))})},Z=r(809),J=function(e){var t=e.value,r=e.onChange,n=e.placeholder;return Object(f.jsxs)("div",{className:"filter",children:[Object(f.jsx)("div",{className:"filter__input",children:Object(f.jsx)(Z.a,{placeholder:n,value:t,onChange:r})}),Object(f.jsx)("div",{className:"filter__actions"})]})},Q=r(802),$=r(216),ee=r(797),te=r(811),re=r(467),ne=r(83);!function(e){e.UNKNOWN="UNKNOWN",e.SUPPLIER="SUPPLIER",e.CUSTOMER="CUSTOMER"}(W||(W={})),function(e){e.NEW="NEW",e.REGISTERED="REGISTERED",e.BANNED="BANNED"}(z||(z={}));var ae,ce=function(e){return e.contractors},oe=function(e){return e.contractors.contractors},se=function(e){return ce(e).currentContractor},ie=function(e,t){return Object(ne.a)([oe],(function(r){var n;return null===r||void 0===r||null===(n=r.filter((function(e){return"deleted"===t?e.isDeleted:"customers"===t?e.contractorType===W.CUSTOMER:"supplier"!==t||e.contractorType===W.SUPPLIER})))||void 0===n?void 0:n.filter((function(t){return t.name.toLowerCase().includes(e.toLowerCase())}))}))},ue=function(e){return ce(e).contractorsLoading},le=function(e){return ce(e).contractorsActionStatus},de=function(e){return ce(e).errorMessage},je=Object(ne.a)([ie("",null)],(function(e){return null===e||void 0===e?void 0:e.length})),be=Object(ne.a)([ie("","customers")],(function(e){return null===e||void 0===e?void 0:e.length})),Oe=Object(ne.a)([ie("","supplier")],(function(e){return null===e||void 0===e?void 0:e.length})),fe=Object(ne.a)([ie("","deleted")],(function(e){return null===e||void 0===e?void 0:e.length})),pe=function(e){return ce(e).contractorImages},he=function(e){return ce(e).contractorImageUploading},me=w.a.Text,xe=function(e){var t=Math.PI/180,r=e.cx,n=e.cy,a=e.midAngle,c=e.innerRadius,o=e.outerRadius,s=e.startAngle,i=e.endAngle,u=e.fill,l=e.payload,d=e.percent,j=e.value,b=Math.sin(-t*a),O=Math.cos(-t*a),p=r+(o+10)*O,h=n+(o+10)*b,m=r+(o+30)*O,x=n+(o+30)*b,g=m+22*(O>=0?1:-1),v=x,E=O>=0?"start":"end";return Object(f.jsxs)("g",{children:[Object(f.jsx)("text",{x:r,y:n,dy:8,textAnchor:"middle",fill:u,children:l.name}),Object(f.jsx)($.a,{cx:r,cy:n,innerRadius:c,outerRadius:o,startAngle:s,endAngle:i,fill:u}),Object(f.jsx)($.a,{cx:r,cy:n,startAngle:s,endAngle:i,innerRadius:o+6,outerRadius:o+10,fill:u}),Object(f.jsx)("path",{d:"M".concat(p,",").concat(h,"L").concat(m,",").concat(x,"L").concat(g,",").concat(v),stroke:u,fill:"none"}),Object(f.jsx)("circle",{cx:g,cy:v,r:2,fill:u,stroke:"none"}),Object(f.jsx)("text",{x:g+12*(O>=0?1:-1),y:v,textAnchor:E,fill:"#333",children:"".concat(l.name," ").concat(j," \u0448\u0442")}),Object(f.jsx)("text",{x:g+12*(O>=0?1:-1),y:v,dy:18,textAnchor:E,fill:"#999",children:"(\u041f\u0440\u043e\u0446\u0435\u043d\u0442 ".concat((100*d).toFixed(2),"%)")})]})},ge=function(){var e=c.a.useState(),t=Object(j.a)(e,2),r=t[0],n=t[1],a=Object(u.c)(je),o=Object(u.c)(be),s=Object(u.c)(Oe),i=Object(u.c)(fe),l=c.a.useMemo((function(){return[{name:"\u0417\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u043e\u0432",value:o||0},{name:"\u041f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a\u043e\u0432",value:s||0},{name:"\u0423\u0434\u0430\u043b\u0435\u043d\u043d\u044b\u0435",value:i||0}]}),[o,i,s]);return Object(f.jsxs)("div",{className:"statistic__pie",children:[Object(f.jsx)(me,{className:"statistic__pie-title",children:"\u041a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u044b"}),Object(f.jsxs)(me,{className:"statistic__pie-subtitle",children:["\u0412\u0441\u0435\u0433\u043e \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u043e\u0432: ",a]}),l&&Object(f.jsx)(ee.a,{children:Object(f.jsx)(te.a,{width:400,height:400,children:Object(f.jsx)(re.a,{activeIndex:r,activeShape:xe,data:l,cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,fill:"#8884d8",dataKey:"value",onMouseEnter:function(e,t){n(t)}})})})]})};!function(e){e.NEW="NEW",e.ARCHIVED="ARCHIVED",e.DELETED="DELETED"}(ae||(ae={}));var ve=function(e){return e.orders},Ee=function(e){return e.orders.orders},Ce=function(e,t){return Object(ne.a)([Ee],(function(r){var n;return null===r||void 0===r||null===(n=r.filter((function(e){return"active"===t?e.orderStatus===ae.NEW:"deleted"===t?e.orderStatus===ae.DELETED:"archived"!==t||e.orderStatus===ae.ARCHIVED})))||void 0===n?void 0:n.filter((function(t){return t.title.toLowerCase().includes(e.toLowerCase())}))}))},Se=function(e){return ve(e).ordersLoading},ye=function(e){return ve(e).errorMessage},Re=function(e){return ve(e).orderActionStatus},Ne=function(e){return ve(e).currentOrder},_e=Object(ne.a)([Ce("",null)],(function(e){return null===e||void 0===e?void 0:e.length})),Ie=Object(ne.a)([Ce("","active")],(function(e){return null===e||void 0===e?void 0:e.length})),Te=Object(ne.a)([Ce("","deleted")],(function(e){return null===e||void 0===e?void 0:e.length})),Ae=Object(ne.a)([Ce("","archived")],(function(e){return null===e||void 0===e?void 0:e.length})),ke=function(e){return ve(e).orderImages},we=function(e){return ve(e).ordersLoading},Me=function(e){return ve(e).orderChats},Le=w.a.Text,De=function(e){var t=Math.PI/180,r=e.cx,n=e.cy,a=e.midAngle,c=e.innerRadius,o=e.outerRadius,s=e.startAngle,i=e.endAngle,u=e.fill,l=e.payload,d=e.percent,j=e.value,b=Math.sin(-t*a),O=Math.cos(-t*a),p=r+(o+10)*O,h=n+(o+10)*b,m=r+(o+30)*O,x=n+(o+30)*b,g=m+22*(O>=0?1:-1),v=x,E=O>=0?"start":"end";return Object(f.jsxs)("g",{children:[Object(f.jsx)("text",{x:r,y:n,dy:8,textAnchor:"middle",fill:u,children:l.name}),Object(f.jsx)($.a,{cx:r,cy:n,innerRadius:c,outerRadius:o,startAngle:s,endAngle:i,fill:u}),Object(f.jsx)($.a,{cx:r,cy:n,startAngle:s,endAngle:i,innerRadius:o+6,outerRadius:o+10,fill:u}),Object(f.jsx)("path",{d:"M".concat(p,",").concat(h,"L").concat(m,",").concat(x,"L").concat(g,",").concat(v),stroke:u,fill:"none"}),Object(f.jsx)("circle",{cx:g,cy:v,r:2,fill:u,stroke:"none"}),Object(f.jsx)("text",{x:g+12*(O>=0?1:-1),y:v,textAnchor:E,fill:"#333",children:"".concat(l.name," ").concat(j," \u0448\u0442")}),Object(f.jsx)("text",{x:g+12*(O>=0?1:-1),y:v,dy:18,textAnchor:E,fill:"#999",children:"(\u041f\u0440\u043e\u0446\u0435\u043d\u0442 ".concat((100*d).toFixed(2),"%)")})]})},Ue=function(){var e=c.a.useState(),t=Object(j.a)(e,2),r=t[0],n=t[1],a=Object(u.c)(_e),o=Object(u.c)(Ie),s=Object(u.c)(Te),i=Object(u.c)(Ae),l=c.a.useMemo((function(){return[{name:"\u0410\u043a\u0442\u0438\u0432\u043d\u044b\u0445",value:o||0},{name:"\u0410\u0440\u0445\u0438\u0432\u043d\u044b\u0435",value:i||0},{name:"\u0423\u0434\u0430\u043b\u0435\u043d\u043d\u044b\u0435",value:s||0}]}),[o,s,i]);return Object(f.jsxs)("div",{className:"statistic__pie",children:[Object(f.jsx)(Le,{className:"statistic__pie-title",children:"\u0417\u0430\u044f\u0432\u043a\u0438"}),Object(f.jsxs)(Le,{className:"statistic__pie-subtitle",children:["\u0412\u0441\u0435\u0433\u043e \u0437\u0430\u044f\u0432\u043e\u043a: ",a]}),l&&Object(f.jsx)(ee.a,{children:Object(f.jsx)(te.a,{width:400,height:400,children:Object(f.jsx)(re.a,{activeIndex:r,activeShape:De,data:l,cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,fill:"#8884d8",dataKey:"value",onMouseEnter:function(e,t){n(t)}})})})]})},Ve=r(9),Pe=r.n(Ve),Ge=r(18),qe={getContractors:function(){var e=Object(Ge.a)(Pe.a.mark((function e(){var t,r;return Pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.a.get("contractors");case 2:return t=e.sent,r=t.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),createContractor:function(){var e=Object(Ge.a)(Pe.a.mark((function e(t){var r,n;return Pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.a.post("contractors",t);case 2:return r=e.sent,n=r.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updateContractor:function(){var e=Object(Ge.a)(Pe.a.mark((function e(t,r){var n,a;return Pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.a.patch("/contractors/".concat(r),t);case 2:return n=e.sent,a=n.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),deleteContractor:function(){var e=Object(Ge.a)(Pe.a.mark((function e(t){var r,n;return Pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.a.delete("/contractors/".concat(t));case 2:return r=e.sent,n=r.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getContractorById:function(){var e=Object(Ge.a)(Pe.a.mark((function e(t){var r,n;return Pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.a.get("/contractors/".concat(t));case 2:return r=e.sent,n=r.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),removeContractorAttachment:function(){var e=Object(Ge.a)(Pe.a.mark((function e(t,r){var n,a;return Pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.a.delete("/contractors/".concat(t,"/attachments/").concat(r));case 2:return n=e.sent,a=n.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},Be={addAttachment:function(){var e=Object(Ge.a)(Pe.a.mark((function e(t){var r,n;return Pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.a.post("attachments",t);case 2:return r=e.sent,n=r.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),removeAttachment:function(){var e=Object(Ge.a)(Pe.a.mark((function e(t){var r,n;return Pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.a.delete("attachments/".concat(t));case 2:return r=e.sent,n=r.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Fe=function(e){return{type:"SET_CURRENT_CONTRACTOR",payload:{currentContractor:e}}},We=function(e){return{type:"SET_CONTRACTORS_LOADING",payload:{contractorsLoading:e}}},ze=function(e){return{type:"SET_CONTRACTORS_ACTION_STATUS",payload:{contractorsActionStatus:e}}},He=function(e){return{type:"SET_CONTRACTORS_ERROR_MESSAGE",payload:{errorMessage:e}}},Ye=function(e){return{type:"SET_CONTRACTORS",payload:{contractors:e}}},Ke=function(e){return{type:"REMOVE_CONTRACTOR",payload:{contractorId:e}}},Xe=function(e){return{type:"SET_CONTRACTOR_IMAGE_UPLOADING",payload:{contractorImageUploading:e}}},Ze=function(e){return{type:"SET_CONTRACTOR_IMAGES",payload:{images:e}}},Je=function(e){return{type:"ADD_CONTRACTOR_IMAGE",payload:{images:e}}},Qe=function(e){return{type:"REMOVE_CONTRACTOR_IMAGE",payload:{imageId:e}}},$e=function(){return{type:"CLEAR_CONTRACTOR_IMAGES"}},et=function(e,t){t(ze(n.ERROR)),t(He(e))},tt=function(){return function(){var e=Object(Ge.a)(Pe.a.mark((function e(t){var r;return Pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(We(!0)),e.next=4,qe.getContractors();case 4:r=e.sent,t(Ye(r)),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("getContracors ===> ",e.t0),et("\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0442\u0438, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437",t);case 12:return e.prev=12,t(We(!1)),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[0,8,12,15]])})));return function(t){return e.apply(this,arguments)}}()},rt=function(e){return function(){var t=Object(Ge.a)(Pe.a.mark((function t(r){return Pe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r(We(!0)),t.next=4,qe.deleteContractor(e);case 4:t.sent?(r(ze(n.SUCCESS)),r(Ke(e)),r(Fe(null))):et("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0437\u0430\u044f\u0432\u043a\u0443, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437",r),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.log("deleteContractor ===> ",t.t0),et("\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0442\u0438, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437",r);case 12:return t.prev=12,r(We(!1)),t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[0,8,12,15]])})));return function(e){return t.apply(this,arguments)}}()},nt=function(e){return function(){var t=Object(Ge.a)(Pe.a.mark((function t(r){var n;return Pe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r(Xe(!0)),t.next=4,Be.addAttachment(e);case 4:(n=t.sent).length>0?r(Je(n)):et("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0432\u043b\u043e\u0436\u0435\u043d\u0438\u0435, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437",r),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.log("addContractorImage ===> ",t.t0),et("\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0442\u0438, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437",r);case 12:return t.prev=12,r(Xe(!1)),t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[0,8,12,15]])})));return function(e){return t.apply(this,arguments)}}()},at={getOrders:function(){var e=Object(Ge.a)(Pe.a.mark((function e(){var t,r;return Pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.a.get("orders");case 2:return t=e.sent,r=t.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),createOrder:function(){var e=Object(Ge.a)(Pe.a.mark((function e(t){var r,n;return Pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.a.post("orders",t);case 2:return r=e.sent,n=r.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getOrderById:function(){var e=Object(Ge.a)(Pe.a.mark((function e(t){var r,n;return Pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.a.get("/orders/".concat(t));case 2:return r=e.sent,n=r.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),deleteOrder:function(){var e=Object(Ge.a)(Pe.a.mark((function e(t){var r,n;return Pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.a.delete("/orders/".concat(t));case 2:return r=e.sent,n=r.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updateOrder:function(){var e=Object(Ge.a)(Pe.a.mark((function e(t,r){var n,a;return Pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.a.patch("/orders/".concat(r),t);case 2:return n=e.sent,a=n.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),removeOrderAttachment:function(){var e=Object(Ge.a)(Pe.a.mark((function e(t,r){var n,a;return Pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.a.delete("/orders/".concat(t,"/attachments/").concat(r));case 2:return n=e.sent,a=n.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},ct={getOrderChats:function(){var e=Object(Ge.a)(Pe.a.mark((function e(t){var r,n;return Pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.a.get("/chats/".concat(t));case 2:return r=e.sent,n=r.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getAllChatMessage:function(){var e=Object(Ge.a)(Pe.a.mark((function e(t,r){var n,a;return Pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.a.get("chats/".concat(t,"/").concat(r));case 2:return n=e.sent,a=n.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},ot=function(e){return{type:"SET_ORDERS",payload:{orders:e}}},st=function(e){return{type:"SET_ORDERS_LOADING",payload:{ordersLoading:e}}},it=function(e){return{type:"SET_ORDERS_ERROR",payload:{errorMessage:e}}},ut=function(e){return{type:"SET_ORDER_ACTION_STATUS",payload:{orderActionStatus:e}}},lt=function(e){return{type:"SET_CURRENT_ORDER",payload:{currentOrder:e}}},dt=function(e){return{type:"REMOVE_ORDER",payload:{id:e}}},jt=function(e){return{type:"ADD_NEW_ORDER",payload:{order:e}}},bt=function(e){return{type:"SET_ORDER_IMAGE_UPLOADING",payload:{orderImageUploading:e}}},Ot=function(e){return{type:"ADD_ORDER_IMAGE",payload:{images:e}}},ft=function(e){return{type:"SET_ORDER_IMAGES",payload:{images:e}}},pt=function(e){return{type:"REMOVE_ORDER_IMAGE",payload:{imageId:e}}},ht=function(){return{type:"CLEAR_ORDER_IMAGES"}},mt=function(e){return{type:"SET_ORDER_CHATS",payload:{orderChats:e}}},xt=function(e,t){t(ut(n.ERROR)),t(it(e))},gt=function(){return function(){var e=Object(Ge.a)(Pe.a.mark((function e(t){var r;return Pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(st(!0)),e.next=4,at.getOrders();case 4:r=e.sent,t(ot(r)),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("getOrders ===> ",e.t0),xt("\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0442\u0438, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437",t);case 12:return e.prev=12,t(st(!1)),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[0,8,12,15]])})));return function(t){return e.apply(this,arguments)}}()},vt=function(e){return function(){var t=Object(Ge.a)(Pe.a.mark((function t(r){return Pe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r(st(!0)),t.next=4,at.deleteOrder(e);case 4:t.sent?(r(ut(n.SUCCESS)),r(dt(e)),r(lt(null))):xt("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0437\u0430\u044f\u0432\u043a\u0443, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437",r),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.log("deleteOrder ===> ",t.t0),xt("\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0442\u0438, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437",r);case 12:return t.prev=12,r(st(!1)),t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[0,8,12,15]])})));return function(e){return t.apply(this,arguments)}}()},Et=function(e){return function(){var t=Object(Ge.a)(Pe.a.mark((function t(r){var n;return Pe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r(bt(!0)),t.next=4,Be.addAttachment(e);case 4:(n=t.sent).length>0?r(Ot(n)):xt("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0432\u043b\u043e\u0436\u0435\u043d\u0438\u0435, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437",r),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.log("addOrderImage ===> ",t.t0),xt("\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0442\u0438, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437",r);case 12:return t.prev=12,r(bt(!1)),t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[0,8,12,15]])})));return function(e){return t.apply(this,arguments)}}()},Ct=w.a.Title,St=l.a.Content,yt=function(){var e=Object(u.c)(ue),t=Object(u.b)();return c.a.useEffect((function(){t(tt()),t(gt())}),[t]),e?Object(f.jsx)(R,{}):Object(f.jsx)(St,{className:"content",children:Object(f.jsxs)(Q.a,{children:[Object(f.jsx)(Ct,{className:"title",children:"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430"}),Object(f.jsxs)("div",{className:"statistic",children:[Object(f.jsx)(ge,{}),Object(f.jsx)(Ue,{})]})]})})},Rt=r(75),Nt=r(815),_t=r(799),It=r(812),Tt=r(221),At=r.n(Tt);r(719);At.a.locale("ru");var kt=function(e){return At()(e).format("DD.MM.YYYY")},wt=l.a.Content,Mt=[{title:"\u0421\u0442\u0430\u0442\u0443\u0441",dataIndex:"orderStatus",render:function(e){var t,r=(t={},Object(Rt.a)(t,ae.NEW,"green"),Object(Rt.a)(t,ae.ARCHIVED,"geekblue"),Object(Rt.a)(t,ae.DELETED,"volcano"),t);return Object(f.jsx)(Nt.a,{color:r[e],children:e},e)}},{title:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a",dataIndex:"title",sorter:{compare:function(e,t){return e.title.localeCompare(t.title)}}},{title:"\u0414\u0430\u0442\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f",dataIndex:"creationDate",sorter:{compare:function(e,t){return e.creationDate-t.creationDate}},render:function(e){return kt(e)},defaultSortOrder:"descend"},{title:"\u0414\u0430\u0442\u0430 \u0437\u0430\u043a\u0440\u044b\u0442\u0438\u044f",dataIndex:"actualDate",sorter:{compare:function(e,t){return e.actualDate-t.actualDate}},render:function(e){return kt(e)}},{title:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438",dataIndex:"categories",render:function(e){return Object(f.jsx)(f.Fragment,{children:e.filter((function(e){return 0===e.parentId})).map((function(e){return Object(f.jsx)(Nt.a,{color:"blue",className:"order__tag",children:e.categoryName},e.categoryId)}))})}},{title:"\u0426\u0435\u043d\u0430 (\u0442\u0433)",dataIndex:"totalSum",sorter:{compare:function(e,t){return e.totalSum-t.totalSum}}},{title:"\u0421\u0440\u043e\u043a\u0438",dataIndex:"comment"}],Lt=function(){var e=c.a.useState(""),t=Object(j.a)(e,2),r=t[0],a=t[1],o=new URLSearchParams(Object(d.h)().search),s=Object(u.c)(Ce(r,o.get("filter"))),i=Object(u.c)(Se),l=Object(u.c)(ye),b=Object(u.c)(Re),O=Object(u.b)(),p=Object(d.g)(),h=c.a.useCallback((function(){O(ut(n.NEVER)),O(it(null))}),[O]);c.a.useEffect((function(){return O(gt()),function(){h()}}),[O,h]);return i?Object(f.jsx)(R,{size:"large"}):Object(f.jsxs)(wt,{className:"content",children:[Object(f.jsx)(T,{onClose:h,errorMessage:l,successMessage:"\u0417\u0430\u044f\u0432\u043a\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0435\u043d\u0430",status:b}),Object(f.jsx)(J,{value:r,onChange:function(e){a(e.currentTarget.value)},placeholder:"\u041d\u0430\u0439\u0442\u0438 \u043f\u043e \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0443"}),Object(f.jsx)(_t.a,{showSorterTooltip:!1,columns:Mt,dataSource:s,rowKey:"id",expandable:{expandedRowRender:function(e){return Object(f.jsxs)("div",{className:"order__expanded",children:[Object(f.jsx)("p",{className:"order__tab-descr",children:e.description}),Object(f.jsxs)("div",{className:"order__expanded-action",children:[Object(f.jsx)(Y.a,{className:"order__expanded-btn",onClick:function(){return function(e){p.push("orders/".concat(e.id))}(e)},children:"\u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c"}),Object(f.jsx)(Y.a,{className:"order__expanded-btn",onClick:function(){return t=e.id,void(window.confirm("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0437\u0430\u044f\u0432\u043a\u0443?")&&O(vt(t)));var t},danger:!0,children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]})]})}}}),Object(f.jsx)(It.a,{})]})},Dt=r(800),Ut=r(468),Vt=r(49),Pt=r(119),Gt=r(57),qt=Gt.b().shape({title:Gt.c().max(150,"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0434\u043b\u0438\u043d\u0430 150 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432").required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"),totalSum:Gt.a().typeError("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u0443\u044e \u0446\u0435\u043d\u0443").required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"),comment:Gt.c().required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"),description:Gt.c().typeError("\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u043c \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0442\u0435\u043a\u0441\u0442").max(5e3,"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0434\u043b\u0438\u043d\u0430 5000 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432")}),Bt=Gt.b().shape({name:Gt.c().max(150,"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0434\u043b\u0438\u043d\u0430 150 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432").required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"),location:Gt.c().max(50,"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0434\u043b\u0438\u043d\u0430 50 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432").required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"),phoneNumber:Gt.a().typeError("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 \u043d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430").min(11,"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 \u043d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430").required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"),description:Gt.c().typeError("\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u043c \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0442\u0435\u043a\u0441\u0442").max(5e3,"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0434\u043b\u0438\u043d\u0430 5000 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"),address:Gt.c().max(250,"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0434\u043b\u0438\u043d\u0430 250 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432").required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"),contactName:Gt.c().max(150,"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0434\u043b\u0438\u043d\u0430 150 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432").required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"),webSite:Gt.c().max(50,"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0434\u043b\u0438\u043d\u0430 50 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"),eMail:Gt.c().max(50,"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0434\u043b\u0438\u043d\u0430 50 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432").email("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 e-mail")}),Ft=(Gt.b().shape({phoneNumber:Gt.a().typeError("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 \u043d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430").min(11,"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 \u043d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430").required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"),otp:Gt.c().required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435").matches(/^[0-9]+$/,"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 \u0421\u041c\u0421-\u043a\u043e\u0434").min(4,"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 \u0421\u041c\u0421-\u043a\u043e\u0434").max(4,"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 \u0421\u041c\u0421-\u043a\u043e\u0434")}),Gt.b().shape({name:Gt.c().max(150,"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0434\u043b\u0438\u043d\u0430 150 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432").required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"),location:Gt.c().max(50,"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0434\u043b\u0438\u043d\u0430 50 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432").required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"),contactName:Gt.c().max(150,"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0434\u043b\u0438\u043d\u0430 150 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432").required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"),phoneNumber:Gt.a().typeError("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 \u043d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430").min(11,"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 \u043d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430").required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435")})),Wt=Gt.b().shape({name:Gt.c().max(150,"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0434\u043b\u0438\u043d\u0430 150 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432").required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"),parentId:Gt.a().typeError("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 \u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440").required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435")}),zt=function(e){return e.categories},Ht=function(e){return zt(e).categories},Yt=function(e){return zt(e).errorMessage},Kt=function(e){return zt(e).isLoadingCategories},Xt=Object(ne.a)([Ht],(function(e){return null===e||void 0===e?void 0:e.filter((function(e){return 0===e.parentId&&!e.isDeleted}))})),Zt=Object(ne.a)([Ht],(function(e){return null===e||void 0===e?void 0:e.filter((function(e){return 0!==e.parentId&&!e.isDeleted}))})),Jt=function(e){var t;return null===(t=Ht(e))||void 0===t?void 0:t.filter((function(e){return e.isDeleted}))},Qt=function(e){return zt(e).categoryInProcessEdit},$t=function(e){return zt(e).categoriesActionStatus},er=Object(ne.a)([Xt,Zt],(function(e,t){return e&&t?e.map((function(e){var r=t.filter((function(t){return t.parentId===e.id})).map((function(e){return{title:e.name,value:e.id,key:e.id}}));return{title:e.name,value:e.id,key:e.id,children:r}})):[]})),tr={getAllCategories:function(){var e=Object(Ge.a)(Pe.a.mark((function e(){var t,r;return Pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.a.get("categories");case 2:return t=e.sent,r=t.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),deleteAllCategories:function(){var e=Object(Ge.a)(Pe.a.mark((function e(){var t,r;return Pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.a.delete("categories");case 2:return t=e.sent,r=t.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),addCategory:function(){var e=Object(Ge.a)(Pe.a.mark((function e(t){var r,n;return Pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.a.post("categories",t);case 2:return r=e.sent,n=r.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getCategoryById:function(){var e=Object(Ge.a)(Pe.a.mark((function e(t){var r,n;return Pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.a.get("categories/".concat(t));case 2:return r=e.sent,n=r.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),deleteCategoryById:function(){var e=Object(Ge.a)(Pe.a.mark((function e(t){var r,n;return Pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.a.delete("categories/".concat(t));case 2:return r=e.sent,n=r.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updateCategoryById:function(){var e=Object(Ge.a)(Pe.a.mark((function e(t){var r,n;return Pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.a.patch("categories/".concat(t.id),t);case 2:return r=e.sent,n=r.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},rr=function(e){return{type:"SET_CATEGORIES",payload:{categories:e}}},nr=function(e){return{type:"SET_IS_LOADING_CATEGORIES",payload:{isLoadingCategories:e}}},ar=function(e){return{type:"SET_CATEGORIES_ERROR_MESSAGE",payload:{errorMessage:e}}},cr=function(e){return{type:"SET_CATEGORIES_ACTION_STATUS",payload:{categoriesActionStatus:e}}},or=function(e){return{type:"SET_CATEGORY_IN_EDIT_PROCESS",payload:{categoryInProcessEdit:e}}},sr=function(e){return{type:"REPLACE_CATEGORY",payload:{category:e}}},ir=function(e){return{type:"REMOVE_CATEGORY",payload:{id:e}}},ur=function(e){return{type:"ADD_NEW_CATEGORY",payload:{category:e}}},lr=function(e,t){t(cr(n.ERROR)),t(ar(e))},dr=function(e){return function(){var t=Object(Ge.a)(Pe.a.mark((function t(r){return Pe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r(or(e.id)),t.next=4,tr.updateCategoryById(e);case 4:t.sent?(r(cr(n.SUCCESS)),r(sr(e))):lr("\u041d\u0435 \u043f\u043e\u043b\u0443\u0447\u0438\u043b\u043e\u0441\u044c \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044e, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437",r),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.log("updateCategoryById...",t.t0),lr("\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0442\u0438, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437",r);case 12:return t.prev=12,r(or(null)),t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[0,8,12,15]])})));return function(e){return t.apply(this,arguments)}}()},jr=function(e){return new Promise((function(t,r){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){return t(n.result)},n.onerror=function(e){return r(e)}}))},br=r(803),Or=r(806),fr=w.a.Text,pr=function(e){var t=e.control,r=e.errors;return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(Vt.a,{control:t,rules:{required:!0},render:function(e){var t,n=e.field,a=n.onChange,c=n.value;return Object(f.jsxs)(br.a.Item,{validateStatus:r.title?"error":"success",help:null===(t=r.title)||void 0===t?void 0:t.message,className:"input order__title-input",required:!0,children:[Object(f.jsx)(fr,{className:"subtitle",children:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a"}),Object(f.jsx)(Z.a,{placeholder:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a \u0437\u0430\u044f\u0432\u043a\u0438",value:c,onChange:a})]})},name:"title",defaultValue:""}),Object(f.jsxs)("div",{className:"order__numeric-fields",children:[Object(f.jsx)(Vt.a,{control:t,rules:{required:!0},render:function(e){var t,n=e.field,a=n.onChange,c=n.value;return Object(f.jsxs)(br.a.Item,{validateStatus:r.comment?"error":"success",help:null===(t=r.comment)||void 0===t?void 0:t.message,className:"order__comment-input input",required:!0,children:[Object(f.jsx)(fr,{className:"subtitle",children:"\u0421\u0440\u043e\u043a\u0438"}),Object(f.jsx)(Z.a,{placeholder:"\u0421\u0440\u043e\u043a\u0438",value:c,onChange:a})]})},name:"comment",defaultValue:""}),Object(f.jsx)(Vt.a,{control:t,rules:{required:!0},render:function(e){var t,n=e.field,a=n.onChange,c=n.value;return Object(f.jsx)(br.a.Item,{validateStatus:r.totalSum?"error":"success",help:null===(t=r.totalSum)||void 0===t?void 0:t.message,className:"input order__totalsum-input",required:!0,children:Object(f.jsxs)("div",{className:"order__totalsum-field",children:[Object(f.jsx)(fr,{className:"subtitle",children:"\u0426\u0435\u043d\u0430 (\u0442\u0433)"}),Object(f.jsx)(Or.a,{value:c,onChange:a})]})})},name:"totalSum",defaultValue:0})]}),Object(f.jsx)(Vt.a,{control:t,rules:{required:!1},render:function(e){var t,n=e.field,a=n.onChange,c=n.value;return Object(f.jsxs)(br.a.Item,{validateStatus:r.description?"error":"success",help:null===(t=r.description)||void 0===t?void 0:t.message,className:"input order__descr-input",required:!0,children:[Object(f.jsx)(fr,{className:"subtitle",children:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"}),Object(f.jsx)(Z.a.TextArea,{placeholder:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",value:c,onChange:a})]})},name:"description",defaultValue:""})]})},hr=c.a.memo(pr),mr=l.a.Content,xr=w.a.Title,gr=Dt.a.SHOW_ALL,vr=function(){var e=Object(Vt.e)({resolver:Object(Pt.a)(qt)}),t=e.control,r=e.reset,a=e.handleSubmit,o=e.formState.errors,s=c.a.useState([]),i=Object(j.a)(s,2),l=i[0],b=i[1],O=Object(u.c)(Re),p=Object(u.c)(ye),h=Object(u.c)(Se),m=Object(u.c)(Ne),x=Object(u.c)(ke),g=Object(u.c)(we),v=Object(u.c)(er),E=Object(u.c)(Yt),C=Object(u.c)($t),S=Object(u.b)(),y=Object(d.g)(),N=c.a.useCallback((function(){S(ut(n.NEVER)),S(it(null)),S(ht())}),[S]),I=c.a.useCallback((function(){S(cr(n.NEVER)),S(ar(null))}),[S]);c.a.useEffect((function(){return function(){N(),I()}}),[I,N]),c.a.useEffect((function(){m&&O===n.SUCCESS&&y.push("/orders/".concat(m.id))}),[m,y,O]);var A=function(){var e=Object(Ge.a)(Pe.a.mark((function e(t){var r,n,a,c,o,s,i;return Pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.currentTarget,!(a=null===(r=n.files)||void 0===r?void 0:r[0])){e.next=13;break}if("image/png"===a.type||"image/jpeg"===a.type||"image/jpg"===a.type){e.next=7;break}return e.abrupt("return",Ut.b.error("".concat(a.name," \u043d\u0435 \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u043e\u0439")));case 7:return e.next=9,jr(a);case 9:c=e.sent,o=a.name.split(".").pop(),s=a.name,c&&o&&s&&(i={name:s,ext:o,content:c.split(",")[1]},S(Et(i)));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=a((function(e){var t=l.map((function(e){return{categoryId:e}})),a={title:e.title,description:e.description,comment:e.comment,totalSum:e.totalSum,contractors:[],attachments:x.map((function(e){return{attachmentId:e.id}})),customerId:1,categories:t};S(function(e){return function(){var t=Object(Ge.a)(Pe.a.mark((function t(r){var a;return Pe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,at.createOrder(e);case 3:(a=t.sent).length>0?(r(ut(n.SUCCESS)),r(lt(a[0])),r(jt(a[0]))):xt("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u0437\u0430\u044f\u0432\u043a\u0443, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437",r),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("createOrder ===> ",t.t0),xt("\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0442\u0438, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437",r);case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}(a)),r()}));return h?Object(f.jsx)(R,{}):Object(f.jsxs)(mr,{className:"content",children:[Object(f.jsx)(T,{onClose:N,errorMessage:p,successMessage:"\u0417\u0430\u044f\u0432\u043a\u0430 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0430",status:O}),Object(f.jsx)(T,{onClose:I,errorMessage:E,status:C}),Object(f.jsxs)(Q.a,{className:"form",children:[Object(f.jsx)(xr,{level:3,className:"title",children:"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0437\u0430\u044f\u0432\u043a\u0438"}),Object(f.jsx)(hr,{control:t,errors:o}),Object(f.jsx)(Dt.a,{treeData:v,value:l,onChange:function(e){b(e)},treeCheckable:!0,showCheckedStrategy:gr,placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438 \u0437\u0430\u044f\u0432\u043a\u0438",style:{width:"100%",marginBottom:10},maxTagCount:5}),Object(f.jsx)(X,{removeImage:function(e){S(function(e){return function(){var t=Object(Ge.a)(Pe.a.mark((function t(r){return Pe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r(bt(!0)),t.next=4,Be.removeAttachment(e);case 4:t.sent?r(pt(e)):xt("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0432\u043b\u043e\u0436\u0435\u043d\u0438\u0435, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437",r),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.log("getFullOrderInfo ===> ",t.t0),xt("\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0442\u0438, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437",r);case 12:return t.prev=12,r(bt(!1)),t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[0,8,12,15]])})));return function(e){return t.apply(this,arguments)}}()}(e))},images:x,editMode:!0}),Object(f.jsx)(_,{onChange:A,isUploading:g}),Object(f.jsx)(Y.a,{className:"order__save-btn",onClick:k,disabled:Object.keys(o).length>0||0===l.length,children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})]})},Er=r(31),Cr=r(805),Sr=w.a.Text,yr=function(e){var t=e.placeholder,r=e.editMode,n=e.fieldName,a=e.control,c=e.error,o=e.defaultValue,s=e.isTextArea,i=void 0!==s&&s,u=e.isNumberInput,l=void 0!==u&&u;return r?Object(f.jsx)(Vt.a,{control:a,rules:{required:!0},render:function(e){var r=e.field,n=r.onChange,a=r.value;return Object(f.jsx)(br.a.Item,{validateStatus:c?"error":"success",help:null===c||void 0===c?void 0:c.message,className:"input",children:i?Object(f.jsx)(Z.a.TextArea,{placeholder:t,value:a,onChange:n}):l?Object(f.jsx)(Or.a,{placeholder:t,value:a,onChange:n}):Object(f.jsx)(Z.a,{placeholder:t,value:a,onChange:n})})},name:n,defaultValue:o}):Object(f.jsx)(Sr,{children:o})},Rr=r(798),Nr=Dt.a.SHOW_ALL,_r=function(e){var t=e.categoriesTree,r=e.selectedCategories,n=e.handleSelectCategories,a=e.handleRemoveImage,c=e.handleAddImage,o=e.editMode,s=e.defaultValue,i=e.error,u=e.images,l=e.control,d=e.imageUploading;return Object(f.jsx)("div",{className:"order__body",children:Object(f.jsxs)(Q.a,{children:[Object(f.jsx)(Rr.a,{children:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"}),Object(f.jsx)(yr,{defaultValue:s,editMode:o,control:l,error:i,fieldName:"description",placeholder:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",isTextArea:!0}),Object(f.jsx)(Rr.a,{children:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438"}),t&&Object(f.jsx)(Dt.a,{treeData:t,value:r,onChange:n,treeCheckable:!0,showCheckedStrategy:Nr,placeholder:o?"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438 \u0437\u0430\u044f\u0432\u043a\u0438":"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438",style:{width:"100%",marginBottom:10},disabled:!o}),Object(f.jsx)(Rr.a,{children:"\u0424\u043e\u0442\u043e"}),Object(f.jsxs)("div",{className:"order__images",children:[Object(f.jsx)(X,{removeImage:a,images:u,editMode:o}),o&&Object(f.jsx)(_,{onChange:c,isUploading:d})]})]})})},Ir=c.a.memo(_r),Tr=r(810),Ar=function(e){var t=e.order,r=e.editMode,n=e.errors,a=e.control;return Object(f.jsxs)(Tr.b,{size:"small",column:3,children:[Object(f.jsx)(Tr.b.Item,{label:"\u0421\u043e\u0437\u0434\u0430\u043d\u0430",children:kt(t.creationDate)}),Object(f.jsx)(Tr.b.Item,{label:"\u0410\u0432\u0442\u043e\u0440",children:Object(f.jsx)(i.b,{to:"/contractors/".concat(t.customerId),children:"\u0417\u0430\u043a\u0430\u0437\u0447\u0438\u043a"})}),Object(f.jsx)(Tr.b.Item,{label:"\u0421\u0440\u043e\u043a\u0438",children:Object(f.jsx)(yr,{defaultValue:t.comment,editMode:r,control:a,error:n.title,fieldName:"comment",placeholder:"\u0421\u0440\u043e\u043a\u0438"})}),Object(f.jsx)(Tr.b.Item,{label:"\u0417\u0430\u043a\u0440\u043e\u0435\u0442\u0441\u044f",children:kt(t.actualDate)}),Object(f.jsx)(Tr.b.Item,{label:"\u0427\u0430\u0442\u044b",children:Object(f.jsx)(i.b,{to:"/orders/".concat(t.id,"/chats"),children:"\u0427\u0430\u0442\u044b"})}),Object(f.jsx)(Tr.b.Item,{label:"\u0426\u0435\u043d\u0430",children:Object(f.jsx)(yr,{isNumberInput:!0,defaultValue:t.totalSum,editMode:r,control:a,error:n.totalSum,fieldName:"totalSum",placeholder:"\u0426\u0435\u043d\u0430"})}),Object(f.jsx)(Tr.b.Item,{label:"\u041d\u043e\u043c\u0435\u0440 \u0437\u0430\u044f\u0432\u043a\u0438",children:t.id})]})},kr=l.a.Content,wr=function(){var e=c.a.useState(!1),t=Object(j.a)(e,2),r=t[0],a=t[1],o=Object(Vt.e)({resolver:Object(Pt.a)(qt)}),s=o.control,i=o.handleSubmit,l=o.formState.errors,b=c.a.useState([]),O=Object(j.a)(b,2),p=O[0],h=O[1],m=Object(u.c)(Ne),x=Object(u.c)(Re),g=Object(u.c)(ye),v=Object(u.c)(Se),E=Object(u.c)(ke),C=Object(u.c)(we),S=Object(u.c)(er),y=Object(d.i)().id,N=Object(u.b)(),_=Object(d.g)(),I=c.a.useCallback((function(){N(ut(n.NEVER)),N(lt(null)),N(ht())}),[N]),A=function(){a((function(e){return N(ut(n.NEVER)),!e}))};c.a.useEffect((function(){return N(function(e){return function(){var t=Object(Ge.a)(Pe.a.mark((function t(r){var n;return Pe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r(st(!0)),t.next=4,at.getOrderById(e);case 4:0===(n=t.sent).length?xt("\u0417\u0430\u044f\u0432\u043a\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430",r):r(lt(n[0])),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.log("getFullOrderInfo ===> ",t.t0),xt("\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0442\u0438, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437",r);case 12:return t.prev=12,r(st(!1)),t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[0,8,12,15]])})));return function(e){return t.apply(this,arguments)}}()}(Number(y))),function(){I()}}),[I,N,y]),c.a.useEffect((function(){var e;m&&(h(null===(e=m.categories)||void 0===e?void 0:e.map((function(e){return e.categoryId}))),N(ft(m.attachments)))}),[m,N]),c.a.useEffect((function(){m||x!==n.SUCCESS||_.push("/orders")}),[_,m,x]);var k=i((function(e){if(m){var t=p.map((function(e){return{categoryId:e}})),r=Object(Er.a)(Object(Er.a)({},m),{},{title:e.title,description:e.description,totalSum:e.totalSum,comment:e.comment,contractors:m.contractors,attachments:E.map((function(e){return{attachmentId:e.id}})),customerId:1,categories:t});a(!1),N(function(e,t){return function(){var r=Object(Ge.a)(Pe.a.mark((function r(a){var c;return Pe.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,a(st(!0)),r.next=4,at.updateOrder(e,t);case 4:(c=r.sent).length>0?(a(ut(n.SUCCESS)),a(ht()),a(lt(c[0]))):xt("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437",a),r.next=12;break;case 8:r.prev=8,r.t0=r.catch(0),console.log("updateOrder ===> ",r.t0),xt("\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0442\u0438, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437",a);case 12:return r.prev=12,a(st(!1)),r.finish(12);case 15:case"end":return r.stop()}}),r,null,[[0,8,12,15]])})));return function(e){return r.apply(this,arguments)}}()}(r,m.id))}})),w=c.a.useCallback((function(e){h(e)}),[]),M=function(){var e=Object(Ge.a)(Pe.a.mark((function e(t){var r,n,a,c,o,s,i;return Pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.currentTarget,!(a=null===(r=n.files)||void 0===r?void 0:r[0])){e.next=13;break}if("image/png"===a.type||"image/jpeg"===a.type||"image/jpg"===a.type){e.next=7;break}return e.abrupt("return",Ut.b.error("".concat(a.name," \u043d\u0435 \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u043e\u0439")));case 7:return e.next=9,jr(a);case 9:c=e.sent,o=a.name.split(".").pop(),s=a.name,c&&o&&s&&(i={name:s,ext:o,content:c.split(",")[1]},N(Et(i)));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=[Object(f.jsx)(Y.a,{onClick:k,disabled:0!==Object.keys(l).length||0===p.length,children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"},"1"),Object(f.jsx)(Y.a,{onClick:function(){var e;(A(),m)&&(h(null===(e=m.categories)||void 0===e?void 0:e.map((function(e){return e.categoryId}))),N(ht()),N(ft(m.attachments)))},danger:!0,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"},"2")],D=[Object(f.jsx)(Y.a,{onClick:A,children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"},"3"),("ARCHIVED"===(null===m||void 0===m?void 0:m.orderStatus)||"DELETED"===(null===m||void 0===m?void 0:m.orderStatus))&&Object(f.jsx)(Y.a,{onClick:function(){alert("\u0412 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0435")},children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"},"4"),Object(f.jsx)(Y.a,{onClick:function(){window.confirm("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0437\u0430\u044f\u0432\u043a\u0443?")&&m&&N(vt(m.id))},danger:!0,children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"},"5")];return v?Object(f.jsx)(R,{}):Object(f.jsxs)(kr,{className:"content",children:[Object(f.jsx)(T,{onClose:function(){return N(ut(n.NEVER))},errorMessage:g,status:x,successMessage:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b"}),m&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("div",{className:"page-header",children:Object(f.jsx)(Cr.a,{ghost:!1,onBack:function(){return window.history.back()},title:Object(f.jsx)(yr,{defaultValue:m.title,editMode:r,control:s,error:l.title,fieldName:"title",placeholder:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a"}),extra:r?L:D,children:Object(f.jsx)(Ar,{order:m,editMode:r,errors:l,control:s})})}),Object(f.jsx)(Ir,{categoriesTree:S,selectedCategories:p,handleSelectCategories:w,handleRemoveImage:function(e){m&&N(function(e,t){return function(){var r=Object(Ge.a)(Pe.a.mark((function r(n){return Pe.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,n(bt(!0)),r.next=4,at.removeOrderAttachment(e,t);case 4:r.sent?n(pt(t)):xt("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0432\u043b\u043e\u0436\u0435\u043d\u0438\u0435, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437",n),r.next=12;break;case 8:r.prev=8,r.t0=r.catch(0),console.log("getFullOrderInfo ===> ",r.t0),xt("\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0442\u0438, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437",n);case 12:return r.prev=12,n(bt(!1)),r.finish(12);case 15:case"end":return r.stop()}}),r,null,[[0,8,12,15]])})));return function(e){return r.apply(this,arguments)}}()}(m.id,e))},handleAddImage:M,editMode:r,defaultValue:m.description,error:l.description,images:E,control:s,imageUploading:C})]})]})},Mr=l.a.Content,Lr=[{title:"\u0422\u0438\u043f \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430",dataIndex:"contractorType",render:function(e){var t,r=(t={},Object(Rt.a)(t,W.CUSTOMER,"green"),Object(Rt.a)(t,W.SUPPLIER,"geekblue"),Object(Rt.a)(t,W.UNKNOWN,"gray"),t);return Object(f.jsx)(Nt.a,{color:r[e],children:e===W.CUSTOMER?"\u0417\u0430\u043a\u0430\u0437\u0447\u0438\u043a":"\u041f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a"},e)},sorter:{compare:function(e,t){return e.name.localeCompare(t.name)}}},{title:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u0438",dataIndex:"name",sorter:{compare:function(e,t){return e.name.localeCompare(t.name)}}},{title:"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430",dataIndex:"phoneNumber"},{title:"\u0413\u043e\u0440\u043e\u0434",dataIndex:"location",sorter:{compare:function(e,t){return e.location.localeCompare(t.location)}}},{title:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438",dataIndex:"categories",render:function(e){return Object(f.jsx)(f.Fragment,{children:e.filter((function(e){return 0===e.parentId})).map((function(e){return Object(f.jsx)(Nt.a,{color:"blue",className:"order__tag",children:e.categoryName},e.categoryId)}))})}},{title:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u043d\u043e\u0435 \u043b\u0438\u0446\u043e",dataIndex:"contactName"},{title:"\u0420\u0435\u0439\u0442\u0438\u043d\u0433",dataIndex:"rating",sorter:{compare:function(e,t){return e.rating-t.rating}}}],Dr=function(){var e=c.a.useState(""),t=Object(j.a)(e,2),r=t[0],a=t[1],o=new URLSearchParams(Object(d.h)().search),s=Object(u.c)(de),i=Object(u.c)(le),l=Object(u.c)(ue),b=Object(u.c)(ie(r,o.get("filter"))),O=Object(u.b)(),p=Object(d.g)(),h=c.a.useCallback((function(){O(ze(n.NEVER)),O(He(null))}),[O]);return c.a.useEffect((function(){return O(tt()),function(){h()}}),[O,h]),l?Object(f.jsx)(R,{size:"large"}):Object(f.jsxs)(Mr,{className:"content",children:[Object(f.jsx)(T,{onClose:h,errorMessage:s,successMessage:"\u041a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0435\u043d",status:i}),Object(f.jsx)(J,{value:r,onChange:function(e){a(e.currentTarget.value)},placeholder:"\u041d\u0430\u0439\u0442\u0438 \u043f\u043e \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u044e \u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u0438"}),Object(f.jsx)(_t.a,{showSorterTooltip:!1,columns:Lr,dataSource:b,rowKey:"id",expandable:{expandedRowRender:function(e){return Object(f.jsxs)("div",{className:"contractor__expanded",children:[Object(f.jsx)("p",{className:"contractor__tab-descr",children:e.description}),Object(f.jsxs)("div",{className:"contractor__expanded-action",children:[Object(f.jsx)(Y.a,{className:"contractor__expanded-btn",onClick:function(){return t=e,void p.push("contractors/".concat(t.id));var t},children:"\u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c"}),Object(f.jsx)(Y.a,{className:"contractor__expanded-btn",onClick:function(){return t=e.id,void(window.confirm("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430?")&&O(rt(t)));var t},danger:!0,children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]})]})}}}),Object(f.jsx)(It.a,{})]})},Ur=w.a.Text,Vr=function(e){var t,r,n=e.placeholder,a=e.editMode,c=e.fieldName,o=e.control,s=e.error,i=e.defaultValue,u=e.isTextArea,l=void 0!==u&&u,d=e.maxLength;return a?Object(f.jsx)(Vt.a,{control:o,rules:{required:!0},render:function(e){var t=e.field,r=t.onChange,a=t.value;return Object(f.jsx)(br.a.Item,{validateStatus:s?"error":"success",help:null===s||void 0===s?void 0:s.message,className:"input",children:l?Object(f.jsx)(Z.a.TextArea,{placeholder:n,value:a,onChange:r}):Object(f.jsx)(Z.a,{placeholder:n,value:a,onChange:r,maxLength:d})})},name:c,defaultValue:i}):"eMail"===c?Object(f.jsx)("a",{href:"mailto:".concat(i),children:i}):"webSite"===c&&i?Object(f.jsx)("a",{href:i,target:"_blank",rel:"noreferrer",children:(t=i,r=25,t.length>r?t.substr(0,r-1)+"...":t)}):Object(f.jsx)(Ur,{children:i})},Pr=c.a.memo(Vr),Gr=Dt.a.SHOW_ALL,qr=function(e){var t=e.defaultValue,r=e.editMode,n=e.control,a=e.error,c=e.categoriesTree,o=e.selectedCategories,s=e.handleSelectCategories,i=e.handleRemoveImage,u=e.handleAddImage,l=e.imageUploading,d=e.images,j=e.registeringType;return Object(f.jsx)("div",{className:"contractor__body",children:Object(f.jsxs)(Q.a,{children:[j===W.SUPPLIER&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(Rr.a,{children:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"}),Object(f.jsx)(Pr,{defaultValue:t,editMode:r,control:n,error:a,fieldName:"description",placeholder:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",isTextArea:!0}),Object(f.jsx)(Rr.a,{children:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438"}),c&&Object(f.jsx)(Dt.a,{treeData:c,value:o,onChange:s,treeCheckable:!0,showCheckedStrategy:Gr,placeholder:r?"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430":"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438",style:{width:"100%",marginBottom:10},disabled:!r})]}),Object(f.jsx)(Rr.a,{children:"\u0424\u043e\u0442\u043e"}),Object(f.jsxs)("div",{className:"contractor__images",children:[Object(f.jsx)(X,{removeImage:i,images:d,editMode:r}),r&&Object(f.jsx)(_,{onChange:u,isUploading:l})]})]})})},Br=c.a.memo(qr),Fr=r(276),Wr=function(e){var t=e.editMode,r=e.handleSelectRegType,n=e.registeringType,a=e.contractor,c=e.control,o=e.errors,s=e.toggleShowMap;return Object(f.jsx)(f.Fragment,{children:Object(f.jsxs)(Tr.b,{size:"small",column:4,children:[Object(f.jsx)(Tr.b.Item,{label:"\u0422\u0438\u043f \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430",children:t?Object(f.jsxs)(Fr.a.Group,{onChange:r,value:n,children:[Object(f.jsx)(Fr.a,{value:W.SUPPLIER,children:"\u041f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a"}),Object(f.jsx)(Fr.a,{value:W.CUSTOMER,children:"\u0417\u0430\u043a\u0430\u0437\u0447\u0438\u043a"})]}):a.contractorType===W.CUSTOMER?"\u0417\u0430\u043a\u0430\u0437\u0447\u0438\u043a":"\u041f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a"}),Object(f.jsx)(Tr.b.Item,{label:"\u0417\u0430\u044f\u0432\u043a\u0438 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430",children:Object(f.jsx)(i.b,{to:"/orders",children:"\u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c"})}),Object(f.jsx)(Tr.b.Item,{label:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u043d\u043e\u0435 \u043b\u0438\u0446\u043e",children:Object(f.jsx)(Pr,{defaultValue:a.contactName,editMode:t,control:c,error:o.contactName,fieldName:"contactName",placeholder:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u043d\u043e\u0435 \u043b\u0438\u0446\u043e"})}),Object(f.jsx)(Tr.b.Item,{label:"\u0413\u043e\u0440\u043e\u0434",children:Object(f.jsx)(Pr,{defaultValue:a.location,editMode:t,control:c,error:o.location,fieldName:"location",placeholder:"\u0413\u043e\u0440\u043e\u0434"})}),Object(f.jsx)(Tr.b.Item,{label:"\u041a\u043e\u043e\u0440\u0434\u0438\u043d\u0430\u0442\u044b",children:Object(f.jsx)(Y.a,{size:"small",type:"link",onClick:s,children:"\u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u043d\u0430 \u043a\u0430\u0440\u0442\u0435"})}),Object(f.jsx)(Tr.b.Item,{label:"\u0421\u0430\u0439\u0442",children:Object(f.jsx)(Pr,{defaultValue:a.contacts.webSite,editMode:t,control:c,error:o.webSite,fieldName:"webSite",placeholder:"\u0421\u0430\u0439\u0442"})}),Object(f.jsx)(Tr.b.Item,{label:"\u041f\u043e\u0447\u0442\u0430",children:Object(f.jsx)(Pr,{defaultValue:a.contacts.eMail,editMode:t,control:c,error:o.eMail,fieldName:"eMail",placeholder:"\u041f\u043e\u0447\u0442\u0430"})}),Object(f.jsx)(Tr.b.Item,{label:"\u0410\u0434\u0440\u0435\u0441",children:Object(f.jsx)(Pr,{defaultValue:a.contacts.address,editMode:t,control:c,error:o.address,fieldName:"address",placeholder:"\u0410\u0434\u0440\u0435\u0441"})}),Object(f.jsx)(Tr.b.Item,{label:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d",children:Object(f.jsx)(Pr,{defaultValue:"+".concat(a.phoneNumber),editMode:t,control:c,error:o.phoneNumber,fieldName:"phoneNumber",placeholder:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d",maxLength:12})}),Object(f.jsx)(Tr.b.Item,{label:"\u0418\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430",children:a.id})]})})},zr=c.a.memo(Wr),Hr=l.a.Content,Yr=function(){var e=c.a.useState(!1),t=Object(j.a)(e,2),r=t[0],a=t[1],o=c.a.useState([]),s=Object(j.a)(o,2),i=s[0],l=s[1],b=c.a.useState(null),O=Object(j.a)(b,2),p=O[0],h=O[1],m=c.a.useState(W.SUPPLIER),x=Object(j.a)(m,2),g=x[0],v=x[1],E=c.a.useState(!1),C=Object(j.a)(E,2),S=C[0],y=C[1],N=Object(Vt.e)({resolver:Object(Pt.a)(g===W.SUPPLIER?Bt:Ft)}),_=N.control,I=N.handleSubmit,A=N.formState.errors,k=Object(u.c)(se),w=Object(u.c)(le),M=Object(u.c)(de),L=Object(u.c)(ue),D=Object(u.c)(pe),U=Object(u.c)(he),V=Object(u.c)(er),P=Object(d.i)().id,q=Object(u.b)(),B=Object(d.g)(),F=c.a.useCallback((function(){q(ze(n.NEVER)),q(Fe(null)),q($e())}),[q]),z=c.a.useCallback((function(){a((function(e){return q(ze(n.NEVER)),!e}))}),[q]);c.a.useEffect((function(){var e;return q((e=Number(P),function(){var t=Object(Ge.a)(Pe.a.mark((function t(r){var n;return Pe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r(We(!0)),t.next=4,qe.getContractorById(e);case 4:0===(n=t.sent).length?et("\u041a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d",r):r(Fe(n[0])),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.log("getFullContractorInfo ===> ",t.t0),et("\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0442\u0438, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437",r);case 12:return t.prev=12,r(We(!1)),t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[0,8,12,15]])})));return function(e){return t.apply(this,arguments)}}())),function(){F()}}),[F,q,P]),c.a.useEffect((function(){var e;k&&(l(null===(e=k.categories)||void 0===e?void 0:e.map((function(e){return e.categoryId}))),v(k.contractorType),h({coordinatesLatitude:k.coordinates.coordinatesLatitude,coordinatesLongitude:k.coordinates.coordinatesLongitude}),q(Ze(k.attachments)))}),[k,q]),c.a.useEffect((function(){k||w!==n.SUCCESS||B.push("/contractors")}),[B,k,w]);var H=I((function(e){if(k){var t=i.map((function(e){return{categoryId:e}})),r={name:e.name,contactName:e.contactName,phoneNumber:"7".concat(String(e.phoneNumber).slice(-10)),description:e.description?e.description:"",location:e.location,coordinates:p||{coordinatesLatitude:"",coordinatesLongitude:""},contacts:{address:e.address?e.address:"",webSite:e.webSite?e.webSite:"",eMail:e.eMail?e.eMail:""},contractorType:g,categories:t,attachments:D.map((function(e){return{attachmentId:e.id}}))};a(!1),q(function(e,t){return function(){var r=Object(Ge.a)(Pe.a.mark((function r(a){var c;return Pe.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,a(We(!0)),r.next=4,qe.updateContractor(e,t);case 4:(c=r.sent).length>0?(a(ze(n.SUCCESS)),a($e()),a(Fe(c[0]))):et("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437",a),r.next=12;break;case 8:r.prev=8,r.t0=r.catch(0),console.log("getContracors ===> ",r.t0),et("\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0442\u0438, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437",a);case 12:return r.prev=12,a(We(!1)),r.finish(12);case 15:case"end":return r.stop()}}),r,null,[[0,8,12,15]])})));return function(e){return r.apply(this,arguments)}}()}(r,k.id))}})),K=c.a.useCallback((function(e){l(e)}),[]),X=c.a.useCallback((function(){window.confirm("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430?")&&k&&q(rt(k.id))}),[k,q]),Z=c.a.useCallback((function(e){v(e.target.value)}),[]),J=c.a.useCallback((function(){var e;(z(),k)&&(l(null===(e=k.categories)||void 0===e?void 0:e.map((function(e){return e.categoryId}))),q($e()),q(Ze(k.attachments)))}),[k,q,z]),$=c.a.useCallback((function(){y(!S)}),[S]),ee=c.a.useCallback((function(e){r&&h({coordinatesLatitude:String(null===e||void 0===e?void 0:e.lat()),coordinatesLongitude:String(null===e||void 0===e?void 0:e.lng())})}),[r]),te=function(){var e=Object(Ge.a)(Pe.a.mark((function e(t){var r,n,a,c,o,s,i;return Pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.currentTarget,!(a=null===(r=n.files)||void 0===r?void 0:r[0])){e.next=13;break}if("image/png"===a.type||"image/jpeg"===a.type||"image/jpg"===a.type){e.next=7;break}return e.abrupt("return",Ut.b.error("".concat(a.name," \u043d\u0435 \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u043e\u0439")));case 7:return e.next=9,jr(a);case 9:c=e.sent,o=a.name.split(".").pop(),s=a.name,c&&o&&s&&(i={name:s,ext:o,content:c.split(",")[1]},q(nt(i)));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),re=c.a.useCallback((function(){return g===W.SUPPLIER?0!==Object.keys(A).length||0===i.length:0!==Object.keys(A).length}),[A,g,i.length]),ne=c.a.useMemo((function(){return[Object(f.jsx)(Y.a,{onClick:H,disabled:re(),children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"},"1"),Object(f.jsx)(Y.a,{onClick:J,danger:!0,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"},"2")]}),[re,J,H]),ae=c.a.useMemo((function(){return[Object(f.jsx)(Y.a,{onClick:z,children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"},"3"),Object(f.jsx)(Y.a,{onClick:X,danger:!0,children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"},"5")]}),[X,z]);return S?Object(f.jsxs)(Hr,{className:"content",children:[Object(f.jsxs)("div",{className:"map__header",children:[Object(f.jsx)(Y.a,{className:"map-btn",type:"default",onClick:$,children:"\u041d\u0430\u0437\u0430\u0434"}),p&&r&&Object(f.jsx)(Y.a,{onClick:$,children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]}),Object(f.jsx)(G,{containerElement:Object(f.jsx)(Q.a,{className:"map"}),mapElement:Object(f.jsx)("div",{className:"map-element"}),googleMapURL:"https://maps.googleapis.com/maps/api/js?key=AIzaSyCxdk4gpLGO1qZLBP8yN54kfA5wm35HWXQ&v=3.exp&libraries=geometry,drawing,places",loadingElement:Object(f.jsx)(R,{}),handleSelectCoords:ee,marker:p})]}):L?Object(f.jsx)(R,{}):Object(f.jsxs)(Hr,{className:"content",children:[Object(f.jsx)(T,{onClose:function(){return q(ze(n.NEVER))},errorMessage:M,status:w,successMessage:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b"}),k&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("div",{className:"page-header",children:Object(f.jsx)(Cr.a,{ghost:!1,onBack:function(){return window.history.back()},title:Object(f.jsx)(Pr,{defaultValue:k.name,editMode:r,control:_,error:A.name,fieldName:"name",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"}),extra:r?ne:ae,children:Object(f.jsx)(zr,{editMode:r,handleSelectRegType:Z,registeringType:g,contractor:k,control:_,errors:A,toggleShowMap:$})})}),Object(f.jsx)(Br,{defaultValue:k.description,editMode:r,control:_,error:A.description,categoriesTree:V,selectedCategories:i,handleSelectCategories:K,images:D,registeringType:g,handleRemoveImage:function(e){k&&q(function(e,t){return function(){var r=Object(Ge.a)(Pe.a.mark((function r(n){return Pe.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,n(Xe(!0)),r.next=4,qe.removeContractorAttachment(e,t);case 4:r.sent?n(Qe(t)):et("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0432\u043b\u043e\u0436\u0435\u043d\u0438\u0435, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437",n),r.next=12;break;case 8:r.prev=8,r.t0=r.catch(0),console.log("removeContractorImage ===> ",r.t0),et("\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0442\u0438, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437",n);case 12:return r.prev=12,n(Xe(!1)),r.finish(12);case 15:case"end":return r.stop()}}),r,null,[[0,8,12,15]])})));return function(e){return r.apply(this,arguments)}}()}(k.id,e))},handleAddImage:te,imageUploading:U})]})]})},Kr=w.a.Text,Xr=function(e){var t=e.control,r=e.error,n=e.subtitle,a=e.fieldName,c=e.required,o=void 0===c||c,s=e.maxLength,i=e.textArea,u=e.defaultValue,l=i?Z.a.TextArea:Z.a;return Object(f.jsx)(Vt.a,{control:t,rules:{required:o},render:function(e){var t=e.field,a=t.onChange,c=t.value;return Object(f.jsxs)(br.a.Item,{validateStatus:r?"error":"success",help:null===r||void 0===r?void 0:r.message,className:"input form__input",required:o,children:[Object(f.jsx)(Kr,{className:"subtitle",children:n}),Object(f.jsx)(l,{placeholder:n,value:c,onChange:a,maxLength:s})]})},name:a,defaultValue:u})},Zr=[{id:"1",fieldName:"name",subtitle:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u0438",required:!0},{id:"2",fieldName:"contactName",subtitle:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u043d\u043e\u0435 \u043b\u0438\u0446\u043e",required:!0},{id:"3",fieldName:"location",subtitle:"\u0413\u043e\u0440\u043e\u0434",required:!0},{id:"4",fieldName:"address",subtitle:"\u0410\u0434\u0440\u0435\u0441",required:!0},{id:"5",fieldName:"eMail",subtitle:"\u041f\u043e\u0447\u0442\u0430",required:!1},{id:"6",fieldName:"webSite",subtitle:"\u0421\u0430\u0439\u0442 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438",required:!1},{id:"7",fieldName:"phoneNumber",subtitle:"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430",maxLength:12,required:!0,defaultValue:"+7"},{id:"8",fieldName:"description",subtitle:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",required:!1,textArea:!0}],Jr=function(e){var t=e.control,r=e.errors;return Object(f.jsx)(f.Fragment,{children:Zr.map((function(e){return Object(f.jsx)(Xr,{control:t,error:r[e.fieldName],subtitle:e.subtitle,fieldName:e.fieldName,required:e.required,maxLength:e.maxLength,textArea:e.textArea,defaultValue:e.defaultValue},e.id)}))})},Qr=[{id:"1",fieldName:"name",subtitle:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u0438",required:!0},{id:"2",fieldName:"contactName",subtitle:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u043d\u043e\u0435 \u043b\u0438\u0446\u043e",required:!0},{id:"3",fieldName:"location",subtitle:"\u0413\u043e\u0440\u043e\u0434",required:!0},{id:"7",fieldName:"phoneNumber",subtitle:"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430",maxLength:12,required:!0,defaultValue:"+7"}],$r=function(e){var t=e.control,r=e.errors;return Object(f.jsx)(f.Fragment,{children:Qr.map((function(e){return Object(f.jsx)(Xr,{control:t,error:r[e.fieldName],subtitle:e.subtitle,fieldName:e.fieldName,required:e.required,maxLength:e.maxLength,defaultValue:e.defaultValue},e.id)}))})},en=l.a.Content,tn=w.a.Title,rn=Dt.a.SHOW_ALL,nn=function(){var e=c.a.useState([]),t=Object(j.a)(e,2),r=t[0],a=t[1],o=c.a.useState(W.SUPPLIER),s=Object(j.a)(o,2),i=s[0],l=s[1],b=Object(Vt.e)({resolver:Object(Pt.a)(i===W.SUPPLIER?Bt:Ft)}),O=b.control,p=b.handleSubmit,h=b.reset,m=b.formState.errors,x=c.a.useState(!1),g=Object(j.a)(x,2),v=g[0],E=g[1],C=c.a.useState(null),S=Object(j.a)(C,2),y=S[0],N=S[1],I=Object(u.c)(le),A=Object(u.c)(de),k=Object(u.c)(ue),w=Object(u.c)(se),M=Object(u.c)(pe),L=Object(u.c)(he),D=Object(u.c)(er),U=Object(u.c)(Yt),V=Object(u.c)($t),P=Object(u.b)(),q=Object(d.g)(),B=c.a.useCallback((function(){P(ze(n.NEVER)),P(He(null)),P($e())}),[P]),F=c.a.useCallback((function(){P(cr(n.NEVER)),P(ar(null))}),[P]);c.a.useEffect((function(){return function(){B(),F()}}),[F,B]),c.a.useEffect((function(){w&&I===n.SUCCESS&&q.push("/contractors/".concat(w.id))}),[w,q,I]);var z=p((function(e){var t=r.map((function(e){return{categoryId:e}})),a={name:e.name,contactName:e.contactName,phoneNumber:"7".concat(String(e.phoneNumber).slice(-10)),description:e.description?e.description:"",location:e.location,coordinates:y||{coordinatesLatitude:"",coordinatesLongitude:""},contacts:{address:e.address?e.address:"",webSite:e.webSite?e.webSite:"",eMail:e.eMail?e.eMail:""},contractorType:i,categories:t,attachments:M.map((function(e){return{attachmentId:e.id}}))};P(function(e){return function(){var t=Object(Ge.a)(Pe.a.mark((function t(r){var a;return Pe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r(We(!0)),t.next=4,qe.createContractor(e);case 4:(a=t.sent).length>0?(r(ze(n.SUCCESS)),r(Fe(a[0]))):et("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437",r),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.log("createContractorProfile ERROR ===>",t.t0),et("\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0442\u0438, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437",r);case 12:return t.prev=12,r(We(!1)),t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[0,8,12,15]])})));return function(e){return t.apply(this,arguments)}}()}(a))})),H=function(){E(!v)},K=function(){var e=Object(Ge.a)(Pe.a.mark((function e(t){var r,n,a,c,o,s,i;return Pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.currentTarget,!(a=null===(r=n.files)||void 0===r?void 0:r[0])){e.next=13;break}if("image/png"===a.type||"image/jpeg"===a.type||"image/jpg"===a.type){e.next=7;break}return e.abrupt("return",Ut.b.error("".concat(a.name," \u043d\u0435 \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u043e\u0439")));case 7:return e.next=9,jr(a);case 9:c=e.sent,o=a.name.split(".").pop(),s=a.name,c&&o&&s&&(i={name:s,ext:o,content:c.split(",")[1]},P(nt(i)));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return k?Object(f.jsx)(R,{}):v?Object(f.jsxs)(en,{className:"content",children:[Object(f.jsxs)("div",{className:"map__header",children:[Object(f.jsx)(Y.a,{className:"map-btn",type:"default",onClick:H,children:"\u041d\u0430\u0437\u0430\u0434"}),y&&Object(f.jsx)(Y.a,{onClick:H,children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]}),Object(f.jsx)(G,{containerElement:Object(f.jsx)(Q.a,{className:"map"}),mapElement:Object(f.jsx)("div",{className:"map-element"}),googleMapURL:"https://maps.googleapis.com/maps/api/js?key=AIzaSyCxdk4gpLGO1qZLBP8yN54kfA5wm35HWXQ&v=3.exp&libraries=geometry,drawing,places",loadingElement:Object(f.jsx)(R,{}),handleSelectCoords:function(e){N({coordinatesLatitude:String(null===e||void 0===e?void 0:e.lat()),coordinatesLongitude:String(null===e||void 0===e?void 0:e.lng())})},marker:y})]}):Object(f.jsxs)(en,{className:"content",children:[Object(f.jsx)(T,{onClose:B,errorMessage:A,successMessage:"\u041a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d",status:I}),Object(f.jsx)(T,{onClose:F,errorMessage:U,status:V}),Object(f.jsxs)(Q.a,{className:"form",children:[Object(f.jsx)(tn,{level:3,className:"title",children:"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430"}),i===W.SUPPLIER?Object(f.jsx)(Jr,{control:O,errors:m}):Object(f.jsx)($r,{control:O,errors:m}),i===W.SUPPLIER&&Object(f.jsx)(Dt.a,{treeData:D,value:r,onChange:function(e){a(e)},treeCheckable:!0,showCheckedStrategy:rn,placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430",style:{width:"100%",marginBottom:10},maxTagCount:5}),Object(f.jsxs)(Fr.a.Group,{onChange:function(e){h(),l(e.target.value)},value:i,className:"radio-group",children:[Object(f.jsx)(Fr.a,{value:W.SUPPLIER,children:"\u041f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a"}),Object(f.jsx)(Fr.a,{value:W.CUSTOMER,children:"\u0417\u0430\u043a\u0430\u0437\u0447\u0438\u043a"})]}),i===W.SUPPLIER&&Object(f.jsx)(Y.a,{className:"map-btn",type:"default",onClick:H,block:!0,children:y?"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043a\u043e\u043e\u0440\u0434\u0438\u043d\u0430\u0442\u044b":"\u041e\u0442\u043c\u0435\u0442\u0438\u0442\u044c \u043d\u0430 \u043a\u0430\u0440\u0442\u0435"}),Object(f.jsx)(X,{removeImage:function(e){P(function(e){return function(){var t=Object(Ge.a)(Pe.a.mark((function t(r){return Pe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r(Xe(!0)),t.next=4,Be.removeAttachment(e);case 4:t.sent?r(Qe(e)):et("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0432\u043b\u043e\u0436\u0435\u043d\u0438\u0435, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437",r),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.log("removeNewContractorImage ===> ",t.t0),et("\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0442\u0438, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437",r);case 12:return t.prev=12,r(Xe(!1)),t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[0,8,12,15]])})));return function(e){return t.apply(this,arguments)}}()}(e))},images:M,editMode:!0}),Object(f.jsx)(_,{onChange:K,isUploading:L}),Object(f.jsx)(Y.a,{className:"order__save-btn",onClick:z,disabled:Object.keys(m).length>0||i===W.SUPPLIER&&0===r.length,children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})]})},an=r(808),cn=r(816),on=r(131),sn=w.a.Text,un=function(e){var t=e.placeholder,r=e.editMode,n=e.value,a=e.currentValue,c=e.error,o=e.onChange;return r?Object(f.jsx)(br.a.Item,{validateStatus:c?"error":"success",help:c,className:"input",required:!0,tooltip:"\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435",children:Object(f.jsx)(Z.a,{placeholder:t,onClick:function(e){e.stopPropagation()},value:a,onChange:o})}):Object(f.jsx)(sn,{children:n})},ln=function(e){var t=e.editMode,r=e.disabledBtn,n=e.onSave,a=e.onEdit,c=e.category,o=e.onRemove;return Object(f.jsx)("div",{className:"categories__actions",children:t?Object(f.jsx)(Y.a,{onClick:n,disabled:r,children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(Y.a,{className:"categories__btn",onClick:function(e){e.stopPropagation(),a(c)},children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"}),Object(f.jsx)(Y.a,{className:"categories__btn",onClick:function(e){e.stopPropagation(),o(c.id)},danger:!0,children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]})})},dn=l.a.Content,jn=w.a.Text,bn=an.a.Panel,On=function(){var e=c.a.useState(null),t=Object(j.a)(e,2),r=t[0],a=t[1],o=Object(u.b)(),s=Object(u.c)(Xt),i=Object(u.c)(Zt),l=Object(u.c)(Kt),d=Object(u.c)(Yt),b=Object(u.c)(Qt),O=Object(u.c)($t),p=c.a.useCallback((function(){o(cr(n.NEVER)),o(ar(null))}),[o]);c.a.useEffect((function(){return function(){return p()}}),[p]);var h=function(e){window.confirm("\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044e?")&&o(function(e){return function(){var t=Object(Ge.a)(Pe.a.mark((function t(r){return Pe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r(nr(!0)),t.next=4,tr.deleteCategoryById(e);case 4:t.sent?(r(cr(n.SUCCESS)),r(ir(e))):lr("\u041d\u0435 \u043f\u043e\u043b\u0443\u0447\u0438\u043b\u043e\u0441\u044c \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044e, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437",r),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.log("deleteCategoryById...",t.t0),lr("\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0442\u0438, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437",r);case 12:return t.prev=12,r(nr(!1)),t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[0,8,12,15]])})));return function(e){return t.apply(this,arguments)}}()}(e))},m=function(e){a(e)},x=function(e){e.stopPropagation(),r&&o(dr(r)),a(null)},g=function(e){a((function(t){return t?Object(Er.a)(Object(Er.a)({},t),{},{name:e.target.value}):t}))},v=function(e){a((function(t){return t?Object(Er.a)(Object(Er.a)({},t),{},{parentId:e}):t}))};return l?Object(f.jsx)(R,{size:"large"}):Object(f.jsxs)(dn,{className:"content",children:[Object(f.jsx)(T,{onClose:p,errorMessage:d,successMessage:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b",status:O}),s&&s.length>0?Object(f.jsx)(an.a,{accordion:!0,children:s.map((function(e){return Object(f.jsx)(bn,{header:Object(f.jsx)("div",{className:"categories__header",children:b===e.id?Object(f.jsx)(jn,{children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435..."}):Object(f.jsx)(un,{editMode:(null===r||void 0===r?void 0:r.id)===e.id,value:e.name,currentValue:null===r||void 0===r?void 0:r.name,onChange:g})}),extra:Object(f.jsx)(ln,{editMode:(null===r||void 0===r?void 0:r.id)===e.id,disabledBtn:0===(null===r||void 0===r?void 0:r.name.length),onSave:x,onEdit:m,category:e,onRemove:h}),children:i&&Object(f.jsx)(cn.b,{dataSource:i.filter((function(t){return t.parentId===e.id})),renderItem:function(e){return Object(f.jsx)(cn.b.Item,{actions:(null===r||void 0===r?void 0:r.id)===e.id?[Object(f.jsx)(Y.a,{onClick:x,disabled:0===(null===r||void 0===r?void 0:r.name.length),children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]:[Object(f.jsx)(Y.a,{size:"small",onClick:function(t){t.stopPropagation(),m(e)},children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"}),Object(f.jsx)(Y.a,{size:"small",onClick:function(t){t.stopPropagation(),h(e.id)},danger:!0,children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})],children:Object(f.jsx)(cn.b.Item.Meta,{description:Object(f.jsx)(f.Fragment,{children:b===e.id?Object(f.jsx)(jn,{children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435..."}):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(un,{editMode:(null===r||void 0===r?void 0:r.id)===e.id,value:e.name,currentValue:null===r||void 0===r?void 0:r.name,onChange:g}),(null===r||void 0===r?void 0:r.id)===e.id&&Object(f.jsx)(V,{mainCategories:s,handleChangeParentId:v,item:e})]})})})})}})},e.id)}))}):Object(f.jsx)(on.a,{description:"\u0414\u0430\u043d\u043d\u044b\u0445 \u043d\u0435\u0442"})]})},fn=l.a.Content,pn=w.a.Text,hn=w.a.Title,mn=function(){var e=Object(Vt.e)({resolver:Object(Pt.a)(Wt)}),t=e.control,r=e.handleSubmit,a=e.formState.errors,o=Object(u.c)(Yt),s=Object(u.c)($t),i=Object(u.c)(Xt),l=Object(u.c)(Kt),d=Object(u.b)(),j=c.a.useCallback((function(){d(cr(n.NEVER)),d(ar(null))}),[d]),b=r((function(e){d(function(e){return function(){var t=Object(Ge.a)(Pe.a.mark((function t(r){var a;return Pe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r(nr(!0)),t.next=4,tr.addCategory({name:e.name,parentId:Number(e.parentId),isDeleted:!1});case 4:(a=t.sent).length>0?(r(cr(n.SUCCESS)),r(ur(a[0]))):lr("\u041d\u0435 \u043f\u043e\u043b\u0443\u0447\u0438\u043b\u043e\u0441\u044c \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044e, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437",r),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.log("addCategory...",t.t0),lr("\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0442\u0438, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437",r);case 12:return t.prev=12,r(nr(!1)),t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[0,8,12,15]])})));return function(e){return t.apply(this,arguments)}}()}(e))}));return c.a.useEffect((function(){return function(){return j()}}),[j]),l?Object(f.jsx)(R,{}):Object(f.jsxs)(fn,{className:"content",children:[Object(f.jsx)(T,{onClose:j,errorMessage:o,successMessage:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0430",status:s}),Object(f.jsxs)(Q.a,{className:"form",children:[Object(f.jsx)(hn,{level:3,className:"title",children:"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438"}),Object(f.jsx)(Vt.a,{control:t,rules:{required:!0},render:function(e){var t,r=e.field,n=r.onChange,c=r.value;return Object(f.jsxs)(br.a.Item,{validateStatus:a.name?"error":"success",help:null===(t=a.name)||void 0===t?void 0:t.message,className:"input",required:!0,children:[Object(f.jsx)(pn,{className:"subtitle",children:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438"}),Object(f.jsx)(Z.a,{placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438",value:c,onChange:n})]})},name:"name",defaultValue:""}),i&&Object(f.jsx)(Vt.a,{control:t,rules:{required:!0},render:function(e){var t,r=e.field,n=r.onChange;r.value;return Object(f.jsx)(V,{mainCategories:i,handleChangeParentId:n,error:null===(t=a.parentId)||void 0===t?void 0:t.message})},name:"parentId",defaultValue:0}),Object(f.jsx)(Y.a,{className:"categories__save-btn",onClick:b,disabled:l||Object.keys(a).length>0,children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})]})},xn=r(271),gn=w.a.Text,vn=function(){var e=Object(u.c)(Jt),t=Object(u.c)(Yt),r=Object(u.c)($t),a=Object(u.c)(Qt),o=Object(u.b)(),s=c.a.useCallback((function(){o(cr(n.NEVER)),o(ar(null))}),[o]);return Object(f.jsxs)(xn.Content,{className:"content",children:[Object(f.jsx)(T,{onClose:s,errorMessage:t,successMessage:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b",status:r}),e&&0===e.length?Object(f.jsx)(on.a,{}):Object(f.jsx)(Q.a,{children:Object(f.jsx)(cn.b,{dataSource:e,renderItem:function(e){return Object(f.jsx)(cn.b.Item,{actions:[Object(f.jsx)(Y.a,{onClick:function(){return function(e){if(window.confirm("\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u0443\u044e \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044e?")){var t=Object(Er.a)(Object(Er.a)({},e),{},{isDeleted:!1});o(dr(t))}}(e)},children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"})],children:Object(f.jsx)(cn.b.Item.Meta,{description:a===e.id?Object(f.jsx)(gn,{children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435..."}):Object(f.jsx)(gn,{children:e.name})})})}})})]})},En=function(){var e=Object(d.i)().id,t=Object(u.c)(Me),r=Object(u.c)(Se),n=Object(u.b)();return c.a.useEffect((function(){var t;n((t=Number(e),function(){var e=Object(Ge.a)(Pe.a.mark((function e(r){var n;return Pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r(st(!0)),e.next=4,ct.getOrderChats(t);case 4:(n=e.sent)?r(mt(n)):xt("\u041e\u0448\u0438\u0431\u043a\u0430, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437",r),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),xt("\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0442\u0438, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437",r);case 11:return e.prev=11,r(st(!1)),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])})));return function(t){return e.apply(this,arguments)}}()))}),[n,e]),r?Object(f.jsx)(R,{}):Object(f.jsx)(xn.Content,{className:"content",children:t?0===t.length?Object(f.jsx)(on.a,{image:on.a.PRESENTED_IMAGE_SIMPLE}):Object(f.jsx)(f.Fragment,{children:t.map((function(e){return Object(f.jsxs)(Q.a,{title:"\u0427\u0430\u0442 \u2116".concat(e.id),bodyStyle:{display:"flex"},children:[Object(f.jsxs)(Q.a.Grid,{children:["\u041f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a:"," ",Object(f.jsx)(i.b,{to:"/contractors/".concat(e.supplierId),children:e.supplierName})]}),Object(f.jsxs)(Q.a.Grid,{children:["\u0417\u0430\u043a\u0430\u0437\u0447\u0438\u043a:"," ",Object(f.jsx)(i.b,{to:"/contractors/".concat(e.customerId),children:e.customerName})]}),Object(f.jsx)(Q.a.Grid,{children:Object(f.jsx)(i.b,{to:"/",children:"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f"})})]},e.id)}))}):null})},Cn=function(){return Object(f.jsxs)(l.a,{className:"wrapper",children:[Object(f.jsx)(h,{}),Object(f.jsxs)(l.a,{children:[Object(f.jsx)(S,{}),Object(f.jsx)(l.a,{children:Object(f.jsxs)(d.d,{children:[Object(f.jsx)(d.b,{exact:!0,path:"/",render:function(){return Object(f.jsx)(d.a,{to:"/home"})}}),Object(f.jsx)(d.b,{exact:!0,path:"/home",children:Object(f.jsx)(yt,{})}),Object(f.jsx)(d.b,{exact:!0,path:"/orders",children:Object(f.jsx)(Lt,{})}),Object(f.jsx)(d.b,{exact:!0,path:"/orders/create",children:Object(f.jsx)(vr,{})}),Object(f.jsx)(d.b,{exact:!0,path:"/orders/:id",children:Object(f.jsx)(wr,{})}),Object(f.jsx)(d.b,{exact:!0,path:"/orders/:id/chats",children:Object(f.jsx)(En,{})}),Object(f.jsx)(d.b,{exact:!0,path:"/contractors",children:Object(f.jsx)(Dr,{})}),Object(f.jsx)(d.b,{exact:!0,path:"/contractors/create",children:Object(f.jsx)(nn,{})}),Object(f.jsx)(d.b,{path:"/contractors/:id",children:Object(f.jsx)(Yr,{})}),Object(f.jsx)(d.b,{exact:!0,path:"/categories",children:Object(f.jsx)(On,{})}),Object(f.jsx)(d.b,{exact:!0,path:"/categories/deleted",children:Object(f.jsx)(vn,{})}),Object(f.jsx)(d.b,{exact:!0,path:"/categories/create",children:Object(f.jsx)(mn,{})}),Object(f.jsx)(d.b,{exact:!0,path:"*",render:function(){return Object(f.jsx)(d.a,{to:"/home"})},children:Object(f.jsx)(yt,{})})]})})]})]})};var Sn=function(){var e=Object(u.b)();return c.a.useEffect((function(){e(function(){var e=Object(Ge.a)(Pe.a.mark((function e(t){var r;return Pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(nr(!0)),e.next=4,tr.getAllCategories();case 4:r=e.sent,t(rr(r)),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("getAllCategories...",e.t0),lr("\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0442\u0438, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437",t);case 12:return e.prev=12,t(nr(!1)),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[0,8,12,15]])})));return function(t){return e.apply(this,arguments)}}())}),[e]),Object(f.jsx)("div",{className:"app",children:Object(f.jsx)(Cn,{})})},yn=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,821)).then((function(t){var r=t.getCLS,n=t.getFID,a=t.getFCP,c=t.getLCP,o=t.getTTFB;r(e),n(e),a(e),c(e),o(e)}))},Rn=r(229),Nn=r(462),_n={},In=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_n,t=arguments.length>1?arguments[1]:void 0;return t.type,e},Tn={categories:null,isLoadingCategories:!1,errorMessage:null,categoriesActionStatus:n.NEVER,currentCategory:null,categoryInProcessEdit:null},An=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Tn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CATEGORIES":case"SET_IS_LOADING_CATEGORIES":case"SET_CATEGORIES_ERROR_MESSAGE":case"SET_CATEGORIES_ACTION_STATUS":case"SET_CURRENT_CATEGORY":case"SET_CATEGORY_IN_EDIT_PROCESS":return Object(Er.a)(Object(Er.a)({},e),t.payload);case"REPLACE_CATEGORY":var r,n=null===(r=e.categories)||void 0===r?void 0:r.map((function(e){return e.id===t.payload.category.id?t.payload.category:e}));return Object(Er.a)(Object(Er.a)({},e),{},{categories:n});case"REMOVE_CATEGORY":var a,c=null===(a=e.categories)||void 0===a?void 0:a.filter((function(e){return e.id!==t.payload.id}));return Object(Er.a)(Object(Er.a)({},e),{},{categories:c});case"CLEAR_CATEGORIES":return Object(Er.a)(Object(Er.a)({},e),{},{categories:null});case"ADD_NEW_CATEGORY":return Object(Er.a)(Object(Er.a)({},e),{},{categories:e.categories?[].concat(Object(A.a)(e.categories),[t.payload.category]):[t.payload.category]});default:return e}},kn={contractors:null,currentContractor:null,contractorsLoading:!1,contractorsActionStatus:n.NEVER,errorMessage:null,contractorImages:[],contractorImageUploading:!1},wn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CURRENT_CONTRACTOR":case"SET_CONTRACTORS_LOADING":case"SET_CONTRACTORS_ACTION_STATUS":case"SET_CONTRACTORS_ERROR_MESSAGE":case"SET_CONTRACTORS":case"SET_CONTRACTOR_IMAGE_UPLOADING":return Object(Er.a)(Object(Er.a)({},e),t.payload);case"REMOVE_CONTRACTOR":var r;return Object(Er.a)(Object(Er.a)({},e),{},{contractors:null===(r=e.contractors)||void 0===r?void 0:r.filter((function(e){return e.id!==t.payload.contractorId}))});case"SET_CONTRACTOR_IMAGES":return Object(Er.a)(Object(Er.a)({},e),{},{contractorImages:t.payload.images});case"ADD_CONTRACTOR_IMAGE":return Object(Er.a)(Object(Er.a)({},e),{},{contractorImages:[].concat(Object(A.a)(e.contractorImages),Object(A.a)(t.payload.images))});case"REMOVE_CONTRACTOR_IMAGE":return Object(Er.a)(Object(Er.a)({},e),{},{contractorImages:e.contractorImages.filter((function(e){return e.id!==t.payload.imageId}))});case"CLEAR_CONTRACTOR_IMAGES":return Object(Er.a)(Object(Er.a)({},e),{},{contractorImages:[]});default:return e}},Mn={orders:null,ordersLoading:!1,errorMessage:null,orderActionStatus:n.NEVER,currentOrder:null,orderImages:[],orderImageUploading:!1,orderChats:null},Ln=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Mn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ORDERS":case"SET_ORDERS_LOADING":case"SET_ORDERS_ERROR":case"SET_ORDER_ACTION_STATUS":case"SET_CURRENT_ORDER":case"SET_ORDER_IMAGE_UPLOADING":case"SET_ORDER_CHATS":return Object(Er.a)(Object(Er.a)({},e),t.payload);case"ADD_NEW_ORDER":return Object(Er.a)(Object(Er.a)({},e),{},{orders:e.orders?[].concat(Object(A.a)(e.orders),[t.payload.order]):[t.payload.order]});case"UPDATE_ORDER":var r;return Object(Er.a)(Object(Er.a)({},e),{},{orders:null===(r=e.orders)||void 0===r?void 0:r.map((function(e){return e.id===t.payload.order.id?t.payload.order:e}))});case"REMOVE_ORDER":var n;return Object(Er.a)(Object(Er.a)({},e),{},{orders:null===(n=e.orders)||void 0===n?void 0:n.filter((function(e){return e.id!==t.payload.id}))});case"SET_ORDER_IMAGES":return Object(Er.a)(Object(Er.a)({},e),{},{orderImages:t.payload.images});case"ADD_ORDER_IMAGE":return Object(Er.a)(Object(Er.a)({},e),{},{orderImages:[].concat(Object(A.a)(e.orderImages),Object(A.a)(t.payload.images))});case"REMOVE_ORDER_IMAGE":return Object(Er.a)(Object(Er.a)({},e),{},{orderImages:e.orderImages.filter((function(e){return e.id!==t.payload.imageId}))});case"CLEAR_ORDER_IMAGES":return Object(Er.a)(Object(Er.a)({},e),{},{orderImages:[]});default:return e}},Dn=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Rn.c,Un=Object(Rn.b)({auth:In,categories:An,contractors:wn,orders:Ln}),Vn=Object(Rn.d)(Un,Dn(Object(Rn.a)(Nn.a)));s.a.render(Object(f.jsx)(i.a,{children:Object(f.jsx)(u.a,{store:Vn,children:Object(f.jsx)(Sn,{})})}),document.getElementById("root")),yn()}},[[791,1,2]]]);
//# sourceMappingURL=main.969f1f97.chunk.js.map