(this.webpackJsonpelectronic_web=this.webpackJsonpelectronic_web||[]).push([[0],{503:function(e,t,r){},813:function(e,t,r){"use strict";r.r(t);var n,a=r(0),c=r.n(a),o=r(52),s=r.n(o),i=r(35),u=r(10),l=(r(503),r(29)),d=r(815),j=r(839),b=r(484),O=r(127),f=r(57),p=r.p+"static/media/logo.4de10a08.png",m=r(1),h=d.a.Header,x=function(e){var t=e.logout,r=c.a.useState(["/"]),n=Object(l.a)(r,2),a=n[0],o=n[1],s=Object(f.h)();c.a.useEffect((function(){o([s.pathname.split("/")[1]])}),[s]);return Object(m.jsx)(j.a,{offsetTop:0,children:Object(m.jsxs)(h,{className:"header",children:[Object(m.jsx)("div",{className:"header__logo",children:Object(m.jsx)(i.b,{to:"/",children:Object(m.jsx)(b.a,{src:p,size:"large"})})}),Object(m.jsxs)(O.a,{theme:"dark",mode:"horizontal",defaultSelectedKeys:["/home"],selectedKeys:a,className:"header__menu",children:[Object(m.jsx)(O.a.Item,{children:Object(m.jsx)(i.b,{to:"/home",children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"})},"home"),Object(m.jsx)(O.a.Item,{children:Object(m.jsx)(i.b,{to:"/orders",children:"\u0417\u0430\u044f\u0432\u043a\u0438"})},"orders"),Object(m.jsx)(O.a.Item,{children:Object(m.jsx)(i.b,{to:"/contractors",children:"\u041a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u044b"})},"contractors"),Object(m.jsx)(O.a.Item,{children:Object(m.jsx)(i.b,{to:"/categories",children:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438"})},"categories"),Object(m.jsx)(O.a.Item,{children:Object(m.jsx)(i.b,{to:"/admins",children:"\u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u044b"})},"admins")]}),Object(m.jsx)("div",{className:"header__logout",children:Object(m.jsx)(i.b,{to:"/suppliers",onClick:function(){window.confirm("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u044b\u0439\u0442\u0438?")&&t()},children:"\u0412\u044b\u0439\u0442\u0438"})})]})})},v=r(844),g=r(845),N=r(846),E=r(847),S=O.a.SubMenu,C=d.a.Sider,y=function(){var e=c.a.useState(["/"]),t=Object(l.a)(e,2),r=t[0],n=t[1],a=Object(f.h)();return c.a.useEffect((function(){n(["".concat(a.pathname).concat(a.search)])}),[a]),Object(m.jsx)(j.a,{offsetTop:64,children:Object(m.jsx)(C,{breakpoint:"xxl",className:"site-layout-background sidebar",children:Object(m.jsxs)(O.a,{mode:"inline",className:"sidebar__menu",selectedKeys:r,children:[Object(m.jsxs)(S,{icon:Object(m.jsx)(v.a,{}),title:"\u0417\u0430\u044f\u0432\u043a\u0438",children:[Object(m.jsx)(O.a.Item,{children:Object(m.jsx)(i.b,{to:"/orders",children:"\u0412\u0441\u0435 \u0437\u0430\u044f\u0432\u043a\u0438"})},"/orders"),Object(m.jsx)(O.a.Item,{children:Object(m.jsx)(i.b,{to:"/orders?filter=active",children:"\u0410\u043a\u0442\u0438\u0432\u043d\u044b\u0435 \u0437\u0430\u044f\u0432\u043a\u0438"})},"/orders?filter=active"),Object(m.jsx)(O.a.Item,{children:Object(m.jsx)(i.b,{to:"/orders?filter=archived",children:"\u0410\u0440\u0445\u0438\u0432\u043d\u044b\u0435 \u0437\u0430\u044f\u0432\u043a\u0438"})},"/orders?filter=archived"),Object(m.jsx)(O.a.Item,{children:Object(m.jsx)(i.b,{to:"/orders?filter=deleted",children:"\u0423\u0434\u0430\u043b\u0435\u043d\u043d\u044b\u0435 \u0437\u0430\u044f\u0432\u043a\u0438"})},"/orders?filter=deleted"),Object(m.jsx)(O.a.Item,{children:Object(m.jsx)(i.b,{to:"/orders/create",children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0437\u0430\u044f\u0432\u043a\u0443"})},"/orders/create")]},"sub1"),Object(m.jsxs)(S,{icon:Object(m.jsx)(g.a,{}),title:"\u041a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u044b",children:[Object(m.jsx)(O.a.Item,{children:Object(m.jsx)(i.b,{to:"/contractors",children:"\u0412\u0441\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u044b"})},"/customcontractorsers"),Object(m.jsx)(O.a.Item,{children:Object(m.jsx)(i.b,{to:"/contractors?filter=customers",children:"\u0417\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0438"})},"/contractors?filter=customers"),Object(m.jsx)(O.a.Item,{children:Object(m.jsx)(i.b,{to:"/contractors?filter=supplier",children:"\u041f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a\u0438"})},"/contractors?filter=supplier"),Object(m.jsx)(O.a.Item,{children:Object(m.jsx)(i.b,{to:"/contractors/create",children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430"})},"/contractors/create")]},"sub3"),Object(m.jsxs)(S,{icon:Object(m.jsx)(N.a,{}),title:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438",children:[Object(m.jsx)(O.a.Item,{children:Object(m.jsx)(i.b,{to:"/categories",children:"\u0412\u0441\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438"})},"/categories"),Object(m.jsx)(O.a.Item,{children:Object(m.jsx)(i.b,{to:"/categories/create",children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044e"})},"/categories/create")]},"sub4"),Object(m.jsxs)(S,{icon:Object(m.jsx)(E.a,{}),title:"\u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u044b",children:[Object(m.jsx)(O.a.Item,{children:Object(m.jsx)(i.b,{to:"/admins",children:"\u0412\u0441\u0435 \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u044b"})},"/admins"),Object(m.jsx)(O.a.Item,{children:Object(m.jsx)(i.b,{to:"/admins/create",children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u0430"})},"/admins/create"),Object(m.jsx)(O.a.Item,{children:Object(m.jsx)(i.b,{to:"/admins/password",children:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"})},"/admins/password")]},"sub5")]})})})},_=c.a.memo(y),R=r(263),I=function(e){var t=e.size,r=void 0===t?"default":t;return Object(m.jsx)("div",{className:"preloader",children:Object(m.jsx)(R.a,{size:r})})},T=r(490),A=function(e){var t=e.onChange,r=e.isUploading,n=e.buttonText,a=c.a.useRef(null);return c.a.useEffect((function(){var e=a.current;return a&&(null===e||void 0===e||e.addEventListener("change",t)),function(){null===e||void 0===e||e.removeEventListener("change",t)}}),[t]),Object(m.jsx)("div",{className:"upload",children:Object(m.jsxs)("div",{className:"upload__btn",onClick:function(){var e;null===(e=a.current)||void 0===e||e.click()},children:[Object(m.jsx)("div",{className:"upload__btn-body",children:r?Object(m.jsx)(R.a,{}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(T.a,{})," ",Object(m.jsx)("div",{children:n})]})}),Object(m.jsx)("input",{ref:a,type:"file",hidden:!0,accept:"image/*"})]})})},w=r(840);!function(e){e.SUCCESS="SUCCESS",e.ERROR="ERROR",e.NEVER="NEVER"}(n||(n={}));var k=function(e){var t=e.status,r=e.errorMessage,a=e.successMessage,c=e.onClose;return t===n.NEVER?null:Object(m.jsx)(w.a,{className:"error",message:t===n.ERROR?r:a,type:t===n.ERROR?"error":"success",closable:!0,onClose:c})},M=r(44),D=r(228),L=r(828),U=r(5),V=r.n(U),P=D.a.Option,G=L.a.Text,q=function(e){var t=e.mainCategories,r=e.handleChangeParentId,n=e.item,a=e.error;return Object(m.jsxs)("div",{className:V()("categories__select-wrapper",{"categories__select-error":a}),children:[Object(m.jsx)(G,{className:"subtitle",children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0440\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u0443\u044e \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044e"}),Object(m.jsx)(D.a,{defaultValue:n?n.parentId:0,onChange:r,className:"categories__select",children:t&&[{id:0,name:"\u041e\u0421\u041d\u041e\u0412\u041d\u0410\u042f \u041a\u0410\u0422\u0415\u0413\u041e\u0420\u0418\u042f"}].concat(Object(M.a)(t)).map((function(e){return Object(m.jsx)(P,{value:e.id,children:e.name},e.id)}))}),Object(m.jsx)(G,{className:"error-text",children:a})]})},F=r(229),B=Object(F.withScriptjs)(Object(F.withGoogleMap)((function(e){var t=e.handleSelectCoords,r=e.marker;return Object(m.jsx)(F.GoogleMap,{defaultZoom:r&&r.coordinatesLatitude.length>0&&!isNaN(Number(r.coordinatesLatitude))?12:7,defaultCenter:r&&r.coordinatesLatitude.length>0&&!isNaN(Number(r.coordinatesLatitude))?{lat:Number(r.coordinatesLatitude),lng:Number(r.coordinatesLongitude)}:{lat:51.2146889644867,lng:68.80153486533352},onClick:function(e){t(e.latLng)},children:r&&Object(m.jsx)(F.Marker,{position:{lat:Number(r.coordinatesLatitude),lng:Number(r.coordinatesLongitude)}})})}))),H=r(344),z=r.n(H),W="https://atm.e-health.kz:9889";z.a.interceptors.request.use((function(e){return e.headers["Content-Security-Policy-Report-Only"]="default-src 'none';",e.headers.Authorization="Basic YWRtaW46Z2hidnRo",e.baseURL=W,e.timeout=5e3,e}));var Y,K,X=r(848),J=r(135),Z=r(825),$=function(e){var t=e.images,r=e.editMode,n=e.removeImage;return Object(m.jsx)("div",{className:"order__images-list",children:t&&t.map((function(e){return Object(m.jsxs)("div",{className:"order__image-wrapper",children:[r&&Object(m.jsx)(J.a,{type:"default",shape:"circle",icon:Object(m.jsx)(X.a,{}),size:"middle",className:"order__image-delete",onClick:function(){return n(e.id)}}),Object(m.jsx)(Z.a,{width:200,src:"".concat(W).concat(e.attachmentLink),className:"order__image"})]},String(e.id))}))})},Q=r(835),ee=function(e){var t=e.value,r=e.onChange,n=e.placeholder;return Object(m.jsxs)("div",{className:"filter",children:[Object(m.jsx)("div",{className:"filter__input",children:Object(m.jsx)(Q.a,{placeholder:n,value:t,onChange:r})}),Object(m.jsx)("div",{className:"filter__actions"})]})},te=r(18),re=r(488),ne=r(458),ae=r.n(ne),ce=r(459),oe=r.n(ce),se=r(827),ie=r(841),ue=["key","name","fieldKey"],le=L.a.Title,de=function(e){var t=e.onFinish,r=e.initialValues;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(le,{level:4,className:"title",children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b"}),Object(m.jsxs)(se.a,{name:"contacts-form",onFinish:t,autoComplete:"off",initialValues:r,children:[Object(m.jsx)(se.a.List,{name:"contacts",children:function(e,t){var r=t.add,n=t.remove;return Object(m.jsxs)(m.Fragment,{children:[e.map((function(e){var t=e.key,r=e.name,a=e.fieldKey,c=Object(re.a)(e,ue);return Object(m.jsxs)(ie.b,{style:{display:"flex"},align:"baseline",children:[Object(m.jsx)(se.a.Item,Object(te.a)(Object(te.a)({},c),{},{name:[r,"phoneNumber"],fieldKey:[a,"phoneNumber"],rules:[{required:!0,message:"\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c"},{max:12,message:"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0434\u043b\u0438\u043d\u0430 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430 12 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"}],children:Object(m.jsx)(Q.a,{placeholder:"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430"})})),Object(m.jsx)(ae.a,{onClick:function(){return n(r)}})]},t)})),Object(m.jsx)(se.a.Item,{children:Object(m.jsx)(J.a,{type:"dashed",onClick:function(){return r()},block:!0,icon:Object(m.jsx)(oe.a,{}),children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u044b"})})]})}}),Object(m.jsx)(se.a.Item,{children:Object(m.jsx)(J.a,{type:"dashed",htmlType:"submit",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u044b"})})]})]})},je=r(826),be=r(221),Oe=r(819),fe=r(837),pe=r(470),me=r(94),he=r.n(me),xe=r(61);!function(e){e.UNKNOWN="UNKNOWN",e.SUPPLIER="SUPPLIER",e.CUSTOMER="CUSTOMER"}(Y||(Y={})),function(e){e.NEW="NEW",e.REGISTERED="REGISTERED",e.BANNED="BANNED"}(K||(K={}));var ve,ge,Ne=function(e){return e.categories},Ee=function(e){return Ne(e).categories},Se=function(e){return Ne(e).errorMessage},Ce=function(e){return Ne(e).isLoadingCategories},ye=Object(xe.a)([Ee],(function(e){return null===e||void 0===e?void 0:e.filter((function(e){return 0===e.parentId&&!e.isDeleted}))})),_e=Object(xe.a)([Ee],(function(e){return null===e||void 0===e?void 0:e.filter((function(e){return 0!==e.parentId&&!e.isDeleted}))})),Re=function(e){var t;return null===(t=Ee(e))||void 0===t?void 0:t.filter((function(e){return e.isDeleted}))},Ie=function(e){return Ne(e).categoryInProcessEdit},Te=function(e){return Ne(e).categoriesActionStatus},Ae=Object(xe.a)([ye,_e],(function(e,t){return e&&t?e.map((function(e){var r=t.filter((function(t){return t.parentId===e.id})).map((function(e){return{title:e.name,value:e.id,key:e.id}}));return{title:e.name,value:e.id,key:e.id,children:r}})):[]})),we=function(e){return e.contractors},ke=function(e){return e.contractors.contractors},Me=function(e){return we(e).currentContractor},De=function(e,t,r){return Object(xe.a)([ke],(function(n){var a,c;return null===n||void 0===n||null===(a=n.filter((function(e){return"deleted"===t?e.isDeleted:"customers"===t?e.contractorType===Y.CUSTOMER:"supplier"!==t||e.contractorType===Y.SUPPLIER})))||void 0===a||null===(c=a.filter((function(t){return t.name.toLowerCase().includes(e.toLowerCase())})))||void 0===c?void 0:c.filter((function(e){return!r||Boolean(e.categories.find((function(e){return e.categoryId===Number(r)||e.parentId===Number(r)})))}))}))},Le=function(e){return we(e).contractorsLoading},Ue=function(e){return we(e).contractorsActionStatus},Ve=function(e){return we(e).errorMessage},Pe=Object(xe.a)([De("",null,null)],(function(e){return null===e||void 0===e?void 0:e.length})),Ge=Object(xe.a)([De("","customers",null)],(function(e){return null===e||void 0===e?void 0:e.length})),qe=Object(xe.a)([De("","supplier",null)],(function(e){return null===e||void 0===e?void 0:e.length})),Fe=Object(xe.a)([De("","deleted",null)],(function(e){return null===e||void 0===e?void 0:e.length})),Be=function(e){return we(e).contractorImages},He=function(e){return we(e).contractorImageUploading},ze=Object(xe.a)([ye,ke],(function(e,t){return e&&t?e.map((function(e){var r=t.filter((function(t){return!!t.categories.find((function(t){return t.categoryId===e.id}))}));return{categoryName:e.name,contractorsCount:r.length}})):[]})),We=function(e){return we(e).contractorAvatarUploading},Ye=function(e){return we(e).contractorAvatars},Ke=Object(xe.a)([ke],(function(e){if(e){var t=he()().startOf("day").valueOf(),r=he()().endOf("day").valueOf();return e.filter((function(e){return e.creationDate>t&&e.creationDate<r})).length}return 0})),Xe=L.a.Text,Je=function(e){var t=Math.PI/180,r=e.cx,n=e.cy,a=e.midAngle,c=e.innerRadius,o=e.outerRadius,s=e.startAngle,i=e.endAngle,u=e.fill,l=e.payload,d=e.percent,j=e.value,b=Math.sin(-t*a),O=Math.cos(-t*a),f=r+(o+10)*O,p=n+(o+10)*b,h=r+(o+30)*O,x=n+(o+30)*b,v=h+22*(O>=0?1:-1),g=x,N=O>=0?"start":"end";return Object(m.jsxs)("g",{children:[Object(m.jsx)("text",{x:r,y:n,dy:8,textAnchor:"middle",fill:u,children:l.name}),Object(m.jsx)(be.a,{cx:r,cy:n,innerRadius:c,outerRadius:o,startAngle:s,endAngle:i,fill:u}),Object(m.jsx)(be.a,{cx:r,cy:n,startAngle:s,endAngle:i,innerRadius:o+6,outerRadius:o+10,fill:u}),Object(m.jsx)("path",{d:"M".concat(f,",").concat(p,"L").concat(h,",").concat(x,"L").concat(v,",").concat(g),stroke:u,fill:"none"}),Object(m.jsx)("circle",{cx:v,cy:g,r:2,fill:u,stroke:"none"}),Object(m.jsx)("text",{x:v+12*(O>=0?1:-1),y:g,textAnchor:N,fill:"#333",children:"".concat(l.name," ").concat(j," \u0448\u0442")}),Object(m.jsx)("text",{x:v+12*(O>=0?1:-1),y:g,dy:18,textAnchor:N,fill:"#999",children:"".concat((100*d).toFixed(2),"%")})]})},Ze=function(){var e=c.a.useState(),t=Object(l.a)(e,2),r=t[0],n=t[1],a=Object(u.c)(Pe),o=Object(u.c)(Ge),s=Object(u.c)(qe),i=Object(u.c)(Fe),d=c.a.useMemo((function(){return[{name:"\u0417\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u043e\u0432",value:o||0},{name:"\u041f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a\u043e\u0432",value:s||0},{name:"\u0423\u0434\u0430\u043b\u0435\u043d\u043d\u044b\u0445",value:i||0}]}),[o,i,s]);return Object(m.jsxs)("div",{className:"statistic__pie",children:[Object(m.jsx)(Xe,{className:"statistic__title",children:"\u041a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u044b"}),Object(m.jsxs)(Xe,{className:"statistic__pie-subtitle",children:["\u0412\u0441\u0435\u0433\u043e \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u043e\u0432: ",a]}),d&&Object(m.jsx)(Oe.a,{children:Object(m.jsx)(fe.a,{width:400,height:400,children:Object(m.jsx)(pe.a,{activeIndex:r,activeShape:Je,data:d,cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,fill:"#8884d8",dataKey:"value",onMouseEnter:function(e,t){n(t)}})})})]})};!function(e){e.NEW="NEW",e.ARCHIVED="ARCHIVED",e.DELETED="DELETED"}(ve||(ve={})),function(e){e.SUCCESS="SUCCESS",e.FAIL="FAIL",e.NONE="NONE"}(ge||(ge={}));var $e=function(e){return e.orders},Qe=function(e){return e.orders.orders},et=function(e,t,r,n){return Object(xe.a)([Qe],(function(a){var c,o,s;return null===a||void 0===a||null===(c=a.filter((function(e){return"active"===t?e.orderStatus===ve.NEW:"deleted"===t?e.orderStatus===ve.DELETED:"archived"!==t||e.orderStatus===ve.ARCHIVED})))||void 0===c||null===(o=c.filter((function(t){return t.title.toLowerCase().includes(e.toLowerCase())})))||void 0===o||null===(s=o.filter((function(e){return!r||Boolean(e.categories.find((function(e){return e.categoryId===Number(r)||e.parentId===Number(r)})))})))||void 0===s?void 0:s.filter((function(e){return!n||e.customerId===Number(n)}))}))},tt=function(e){return $e(e).ordersLoading},rt=function(e){return $e(e).errorMessage},nt=function(e){return $e(e).orderActionStatus},at=function(e){return $e(e).currentOrder},ct=Object(xe.a)([et("",null,null,null)],(function(e){return null===e||void 0===e?void 0:e.length})),ot=Object(xe.a)([et("","active",null,null)],(function(e){return null===e||void 0===e?void 0:e.length})),st=Object(xe.a)([et("","deleted",null,null)],(function(e){return null===e||void 0===e?void 0:e.length})),it=Object(xe.a)([et("","archived",null,null)],(function(e){return null===e||void 0===e?void 0:e.length})),ut=Object(xe.a)([Qe],(function(e){if(e){var t=he()().startOf("day").valueOf(),r=he()().endOf("day").valueOf();return e.filter((function(e){return e.creationDate>t&&e.creationDate<r})).length}return 0})),lt=Object(xe.a)([Qe],(function(e){if(e){var t=he()().startOf("day").valueOf(),r=he()().endOf("day").valueOf();return e.filter((function(e){return e.actualDate>t&&e.actualDate<r})).length}return 0})),dt=Object(xe.a)([et("","deleted",null,null)],(function(e){return e?e.filter((function(e){return e.result===ge.SUCCESS})).length:0})),jt=Object(xe.a)([et("","deleted",null,null)],(function(e){return e?e.filter((function(e){return e.result===ge.FAIL})).length:0})),bt=Object(xe.a)([ye,Qe],(function(e,t){return e&&t?e.map((function(e){var r=t.filter((function(t){return!!t.categories.find((function(t){return t.categoryId===e.id}))}));return{categoryName:e.name,ordersCount:r.length}})):[]})),Ot=function(e){return $e(e).orderImages},ft=function(e){return $e(e).ordersLoading},pt=function(e){return $e(e).orderChats},mt=L.a.Text,ht=function(e){var t=Math.PI/180,r=e.cx,n=e.cy,a=e.midAngle,c=e.innerRadius,o=e.outerRadius,s=e.startAngle,i=e.endAngle,u=e.fill,l=e.payload,d=e.percent,j=e.value,b=Math.sin(-t*a),O=Math.cos(-t*a),f=r+(o+10)*O,p=n+(o+10)*b,h=r+(o+30)*O,x=n+(o+30)*b,v=h+22*(O>=0?1:-1),g=x,N=O>=0?"start":"end";return Object(m.jsxs)("g",{children:[Object(m.jsx)("text",{x:r,y:n,dy:8,textAnchor:"middle",fill:u,children:l.name}),Object(m.jsx)(be.a,{cx:r,cy:n,innerRadius:c,outerRadius:o,startAngle:s,endAngle:i,fill:u}),Object(m.jsx)(be.a,{cx:r,cy:n,startAngle:s,endAngle:i,innerRadius:o+6,outerRadius:o+10,fill:u}),Object(m.jsx)("path",{d:"M".concat(f,",").concat(p,"L").concat(h,",").concat(x,"L").concat(v,",").concat(g),stroke:u,fill:"none"}),Object(m.jsx)("circle",{cx:v,cy:g,r:2,fill:u,stroke:"none"}),Object(m.jsx)("text",{x:v+12*(O>=0?1:-1),y:g,textAnchor:N,fill:"#333",children:"".concat(l.name," ").concat(j," \u0448\u0442")}),Object(m.jsx)("text",{x:v+12*(O>=0?1:-1),y:g,dy:18,textAnchor:N,fill:"#999",children:"".concat((100*d).toFixed(2),"%")})]})},xt=function(){var e=c.a.useState(),t=Object(l.a)(e,2),r=t[0],n=t[1],a=Object(u.c)(ct),o=Object(u.c)(ot),s=Object(u.c)(st),i=Object(u.c)(it),d=c.a.useMemo((function(){return[{name:"\u0410\u043a\u0442\u0438\u0432\u043d\u044b\u0445",value:o||0},{name:"\u0410\u0440\u0445\u0438\u0432\u043d\u044b\u0445",value:i||0},{name:"\u0423\u0434\u0430\u043b\u0435\u043d\u043d\u044b\u0445",value:s||0}]}),[o,s,i]);return Object(m.jsxs)("div",{className:"statistic__pie",children:[Object(m.jsx)(mt,{className:"statistic__title",children:"\u0417\u0430\u044f\u0432\u043a\u0438"}),Object(m.jsxs)(mt,{className:"statistic__pie-subtitle",children:["\u0412\u0441\u0435\u0433\u043e \u0437\u0430\u044f\u0432\u043e\u043a: ",a]}),d&&Object(m.jsx)(Oe.a,{children:Object(m.jsx)(fe.a,{width:400,height:400,children:Object(m.jsx)(pe.a,{activeIndex:r,activeShape:ht,data:d,cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,fill:"#8884d8",dataKey:"value",onMouseEnter:function(e,t){n(t)}})})})]})},vt=r(829),gt=r(849),Nt=r(850),Et=r(106),St=r.n(Et),Ct=function(){var e=Object(u.c)(ut),t=Object(u.c)(lt),r=Object(u.c)(dt),n=Object(u.c)(jt),a=St()().xl;return Object(m.jsx)("div",{className:"statistic__counters",children:Object(m.jsxs)("div",{className:"counters",children:[Object(m.jsx)(je.a,{className:"counters__item",bodyStyle:{padding:a?20:10},children:Object(m.jsx)(vt.a,{title:"\u0417\u0430\u044f\u0432\u043e\u043a \u0441\u0435\u0433\u043e\u0434\u043d\u044f",value:e,prefix:Object(m.jsx)(gt.a,{}),valueStyle:{color:"#3f8600"}})}),Object(m.jsx)(je.a,{className:"counters__item",bodyStyle:{padding:a?20:10},children:Object(m.jsx)(vt.a,{title:"\u0421\u0435\u0433\u043e\u0434\u043d\u044f \u0437\u0430\u043a\u0440\u043e\u044e\u0442\u0441\u044f",value:t,prefix:Object(m.jsx)(Nt.a,{}),valueStyle:{color:"#cf1322"}})}),Object(m.jsx)(je.a,{className:"counters__item",bodyStyle:{padding:a?20:10},children:Object(m.jsx)(vt.a,{title:"\u0423\u0434\u0430\u043b\u043e\u0441\u044c \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c",value:r,prefix:Object(m.jsx)(gt.a,{}),valueStyle:{color:"#3f8600"}})}),Object(m.jsx)(je.a,{className:"counters__item",bodyStyle:{padding:a?20:10},children:Object(m.jsx)(vt.a,{title:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c",value:n,prefix:Object(m.jsx)(Nt.a,{}),valueStyle:{color:"#cf1322"}})})]})})},yt=r(820),_t=r(821),Rt=r(477),It=r(478),Tt=r(233),At=r(227),wt=r(491),kt=L.a.Text,Mt=function(e){var t=e.active,r=e.payload,n=e.label;return t&&r&&r.length?Object(m.jsx)("div",{className:"chart-categories__tooltip",children:Object(m.jsx)("p",{className:"chart-categories__tooltip-label",children:"".concat(n," : ").concat(r[0].value," \u0448\u0442")})}):null},Dt=function(){var e=Object(u.c)(bt);return Object(m.jsxs)("div",{className:"statistic__chart-categories chart-categories",children:[Object(m.jsx)(kt,{className:"statistic__title",children:"\u0417\u0430\u044f\u0432\u043a\u0438 \u043f\u043e \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f\u043c"}),Object(m.jsx)(Oe.a,{width:"100%",height:"100%",children:Object(m.jsxs)(yt.a,{width:500,height:300,data:e,margin:{top:5,right:30,left:20,bottom:5},children:[Object(m.jsx)(_t.a,{strokeDasharray:"3 3"}),Object(m.jsx)(Rt.a,{dataKey:"categoryName"}),Object(m.jsx)(It.a,{}),Object(m.jsx)(Tt.a,{content:Object(m.jsx)(Mt,{})}),Object(m.jsx)(At.a,{}),Object(m.jsx)(wt.a,{dataKey:"ordersCount",name:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438",barSize:20,fill:"#8884d8"})]})})]})},Lt=L.a.Text,Ut=function(e){var t=e.active,r=e.payload,n=e.label;return t&&r&&r.length?Object(m.jsx)("div",{className:"chart-categories__tooltip",children:Object(m.jsx)("p",{className:"chart-categories__tooltip-label",children:"".concat(n," : ").concat(r[0].value," \u0448\u0442")})}):null},Vt=function(){var e=Object(u.c)(ze);return Object(m.jsxs)("div",{className:"statistic__chart-categories",children:[Object(m.jsx)(Lt,{className:"statistic__title",children:"\u041a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u044b \u043f\u043e \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f\u043c"}),Object(m.jsx)(Oe.a,{width:"100%",height:"100%",children:Object(m.jsxs)(yt.a,{width:500,height:300,data:e,margin:{top:5,right:30,left:20,bottom:5},children:[Object(m.jsx)(_t.a,{strokeDasharray:"3 3"}),Object(m.jsx)(Rt.a,{dataKey:"categoryName"}),Object(m.jsx)(It.a,{}),Object(m.jsx)(Tt.a,{content:Object(m.jsx)(Ut,{})}),Object(m.jsx)(At.a,{}),Object(m.jsx)(wt.a,{dataKey:"contractorsCount",name:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438",barSize:20,fill:"#8884d8"})]})})]})},Pt=function(){var e=Object(u.c)(Ke),t=St()().xl;return Object(m.jsx)("div",{className:"statistic__counters",children:Object(m.jsx)("div",{className:"counters",children:Object(m.jsx)(je.a,{className:"counters__item",bodyStyle:{padding:t?20:10},children:Object(m.jsx)(vt.a,{title:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043b\u0438\u0441\u044c \u0441\u0435\u0433\u043e\u0434\u043d\u044f",value:e,prefix:Object(m.jsx)(gt.a,{}),valueStyle:{color:"#3f8600"}})})})})},Gt=r(8),qt=r.n(Gt),Ft=r(14),Bt={getContractors:function(){var e=Object(Ft.a)(qt.a.mark((function e(){var t,r;return qt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.a.get("contractors");case 2:return t=e.sent,r=t.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),createContractor:function(){var e=Object(Ft.a)(qt.a.mark((function e(t){var r,n;return qt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.a.post("/admins/contractors",t);case 2:return r=e.sent,n=r.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updateContractor:function(){var e=Object(Ft.a)(qt.a.mark((function e(t,r){var n,a;return qt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.a.patch("/contractors/".concat(r),t);case 2:return n=e.sent,a=n.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),deleteContractor:function(){var e=Object(Ft.a)(qt.a.mark((function e(t){var r,n;return qt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.a.delete("/contractors/".concat(t));case 2:return r=e.sent,n=r.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getContractorById:function(){var e=Object(Ft.a)(qt.a.mark((function e(t){var r,n;return qt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.a.get("/contractors/".concat(t));case 2:return r=e.sent,n=r.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),removeContractorAttachment:function(){var e=Object(Ft.a)(qt.a.mark((function e(t,r){var n,a;return qt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.a.delete("/contractors/".concat(t,"/attachments/").concat(r));case 2:return n=e.sent,a=n.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},Ht={addAttachment:function(){var e=Object(Ft.a)(qt.a.mark((function e(t){var r,n,a;return qt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new FormData).append("file",t),e.next=4,z.a.post("attachments",r);case 4:return n=e.sent,a=n.data,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),removeAttachment:function(){var e=Object(Ft.a)(qt.a.mark((function e(t){var r,n;return qt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.a.delete("attachments/".concat(t));case 2:return r=e.sent,n=r.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},zt=function(e){return{type:"SET_CURRENT_CONTRACTOR",payload:{currentContractor:e}}},Wt=function(e){return{type:"SET_CONTRACTORS_LOADING",payload:{contractorsLoading:e}}},Yt=function(e){return{type:"SET_CONTRACTORS_ACTION_STATUS",payload:{contractorsActionStatus:e}}},Kt=function(e){return{type:"SET_CONTRACTORS_ERROR_MESSAGE",payload:{errorMessage:e}}},Xt=function(e){return{type:"SET_CONTRACTORS",payload:{contractors:e}}},Jt=function(e){return{type:"REMOVE_CONTRACTOR",payload:{contractorId:e}}},Zt=function(e){return{type:"SET_CONTRACTOR_IMAGE_UPLOADING",payload:{contractorImageUploading:e}}},$t=function(e){return{type:"SET_CONTRACTOR_AVATAR_UPLOADING",payload:{contractorAvatarUploading:e}}},Qt=function(e){return{type:"SET_CONTRACTOR_IMAGES",payload:{images:e}}},er=function(e){return{type:"ADD_CONTRACTOR_IMAGE",payload:{images:e}}},tr=function(e){return{type:"ADD_CONTRACTOR_AVATARS",payload:{images:e}}},rr=function(e){return{type:"REMOVE_CONTRACTOR_IMAGE",payload:{imageId:e}}},nr=function(e){return{type:"REMOVE_CONTRACTOR_AVATAR",payload:{imageId:e}}},ar=function(){return{type:"CLEAR_CONTRACTOR_IMAGES"}},cr=function(e,t){t(Yt(n.ERROR)),t(Kt(e))},or=function(){return function(){var e=Object(Ft.a)(qt.a.mark((function e(t){var r;return qt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(Wt(!0)),e.next=4,Bt.getContractors();case 4:r=e.sent,t(Xt(r)),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("getContracors ===> ",e.t0),cr("\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0442\u0438, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437",t);case 12:return e.prev=12,t(Wt(!1)),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[0,8,12,15]])})));return function(t){return e.apply(this,arguments)}}()},sr=function(e){return function(){var t=Object(Ft.a)(qt.a.mark((function t(r){return qt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r(Wt(!0)),t.next=4,Bt.deleteContractor(e);case 4:t.sent?(r(Yt(n.SUCCESS)),r(Jt(e)),r(zt(null))):cr("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437",r),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.log("deleteContractor ===> ",t.t0),cr("\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0442\u0438, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437",r);case 12:return t.prev=12,r(Wt(!1)),t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[0,8,12,15]])})));return function(e){return t.apply(this,arguments)}}()},ir=function(e){return function(){var t=Object(Ft.a)(qt.a.mark((function t(r){var n;return qt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r(Zt(!0)),t.next=4,Ht.addAttachment(e);case 4:(n=t.sent).length>0?r(er(n)):cr("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0432\u043b\u043e\u0436\u0435\u043d\u0438\u0435, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437",r),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.log("addContractorImage ===> ",t.t0),cr("\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0442\u0438, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437",r);case 12:return t.prev=12,r(Zt(!1)),t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[0,8,12,15]])})));return function(e){return t.apply(this,arguments)}}()},ur=function(e){return function(){var t=Object(Ft.a)(qt.a.mark((function t(r){var n;return qt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r($t(!0)),t.next=4,Ht.addAttachment(e);case 4:(n=t.sent).length>0?r(tr(n)):cr("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0432\u043b\u043e\u0436\u0435\u043d\u0438\u0435, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437",r),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.log("addContractorImage ===> ",t.t0),cr("\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0442\u0438, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437",r);case 12:return t.prev=12,r($t(!1)),t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[0,8,12,15]])})));return function(e){return t.apply(this,arguments)}}()},lr={getOrders:function(){var e=Object(Ft.a)(qt.a.mark((function e(){var t,r;return qt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.a.get("orders");case 2:return t=e.sent,r=t.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),createOrder:function(){var e=Object(Ft.a)(qt.a.mark((function e(t){var r,n;return qt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.a.post("orders",t);case 2:return r=e.sent,n=r.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getOrderById:function(){var e=Object(Ft.a)(qt.a.mark((function e(t){var r,n;return qt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.a.get("/orders/".concat(t));case 2:return r=e.sent,n=r.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),deleteOrder:function(){var e=Object(Ft.a)(qt.a.mark((function e(t){var r,n;return qt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.a.delete("/orders/".concat(t));case 2:return r=e.sent,n=r.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updateOrder:function(){var e=Object(Ft.a)(qt.a.mark((function e(t,r){var n,a;return qt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.a.patch("/orders/".concat(r),t);case 2:return n=e.sent,a=n.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),removeOrderAttachment:function(){var e=Object(Ft.a)(qt.a.mark((function e(t,r){var n,a;return qt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.a.delete("/orders/".concat(t,"/attachments/").concat(r));case 2:return n=e.sent,a=n.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},dr={getOrderChats:function(){var e=Object(Ft.a)(qt.a.mark((function e(t){var r,n;return qt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.a.get("/chats/".concat(t));case 2:return r=e.sent,n=r.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getAllChatMessage:function(){var e=Object(Ft.a)(qt.a.mark((function e(t,r){var n,a;return qt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.a.get("chats/".concat(t,"/").concat(r));case 2:return n=e.sent,a=n.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},jr=function(e){return{type:"SET_ORDERS",payload:{orders:e}}},br=function(e){return{type:"SET_ORDERS_LOADING",payload:{ordersLoading:e}}},Or=function(e){return{type:"SET_ORDERS_ERROR",payload:{errorMessage:e}}},fr=function(e){return{type:"SET_ORDER_ACTION_STATUS",payload:{orderActionStatus:e}}},pr=function(e){return{type:"SET_CURRENT_ORDER",payload:{currentOrder:e}}},mr=function(e){return{type:"REMOVE_ORDER",payload:{id:e}}},hr=function(e){return{type:"ADD_NEW_ORDER",payload:{order:e}}},xr=function(e){return{type:"SET_ORDER_IMAGE_UPLOADING",payload:{orderImageUploading:e}}},vr=function(e){return{type:"ADD_ORDER_IMAGE",payload:{images:e}}},gr=function(e){return{type:"SET_ORDER_IMAGES",payload:{images:e}}},Nr=function(e){return{type:"REMOVE_ORDER_IMAGE",payload:{imageId:e}}},Er=function(){return{type:"CLEAR_ORDER_IMAGES"}},Sr=function(e){return{type:"SET_ORDER_CHATS",payload:{orderChats:e}}},Cr=function(e,t){t(fr(n.ERROR)),t(Or(e))},yr=function(){return function(){var e=Object(Ft.a)(qt.a.mark((function e(t){var r;return qt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(br(!0)),e.next=4,lr.getOrders();case 4:r=e.sent,t(jr(r)),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("getOrders ===> ",e.t0),Cr("\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0442\u0438, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437",t);case 12:return e.prev=12,t(br(!1)),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[0,8,12,15]])})));return function(t){return e.apply(this,arguments)}}()},_r=function(e){return function(){var t=Object(Ft.a)(qt.a.mark((function t(r){var a;return qt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,lr.createOrder(e);case 3:(a=t.sent).length>0?(r(fr(n.SUCCESS)),r(pr(a[0])),r(hr(a[0]))):Cr("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u0437\u0430\u044f\u0432\u043a\u0443, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437",r),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("createOrder ===> ",t.t0),Cr("\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0442\u0438, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437",r);case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},Rr=function(e){return function(){var t=Object(Ft.a)(qt.a.mark((function t(r){return qt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r(br(!0)),t.next=4,lr.deleteOrder(e);case 4:t.sent?(r(fr(n.SUCCESS)),r(mr(e)),r(pr(null))):Cr("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0437\u0430\u044f\u0432\u043a\u0443, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437",r),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.log("deleteOrder ===> ",t.t0),Cr("\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0442\u0438, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437",r);case 12:return t.prev=12,r(br(!1)),t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[0,8,12,15]])})));return function(e){return t.apply(this,arguments)}}()},Ir=function(e){return function(){var t=Object(Ft.a)(qt.a.mark((function t(r){var n;return qt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r(xr(!0)),t.next=4,Ht.addAttachment(e);case 4:(n=t.sent).length>0?r(vr(n)):Cr("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0432\u043b\u043e\u0436\u0435\u043d\u0438\u0435, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437",r),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.log("addOrderImage ===> ",t.t0),Cr("\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0442\u0438, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437",r);case 12:return t.prev=12,r(xr(!1)),t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[0,8,12,15]])})));return function(e){return t.apply(this,arguments)}}()},Tr=L.a.Title,Ar=d.a.Content,wr=function(){var e=Object(u.c)(Le),t=Object(u.b)();return c.a.useEffect((function(){t(or()),t(yr())}),[t]),e?Object(m.jsx)(I,{}):Object(m.jsx)(Ar,{className:"content",children:Object(m.jsxs)(je.a,{children:[Object(m.jsx)(Tr,{className:"title",children:"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430"}),Object(m.jsxs)("div",{className:"statistic",children:[Object(m.jsxs)("div",{className:"statistic__left-side",children:[Object(m.jsx)(xt,{}),Object(m.jsx)(Dt,{}),Object(m.jsx)(Ct,{})]}),Object(m.jsxs)("div",{className:"statistic__right-side",children:[Object(m.jsx)(Ze,{}),Object(m.jsx)(Vt,{}),Object(m.jsx)(Pt,{})]})]})]})})},kr=r(66),Mr=r(823),Dr=r(842),Lr=r(838),Ur=r(851),Vr=r(489);r(748);he.a.locale("ru");var Pr,Gr,qr,Fr=function(e){return he()(e).format("DD.MM.YYYY")},Br=function(e){return he()(e).format("DD.MM.YYYY hh:mm")},Hr=function(e,t){return e.length>t?e.substr(0,t-1)+"...":e},zr=d.a.Content,Wr=Mr.a.Column,Yr=function(e){return{compare:function(t,r){return t[e]-r[e]}}},Kr=function(e){return{compare:function(t,r){return t[e].localeCompare(r[e])}}},Xr=function(e){switch(e){case ge.FAIL:return"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c";case ge.SUCCESS:return"\u0423\u0434\u0430\u043b\u043e\u0441\u044c \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c";default:return"\u041d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d\u043e"}},Jr=function(){var e=c.a.useState(""),t=Object(l.a)(e,2),r=t[0],a=t[1],o=new URLSearchParams(Object(f.h)().search),s=St()().xxl,i=Object(u.c)(et(r,o.get("filter"),o.get("category"),o.get("contractor"))),d=Object(u.c)(tt),j=Object(u.c)(rt),b=Object(u.c)(nt),O=Object(u.b)(),p=Object(f.g)(),h=c.a.useCallback((function(){O(fr(n.NEVER)),O(Or(null))}),[O]),x=c.a.useCallback((function(){O(yr())}),[O]);c.a.useEffect((function(){return O(yr()),function(){h()}}),[O,h]);var v=function(e){p.push("/orders/".concat(e.id))};return d?Object(m.jsx)(I,{size:"large"}):Object(m.jsxs)(zr,{className:"content",children:[Object(m.jsx)(k,{onClose:h,errorMessage:j,successMessage:"\u0417\u0430\u044f\u0432\u043a\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0435\u043d\u0430",status:b}),Object(m.jsxs)("div",{className:"orders__header",children:[Object(m.jsx)(ee,{value:r,onChange:function(e){a(e.currentTarget.value)},placeholder:"\u041d\u0430\u0439\u0442\u0438 \u043f\u043e \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0443"}),Object(m.jsx)(J.a,{type:"primary",icon:Object(m.jsx)(Ur.a,{}),size:"large",onClick:x})]}),Object(m.jsxs)(Mr.a,{pagination:{position:["topRight","bottomRight"]},showSorterTooltip:!1,dataSource:i,rowKey:"id",size:s?"middle":"small",expandable:{expandedRowRender:function(e){return Object(m.jsxs)("div",{className:"order__expanded",children:[Object(m.jsx)("p",{className:"order__tab-descr table-value",children:e.description}),Object(m.jsxs)("div",{className:"order__expanded-action",children:[Object(m.jsx)(J.a,{className:"order__expanded-btn table-value",onClick:function(){return v(e)},children:"\u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c"}),Object(m.jsx)(J.a,{className:"order__expanded-btn table-value",onClick:function(){return t=e.id,void(window.confirm("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0437\u0430\u044f\u0432\u043a\u0443?")&&O(Rr(t)));var t},danger:!0,children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]})]})}},children:[Object(m.jsx)(Wr,{title:"\u0421\u0442\u0430\u0442\u0443\u0441",dataIndex:"orderStatus",render:function(e){var t,r=(t={},Object(kr.a)(t,ve.NEW,"green"),Object(kr.a)(t,ve.ARCHIVED,"geekblue"),Object(kr.a)(t,ve.DELETED,"volcano"),t);return Object(m.jsx)(Dr.a,{color:r[e],className:"table-tag",children:e},e)},sorter:Kr("orderStatus")},"age"),Object(m.jsx)(Wr,{title:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a",render:function(e,t){return Object(m.jsx)(ie.b,{size:"middle",children:Object(m.jsx)(J.a,{onClick:function(){return v(t)},type:"link",className:"table-value",children:Hr(t.title,40)},"title")})},sorter:Kr("title")},"title"),Object(m.jsx)(Wr,{title:"\u0414\u0430\u0442\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f",dataIndex:"creationDate",render:function(e,t){return Fr(t.creationDate)},defaultSortOrder:"descend",sorter:Yr("creationDate"),className:"table-value"},"creationDate"),Object(m.jsx)(Wr,{title:"\u0414\u0430\u0442\u0430 \u0437\u0430\u043a\u0440\u044b\u0442\u0438\u044f",dataIndex:"actualDate",render:function(e,t){return Fr(t.actualDate)},sorter:Yr("actualDate"),className:"table-value"},"actualDate"),Object(m.jsx)(Wr,{title:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438",dataIndex:"categories",render:function(e,t){return Object(m.jsx)(m.Fragment,{children:t.categories.filter((function(e){return 0===e.parentId})).map((function(e){return Object(m.jsx)(J.a,{onClick:function(){return t=e.categoryId,void p.push({pathname:"/orders",search:"?category=".concat(t)});var t},type:"link",children:Object(m.jsx)(Dr.a,{color:"blue",className:"order__tag table-tag",children:e.categoryName})},e.categoryId)}))})}},"categories"),Object(m.jsx)(Wr,{title:"\u0426\u0435\u043d\u0430 (\u0442\u0433)",dataIndex:"totalSum",sorter:Yr("totalSum"),className:"table-value"},"totalSum"),Object(m.jsx)(Wr,{title:"\u0421\u0440\u043e\u043a\u0438",dataIndex:"comment",className:"table-value"},"comment"),Object(m.jsx)(Wr,{title:"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442",dataIndex:"results",sorter:Kr("result"),render:function(e,t){var r,n=(r={},Object(kr.a)(r,ge.NONE,"geekblue"),Object(kr.a)(r,ge.SUCCESS,"green"),Object(kr.a)(r,ge.FAIL,"volcano"),r);return Object(m.jsx)(Dr.a,{color:n[t.result],className:"order__tag table-tag",children:Xr(t.result)})}},"results")]}),Object(m.jsx)(Lr.a,{})]})},Zr=r(824),$r=r(36),Qr=r(81),en=r(43),tn=150,rn=5e3,nn=50,an=["700","701","702","703","704","705","706","707","708","709","747","750","751","760","761","762","763","764","771","775","776","777","778"],cn=en.c().shape({title:en.e().max(tn,"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0434\u043b\u0438\u043d\u0430 ".concat(tn," \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432")).required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"),totalSum:en.a().test("Ok","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u0443\u044e \u0446\u0435\u043d\u0443",(function(e){return!e||!isNaN(e)})),comment:en.e(),description:en.e().typeError("\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u043c \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0442\u0435\u043a\u0441\u0442").max(rn)}),on=en.c().shape({name:en.e().max(tn,"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0434\u043b\u0438\u043d\u0430 ".concat(tn," \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432")).required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"),location:en.e().max(nn,"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0434\u043b\u0438\u043d\u0430 ".concat(nn," \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432")).required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"),phoneNumber:en.b().typeError("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 \u043d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430").min(11,"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 \u043d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430").required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435").test("Ok","\u0412\u0432\u0435\u0434\u0435\u043d\u043d\u044b\u0439 \u043d\u043e\u043c\u0435\u0440 \u043d\u0435 \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u043e\u043c \u0441\u043e\u0442\u043e\u0432\u044b\u0445 \u043e\u043f\u0435\u0440\u0430\u0442\u043e\u0440\u043e\u0432 \u0420\u041a!",(function(e){var t=String(e).slice(-10).slice(0,3);return!!an.includes(t)})),description:en.e().typeError("\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u043c \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0442\u0435\u043a\u0441\u0442").max(rn,"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0434\u043b\u0438\u043d\u0430 ".concat(rn," \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432")),address:en.e().max(250,"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0434\u043b\u0438\u043d\u0430 ".concat(250," \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432")).required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"),contactName:en.e().max(tn,"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0434\u043b\u0438\u043d\u0430 ".concat(tn," \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432")).required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"),webSite:en.e().max(nn,"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0434\u043b\u0438\u043d\u0430 ".concat(nn," \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432")),eMail:en.e().max(nn,"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0434\u043b\u0438\u043d\u0430 ".concat(nn," \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432")).email("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 e-mail")}),sn=(en.c().shape({phoneNumber:en.b().typeError("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 \u043d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430").min(11,"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 \u043d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430").required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"),otp:en.e().required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435").matches(/^[0-9]+$/,"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 \u0421\u041c\u0421-\u043a\u043e\u0434").min(4,"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 \u0421\u041c\u0421-\u043a\u043e\u0434").max(4,"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 \u0421\u041c\u0421-\u043a\u043e\u0434")}),en.c().shape({name:en.e().max(tn,"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0434\u043b\u0438\u043d\u0430 ".concat(tn," \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432")).required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"),location:en.e().max(nn,"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0434\u043b\u0438\u043d\u0430 ".concat(nn," \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432")).required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"),contactName:en.e().max(nn,"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0434\u043b\u0438\u043d\u0430 ".concat(nn," \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432")).required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"),phoneNumber:en.b().typeError("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 \u043d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430").min(11,"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 \u043d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430").required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435").test("Ok","\u0412\u0432\u0435\u0434\u0435\u043d\u043d\u044b\u0439 \u043d\u043e\u043c\u0435\u0440 \u043d\u0435 \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u043e\u043c \u0441\u043e\u0442\u043e\u0432\u044b\u0445 \u043e\u043f\u0435\u0440\u0430\u0442\u043e\u0440\u043e\u0432 \u0420\u041a!",(function(e){var t=String(e).slice(-10).slice(0,3);return!!an.includes(t)}))})),un=en.c().shape({phoneNumber:en.b().typeError("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 \u043d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430").min(11,"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 \u043d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430").required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435").test("Ok","\u0412\u0432\u0435\u0434\u0435\u043d\u043d\u044b\u0439 \u043d\u043e\u043c\u0435\u0440 \u043d\u0435 \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u043e\u043c \u0441\u043e\u0442\u043e\u0432\u044b\u0445 \u043e\u043f\u0435\u0440\u0430\u0442\u043e\u0440\u043e\u0432 \u0420\u041a!",(function(e){var t=String(e).slice(-10).slice(0,3);return!!an.includes(t)})),password:en.e().min(5,"\u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0434\u043b\u0438\u043d\u0430 5 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432").required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"),confirm:en.e().oneOf([en.d("password")],"\u041f\u0430\u0440\u043e\u043b\u0438 \u043d\u0435 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u044e\u0442").required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435")}),ln=en.c().shape({phoneNumber:en.b().typeError("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 \u043d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430").min(11,"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 \u043d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430").required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"),password:en.e().required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435")}),dn=en.c().shape({password:en.e().min(5,"\u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0434\u043b\u0438\u043d\u0430 5 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432").required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"),confirm:en.e().oneOf([en.d("password")],"\u041f\u0430\u0440\u043e\u043b\u0438 \u043d\u0435 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u044e\u0442").required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435")}),jn=en.c().shape({name:en.e().max(tn,"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0434\u043b\u0438\u043d\u0430 ".concat(tn," \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432")).required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"),parentId:en.b().typeError("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 \u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440").required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435")}),bn={getAllCategories:function(){var e=Object(Ft.a)(qt.a.mark((function e(){var t,r;return qt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.a.get("categories");case 2:return t=e.sent,r=t.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),deleteAllCategories:function(){var e=Object(Ft.a)(qt.a.mark((function e(){var t,r;return qt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.a.delete("categories");case 2:return t=e.sent,r=t.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),addCategory:function(){var e=Object(Ft.a)(qt.a.mark((function e(t){var r,n;return qt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.a.post("categories",t);case 2:return r=e.sent,n=r.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getCategoryById:function(){var e=Object(Ft.a)(qt.a.mark((function e(t){var r,n;return qt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.a.get("categories/".concat(t));case 2:return r=e.sent,n=r.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),deleteCategoryById:function(){var e=Object(Ft.a)(qt.a.mark((function e(t){var r,n;return qt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.a.delete("categories/".concat(t));case 2:return r=e.sent,n=r.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updateCategoryById:function(){var e=Object(Ft.a)(qt.a.mark((function e(t){var r,n;return qt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.a.patch("categories/".concat(t.id),t);case 2:return r=e.sent,n=r.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},On=function(e){return{type:"SET_CATEGORIES",payload:{categories:e}}},fn=function(e){return{type:"SET_IS_LOADING_CATEGORIES",payload:{isLoadingCategories:e}}},pn=function(e){return{type:"SET_CATEGORIES_ERROR_MESSAGE",payload:{errorMessage:e}}},mn=function(e){return{type:"SET_CATEGORIES_ACTION_STATUS",payload:{categoriesActionStatus:e}}},hn=function(e){return{type:"SET_CATEGORY_IN_EDIT_PROCESS",payload:{categoryInProcessEdit:e}}},xn=function(e){return{type:"REPLACE_CATEGORY",payload:{category:e}}},vn=function(e){return{type:"REMOVE_CATEGORY",payload:{id:e}}},gn=function(e){return{type:"ADD_NEW_CATEGORY",payload:{category:e}}},Nn=function(e,t){t(mn(n.ERROR)),t(pn(e))},En=function(e){return function(){var t=Object(Ft.a)(qt.a.mark((function t(r){return qt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r(hn(e.id)),t.next=4,bn.updateCategoryById(e);case 4:t.sent?(r(mn(n.SUCCESS)),r(xn(e))):Nn("\u041d\u0435 \u043f\u043e\u043b\u0443\u0447\u0438\u043b\u043e\u0441\u044c \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044e, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437",r),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.log("updateCategoryById...",t.t0),Nn("\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0442\u0438, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437",r);case 12:return t.prev=12,r(hn(null)),t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[0,8,12,15]])})));return function(e){return t.apply(this,arguments)}}()},Sn=r(830),Cn=L.a.Text,yn=function(e){var t=e.control,r=e.errors;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)($r.a,{control:t,rules:{required:!0},render:function(e){var t,n=e.field,a=n.onChange,c=n.value;return Object(m.jsxs)(se.a.Item,{validateStatus:r.title?"error":"success",help:null===(t=r.title)||void 0===t?void 0:t.message,className:"input order__title-input",required:!0,children:[Object(m.jsx)(Cn,{className:"subtitle",children:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a"}),Object(m.jsx)(Q.a,{placeholder:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a \u0437\u0430\u044f\u0432\u043a\u0438",value:c,onChange:a})]})},name:"title",defaultValue:""}),Object(m.jsxs)("div",{className:"order__numeric-fields",children:[Object(m.jsx)($r.a,{control:t,rules:{required:!0},render:function(e){var t,n=e.field,a=n.onChange,c=n.value;return Object(m.jsxs)(se.a.Item,{validateStatus:r.comment?"error":"success",help:null===(t=r.comment)||void 0===t?void 0:t.message,className:"order__comment-input input",required:!0,children:[Object(m.jsx)(Cn,{className:"subtitle",children:"\u0421\u0440\u043e\u043a\u0438"}),Object(m.jsx)(Q.a,{placeholder:"\u0416\u0435\u043b\u0430\u0435\u043c\u044b\u0435 \u0441\u0440\u043e\u043a\u0438",value:c,onChange:a})]})},name:"comment",defaultValue:""}),Object(m.jsx)($r.a,{control:t,rules:{required:!0},render:function(e){var t,n=e.field,a=n.onChange,c=n.value;return Object(m.jsx)(se.a.Item,{validateStatus:r.totalSum?"error":"success",help:null===(t=r.totalSum)||void 0===t?void 0:t.message,className:"input order__totalsum-input",required:!0,children:Object(m.jsxs)("div",{className:"order__totalsum-field",children:[Object(m.jsx)(Cn,{className:"subtitle",children:"\u0426\u0435\u043d\u0430 (\u0442\u0433)"}),Object(m.jsx)(Sn.a,{value:c,onChange:a})]})})},name:"totalSum",defaultValue:0})]}),Object(m.jsx)($r.a,{control:t,rules:{required:!1},render:function(e){var t,n=e.field,a=n.onChange,c=n.value;return Object(m.jsxs)(se.a.Item,{validateStatus:r.description?"error":"success",help:null===(t=r.description)||void 0===t?void 0:t.message,className:"input order__descr-input",required:!0,children:[Object(m.jsx)(Cn,{className:"subtitle",children:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"}),Object(m.jsx)(Q.a.TextArea,{placeholder:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",value:c,onChange:a})]})},name:"description",defaultValue:""})]})},_n=c.a.memo(yn),Rn=d.a.Content,In=L.a.Title,Tn=Zr.a.SHOW_ALL,An=D.a.Option,wn=function(){var e=Object($r.e)({resolver:Object(Qr.a)(cn)}),t=e.control,r=e.reset,a=e.handleSubmit,o=e.formState.errors,s=c.a.useState([]),i=Object(l.a)(s,2),d=i[0],j=i[1],b=c.a.useState(null),O=Object(l.a)(b,2),p=O[0],h=O[1],x=Object(u.c)(nt),v=Object(u.c)(rt),g=Object(u.c)(tt),N=Object(u.c)(at),E=Object(u.c)(Ot),S=Object(u.c)(ft),C=Object(u.c)(Ae),y=Object(u.c)(Se),_=Object(u.c)(Te),R=Object(u.c)(ke),T=Object(u.c)(Le),w=Object(u.b)(),M=Object(f.g)(),L=c.a.useCallback((function(){w(fr(n.NEVER)),w(Or(null)),w(Er())}),[w]),U=c.a.useCallback((function(){w(mn(n.NEVER)),w(pn(null))}),[w]);c.a.useEffect((function(){return function(){L(),U()}}),[U,L]),c.a.useEffect((function(){R||w(or())}),[R,w]),c.a.useEffect((function(){N&&x===n.SUCCESS&&M.push("/orders/".concat(N.id))}),[N,M,x]);var V=function(){var e=Object(Ft.a)(qt.a.mark((function e(t){var r,n,a;return qt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.currentTarget,!(a=null===(r=n.files)||void 0===r?void 0:r[0])){e.next=8;break}if("image/png"===a.type||"image/jpeg"===a.type||"image/jpg"===a.type){e.next=7;break}return e.abrupt("return",Vr.b.error("".concat(a.name," \u043d\u0435 \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u043e\u0439")));case 7:w(Ir(a));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=a((function(e){var t=d.map((function(e){return{categoryId:e}}));if(p){var n={title:e.title,description:e.description,comment:e.comment,totalSum:e.totalSum,contractors:[],attachments:E.map((function(e){return{attachmentId:e.id}})),customerId:p,categories:t};w(_r(n)),r()}})),G=c.a.useMemo((function(){return null===R||void 0===R?void 0:R.filter((function(e){return e.contractorType===Y.SUPPLIER}))}),[R]);return g?Object(m.jsx)(I,{}):Object(m.jsxs)(Rn,{className:"content",children:[Object(m.jsx)(k,{onClose:L,errorMessage:v,successMessage:"\u0417\u0430\u044f\u0432\u043a\u0430 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0430",status:x}),Object(m.jsx)(k,{onClose:U,errorMessage:y,status:_}),Object(m.jsxs)(je.a,{className:"form",children:[Object(m.jsx)(In,{level:3,className:"title",children:"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0437\u0430\u044f\u0432\u043a\u0438"}),Object(m.jsx)(_n,{control:t,errors:o}),Object(m.jsx)(Zr.a,{treeData:C,value:d,onChange:function(e){j(e)},treeCheckable:!0,showCheckedStrategy:Tn,placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438 \u0437\u0430\u044f\u0432\u043a\u0438",style:{width:"100%",marginBottom:10},maxTagCount:5}),Object(m.jsx)(D.a,{showSearch:!0,style:{width:"100%",marginBottom:10},placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0430\u0432\u0442\u043e\u0440\u0430 \u0437\u0430\u044f\u0432\u043a\u0438",optionFilterProp:"children",filterOption:function(e,t){return(null===t||void 0===t?void 0:t.children.toLowerCase().indexOf(e.toLowerCase()))>=0},filterSort:function(e,t){return e.children.toLowerCase().localeCompare(t.children.toLowerCase())},onChange:function(e){return h(Number(e))},loading:T,children:G&&G.map((function(e){return Object(m.jsx)(An,{value:e.id,children:e.name},e.id)}))}),Object(m.jsx)($,{removeImage:function(e){w(function(e){return function(){var t=Object(Ft.a)(qt.a.mark((function t(r){return qt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r(xr(!0)),t.next=4,Ht.removeAttachment(e);case 4:t.sent?r(Nr(e)):Cr("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0432\u043b\u043e\u0436\u0435\u043d\u0438\u0435, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437",r),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.log("getFullOrderInfo ===> ",t.t0),Cr("\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0442\u0438, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437",r);case 12:return t.prev=12,r(xr(!1)),t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[0,8,12,15]])})));return function(e){return t.apply(this,arguments)}}()}(e))},images:E,editMode:!0}),Object(m.jsx)(A,{onChange:V,isUploading:S,buttonText:"\u0424\u043e\u0442\u043e"}),Object(m.jsx)(J.a,{className:"order__save-btn",onClick:P,disabled:Object.keys(o).length>0||0===d.length||!p,children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})]})},kn=r(831),Mn=L.a.Text,Dn=function(e){var t=e.placeholder,r=e.editMode,n=e.fieldName,a=e.control,c=e.error,o=e.defaultValue,s=e.isTextArea,i=void 0!==s&&s,u=e.isNumberInput,l=void 0!==u&&u;return r?Object(m.jsx)($r.a,{control:a,rules:{required:!0},render:function(e){var r=e.field,n=r.onChange,a=r.value;return Object(m.jsx)(se.a.Item,{validateStatus:c?"error":"success",help:null===c||void 0===c?void 0:c.message,className:"input",children:i?Object(m.jsx)(Q.a.TextArea,{placeholder:t,value:a,onChange:n}):l?Object(m.jsx)(Sn.a,{placeholder:t,value:a,onChange:n}):Object(m.jsx)(Q.a,{placeholder:t,value:a,onChange:n})})},name:n,defaultValue:o}):Object(m.jsx)(Mn,{children:o})},Ln=r(822),Un=Zr.a.SHOW_ALL,Vn=function(e){var t=e.categoriesTree,r=e.selectedCategories,n=e.handleSelectCategories,a=e.handleRemoveImage,c=e.handleAddImage,o=e.editMode,s=e.defaultValue,i=e.error,u=e.images,l=e.control,d=e.imageUploading;return Object(m.jsx)("div",{className:"order__body",children:Object(m.jsxs)(je.a,{children:[Object(m.jsx)(Ln.a,{children:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"}),Object(m.jsx)(Dn,{defaultValue:s,editMode:o,control:l,error:i,fieldName:"description",placeholder:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",isTextArea:!0}),Object(m.jsx)(Ln.a,{children:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438"}),t&&Object(m.jsx)(Zr.a,{treeData:t,value:r,onChange:n,treeCheckable:!0,showCheckedStrategy:Un,placeholder:o?"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438 \u0437\u0430\u044f\u0432\u043a\u0438":"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438",style:{width:"100%",marginBottom:10},disabled:!o}),Object(m.jsx)(Ln.a,{children:"\u0424\u043e\u0442\u043e"}),Object(m.jsxs)("div",{className:"order__images",children:[Object(m.jsx)($,{removeImage:a,images:u,editMode:o}),o&&Object(m.jsx)(A,{onChange:c,isUploading:d,buttonText:"\u0424\u043e\u0442\u043e"})]})]})})},Pn=c.a.memo(Vn),Gn=r(836),qn=function(e){var t=e.order,r=e.editMode,n=e.errors,a=e.control;return Object(m.jsxs)(Gn.b,{size:"small",column:3,labelStyle:{fontWeight:"bold"},children:[Object(m.jsx)(Gn.b.Item,{label:"\u0414\u0430\u0442\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f",children:Fr(t.creationDate)}),Object(m.jsx)(Gn.b.Item,{label:"\u0410\u0432\u0442\u043e\u0440",children:Object(m.jsx)(i.b,{to:"/contractors/".concat(t.customerId),children:"\u0417\u0430\u043a\u0430\u0437\u0447\u0438\u043a"})}),Object(m.jsx)(Gn.b.Item,{label:"\u0421\u0440\u043e\u043a\u0438",children:Object(m.jsx)(Dn,{defaultValue:t.comment,editMode:r,control:a,error:n.title,fieldName:"comment",placeholder:"\u0421\u0440\u043e\u043a\u0438"})}),Object(m.jsx)(Gn.b.Item,{label:"\u0414\u0430\u0442\u0430 \u0437\u0430\u043a\u0440\u044b\u0442\u0438\u044f",children:Fr(t.actualDate)}),Object(m.jsx)(Gn.b.Item,{label:"\u0427\u0430\u0442\u044b",children:Object(m.jsx)(i.b,{to:"/orders/".concat(t.id,"/chats"),children:"\u0427\u0430\u0442\u044b"})}),Object(m.jsx)(Gn.b.Item,{label:"\u0426\u0435\u043d\u0430 (\u0442\u0433)",children:Object(m.jsx)(Dn,{isNumberInput:!0,defaultValue:t.totalSum,editMode:r,control:a,error:n.totalSum,fieldName:"totalSum",placeholder:"\u0426\u0435\u043d\u0430"})}),Object(m.jsx)(Gn.b.Item,{label:"\u041d\u043e\u043c\u0435\u0440 \u0437\u0430\u044f\u0432\u043a\u0438",children:t.id})]})},Fn=d.a.Content,Bn=function(){var e=c.a.useState(!1),t=Object(l.a)(e,2),r=t[0],a=t[1],o=Object($r.e)({resolver:Object(Qr.a)(cn)}),s=o.control,i=o.handleSubmit,d=o.formState.errors,j=o.reset,b=c.a.useState([]),O=Object(l.a)(b,2),p=O[0],h=O[1],x=Object(u.c)(at),v=Object(u.c)(nt),g=Object(u.c)(rt),N=Object(u.c)(tt),E=Object(u.c)(Ot),S=Object(u.c)(ft),C=Object(u.c)(Ae),y=Object(f.i)().orderId,_=Object(u.b)(),R=Object(f.g)(),T=c.a.useCallback((function(){_(fr(n.NEVER)),_(pr(null)),_(Er())}),[_]),A=function(){a((function(e){return _(fr(n.NEVER)),!e}))};c.a.useEffect((function(){var e;return _((e=Number(y),function(){var t=Object(Ft.a)(qt.a.mark((function t(r){var n;return qt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r(br(!0)),t.next=4,lr.getOrderById(e);case 4:0===(n=t.sent).length?Cr("\u0417\u0430\u044f\u0432\u043a\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430",r):r(pr(n[0])),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.log("getFullOrderInfo ===> ",t.t0),Cr("\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0442\u0438, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437",r);case 12:return t.prev=12,r(br(!1)),t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[0,8,12,15]])})));return function(e){return t.apply(this,arguments)}}())),function(){T()}}),[T,_,y]),c.a.useEffect((function(){var e;x&&(h(null===(e=x.categories)||void 0===e?void 0:e.map((function(e){return e.categoryId}))),_(gr(x.attachments)))}),[x,_]),c.a.useEffect((function(){x||v!==n.SUCCESS||R.push("/orders")}),[R,x,v]);var w=i((function(e){if(x){var t=p.map((function(e){return{categoryId:e}})),r=Object(te.a)(Object(te.a)({},x),{},{title:e.title,description:e.description,totalSum:e.totalSum,comment:e.comment,contractors:x.contractors,attachments:E.map((function(e){return{attachmentId:e.id}})),customerId:1,categories:t});a(!1),_(function(e,t){return function(){var r=Object(Ft.a)(qt.a.mark((function r(a){var c;return qt.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,a(br(!0)),r.next=4,lr.updateOrder(e,t);case 4:(c=r.sent).length>0?(a(fr(n.SUCCESS)),a(Er()),a(pr(c[0]))):Cr("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437",a),r.next=12;break;case 8:r.prev=8,r.t0=r.catch(0),console.log("updateOrder ===> ",r.t0),Cr("\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0442\u0438, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437",a);case 12:return r.prev=12,a(br(!1)),r.finish(12);case 15:case"end":return r.stop()}}),r,null,[[0,8,12,15]])})));return function(e){return r.apply(this,arguments)}}()}(r,x.id))}})),M=c.a.useCallback((function(e){h(e)}),[]),D=function(){var e=Object(Ft.a)(qt.a.mark((function e(t){var r,n,a;return qt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.currentTarget,!(a=null===(r=n.files)||void 0===r?void 0:r[0])){e.next=8;break}if("image/png"===a.type||"image/jpeg"===a.type||"image/jpg"===a.type){e.next=7;break}return e.abrupt("return",Vr.b.error("".concat(a.name," \u043d\u0435 \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u043e\u0439")));case 7:_(Ir(a));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=[Object(m.jsx)(J.a,{onClick:w,disabled:0!==Object.keys(d).length||0===p.length,children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"},"1"),Object(m.jsx)(J.a,{onClick:function(){var e;(A(),x)&&(h(null===(e=x.categories)||void 0===e?void 0:e.map((function(e){return e.categoryId}))),_(Er()),_(gr(x.attachments)),j({title:x.title,description:x.description,comment:x.comment,totalSum:x.totalSum}))},danger:!0,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"},"2")],U=[(null===x||void 0===x?void 0:x.orderStatus)===ve.NEW&&Object(m.jsx)(J.a,{onClick:A,children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"},"3"),("ARCHIVED"===(null===x||void 0===x?void 0:x.orderStatus)||"DELETED"===(null===x||void 0===x?void 0:x.orderStatus))&&Object(m.jsx)(J.a,{onClick:function(){if(window.confirm("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u043f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u044c \u0437\u0430\u044f\u0432\u043a\u0443?")&&x){var e={title:x.title,comment:x.comment,totalSum:x.totalSum,contractors:[],customerId:x.customerId,description:x.description,attachments:x.attachments.map((function(e){return{attachmentId:e.id}})),categories:x.categories.map((function(e){return{categoryId:Number(e.categoryId)}})),orderStatus:ve.NEW};_(_r(e))}},children:"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u044c"},"4"),Object(m.jsx)(J.a,{onClick:function(){window.confirm("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0437\u0430\u044f\u0432\u043a\u0443?")&&x&&_(Rr(x.id))},danger:!0,children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"},"5")];return N?Object(m.jsx)(I,{}):Object(m.jsxs)(Fn,{className:"content",children:[Object(m.jsx)(k,{onClose:function(){return _(fr(n.NEVER))},errorMessage:g,status:v,successMessage:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b"}),x&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:"page-header",children:Object(m.jsx)(kn.a,{ghost:!1,onBack:function(){return window.history.back()},title:Object(m.jsx)(Dn,{defaultValue:x.title,editMode:r,control:s,error:d.title,fieldName:"title",placeholder:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a"}),extra:r?L:U,children:Object(m.jsx)(qn,{order:x,editMode:r,errors:d,control:s})})}),Object(m.jsx)(Pn,{categoriesTree:C,selectedCategories:p,handleSelectCategories:M,handleRemoveImage:function(e){x&&_(function(e,t){return function(){var r=Object(Ft.a)(qt.a.mark((function r(n){return qt.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,n(xr(!0)),r.next=4,lr.removeOrderAttachment(e,t);case 4:r.sent?n(Nr(t)):Cr("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0432\u043b\u043e\u0436\u0435\u043d\u0438\u0435, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437",n),r.next=12;break;case 8:r.prev=8,r.t0=r.catch(0),console.log("getFullOrderInfo ===> ",r.t0),Cr("\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0442\u0438, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437",n);case 12:return r.prev=12,n(xr(!1)),r.finish(12);case 15:case"end":return r.stop()}}),r,null,[[0,8,12,15]])})));return function(e){return r.apply(this,arguments)}}()}(x.id,e))},handleAddImage:D,editMode:r,defaultValue:x.description,error:d.description,images:E,control:s,imageUploading:S})]})]})},Hn=d.a.Content,zn=Mr.a.Column,Wn=L.a.Text,Yn=function(e){return{compare:function(t,r){return t[e]-r[e]}}},Kn=function(e){return{compare:function(t,r){return t[e].localeCompare(r[e])}}},Xn=function(){var e=c.a.useState(""),t=Object(l.a)(e,2),r=t[0],a=t[1],o=new URLSearchParams(Object(f.h)().search),s=Object(u.c)(Ve),d=Object(u.c)(Ue),j=Object(u.c)(Le),b=Object(u.c)(De(r,o.get("filter"),o.get("category"))),O=Object(u.b)(),p=Object(f.g)(),h=St()().xxl,x=c.a.useCallback((function(){O(Yt(n.NEVER)),O(Kt(null))}),[O]),v=c.a.useCallback((function(){O(or())}),[O]);c.a.useEffect((function(){return O(or()),function(){x()}}),[O,x]);return j?Object(m.jsx)(I,{size:"large"}):Object(m.jsxs)(Hn,{className:"content",children:[Object(m.jsx)(k,{onClose:x,errorMessage:s,successMessage:"\u041a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0435\u043d",status:d}),Object(m.jsxs)("div",{className:"contractors__header",children:[Object(m.jsx)(ee,{value:r,onChange:function(e){a(e.currentTarget.value)},placeholder:"\u041d\u0430\u0439\u0442\u0438 \u043f\u043e \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u044e \u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u0438"}),Object(m.jsx)(J.a,{type:"primary",icon:Object(m.jsx)(Ur.a,{}),size:"large",onClick:v})]}),Object(m.jsxs)(Mr.a,{pagination:{position:["topRight"]},showSorterTooltip:!1,dataSource:b,rowKey:"id",size:h?"middle":"small",expandable:{expandedRowRender:function(e){return Object(m.jsxs)("div",{className:"contractor__expanded",children:[Object(m.jsx)("p",{className:"contractor__tab-descr table-value",children:e.description}),Object(m.jsxs)("div",{className:"contractor__expanded-action",children:[Object(m.jsx)(J.a,{className:"contractor__expanded-btn table-value",onClick:function(){return t=e,void p.push("contractors/".concat(t.id));var t},children:"\u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c"}),Object(m.jsx)(J.a,{className:"contractor__expanded-btn table-value",onClick:function(){return t=e.id,void(window.confirm("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430?")&&O(sr(t)));var t},danger:!0,children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]})]})}},children:[Object(m.jsx)(zn,{title:"\u0422\u0438\u043f \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430",dataIndex:"contractorType",render:function(e,t){var r,n=(r={},Object(kr.a)(r,Y.CUSTOMER,"green"),Object(kr.a)(r,Y.SUPPLIER,"geekblue"),Object(kr.a)(r,Y.UNKNOWN,"gray"),r);return Object(m.jsx)(Dr.a,{color:n[t.contractorType],className:"table-tag",children:t.contractorType===Y.CUSTOMER?"\u0417\u0430\u043a\u0430\u0437\u0447\u0438\u043a":"\u041f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a"},t.contractorType)},sorter:Kn("contractorType")},"contractorType"),Object(m.jsx)(zn,{title:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u0438",render:function(e,t){return Object(m.jsx)(ie.b,{size:"middle",children:Object(m.jsx)(i.b,{to:"contractors/".concat(t.id),className:"table-value",children:Hr(t.name,50)})})},sorter:Kn("name")},"name"),Object(m.jsx)(zn,{title:"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430",dataIndex:"phoneNumber",className:"table-value"},"phoneNumber"),Object(m.jsx)(zn,{title:"\u0413\u043e\u0440\u043e\u0434",dataIndex:"location",sorter:Kn("location"),className:"table-value"},"location"),Object(m.jsx)(zn,{title:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438",dataIndex:"categories",render:function(e,t){return Object(m.jsx)(m.Fragment,{children:t.categories.filter((function(e){return 0===e.parentId})).map((function(e){return Object(m.jsx)(J.a,{onClick:function(){return t=e.categoryId,void p.replace("?category=".concat(t));var t},type:"link",children:Object(m.jsx)(Dr.a,{color:"blue",className:"order__tag table-tag",children:e.categoryName})},e.categoryId)}))})}},"categories"),Object(m.jsx)(zn,{title:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u043d\u043e\u0435 \u043b\u0438\u0446\u043e",dataIndex:"contactName",className:"table-value"},"contactName"),Object(m.jsx)(zn,{title:"\u0414\u0430\u0442\u0430 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438",dataIndex:"creationDate",render:function(e,t){return Fr(t.creationDate)},defaultSortOrder:"descend",sorter:Yn("creationDate"),className:"table-value"},"creationDate"),Object(m.jsx)(zn,{title:"\u0420\u0435\u0439\u0442\u0438\u043d\u0433",dataIndex:"rating",render:function(e,t){return Object(m.jsx)(Wn,{className:"table-value",children:Math.ceil(100*t.rating)/100})},sorter:Yn("rating")},"rating")]})]})},Jn=r(833),Zn=L.a.Text,$n=function(e){var t=e.placeholder,r=e.editMode,n=e.fieldName,a=e.control,c=e.error,o=e.defaultValue,s=e.isTextArea,i=void 0!==s&&s,u=e.maxLength;return r?Object(m.jsx)($r.a,{control:a,rules:{required:!0},render:function(e){var r=e.field,a=r.onChange,o=r.value;return Object(m.jsx)(se.a.Item,{validateStatus:c?"error":"success",help:null===c||void 0===c?void 0:c.message,className:"input",children:i?Object(m.jsx)(Q.a.TextArea,{placeholder:t,value:o,onChange:a}):Object(m.jsx)(Q.a,{placeholder:t,value:o,onChange:a,maxLength:u,disabled:"phoneNumber"===n})})},name:n,defaultValue:o}):"eMail"===n?Object(m.jsx)("a",{href:"mailto:".concat(o),children:o}):"webSite"===n&&o?Object(m.jsx)("a",{href:o,target:"_blank",rel:"noreferrer",children:Hr(o,25)}):Object(m.jsx)(Zn,{children:o})},Qn=c.a.memo($n),ea=L.a.Text,ta=Zr.a.SHOW_ALL,ra=function(e){var t=e.defaultValue,r=e.editMode,n=e.control,a=e.error,c=e.categoriesTree,o=e.selectedCategories,s=e.handleSelectCategories,i=e.handleRemoveImage,u=e.handleAddImage,l=e.handleRemoveAvatar,d=e.imageUploading,j=e.images,b=e.registeringType,O=e.avatars,f=e.handleAddAvatar,p=e.avatarUploading,h=e.otherPhones,x=e.setOtherPhone;return Object(m.jsx)("div",{className:"contractor__body",children:Object(m.jsxs)(je.a,{children:[b===Y.SUPPLIER&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(Ln.a,{children:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"}),Object(m.jsx)(Qn,{defaultValue:t,editMode:r,control:n,error:a,fieldName:"description",placeholder:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",isTextArea:!0}),Object(m.jsx)(Ln.a,{children:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438"}),c&&Object(m.jsx)(Zr.a,{treeData:c,value:o,onChange:s,treeCheckable:!0,showCheckedStrategy:ta,placeholder:r?"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430":"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438",style:{width:"100%",marginBottom:10},disabled:!r})]}),O&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(Ln.a,{children:"\u0410\u0432\u0430\u0442\u0430\u0440"}),Object(m.jsxs)("div",{className:"contractor__images",children:[Object(m.jsx)($,{removeImage:l,images:O,editMode:r}),r&&Object(m.jsx)(A,{onChange:f,isUploading:p,buttonText:"\u0410\u0432\u0430\u0442\u0430\u0440"})]})]}),Object(m.jsx)(Ln.a,{children:"\u0424\u043e\u0442\u043e"}),Object(m.jsxs)("div",{className:"contractor__images",children:[Object(m.jsx)($,{removeImage:i,images:j,editMode:r}),r&&Object(m.jsx)(A,{onChange:u,isUploading:d,buttonText:"\u0424\u043e\u0442\u043e"})]}),Object(m.jsx)(Ln.a,{children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u043d\u044b\u0435 \u043d\u043e\u043c\u0435\u0440\u0430"}),r?Object(m.jsx)(de,{onFinish:x,initialValues:{contacts:h.map((function(e){return{phoneNumber:e}}))}}):h.map((function(e,t){return Object(m.jsx)("div",{children:Object(m.jsx)(ea,{children:e})},"".concat(e,"_").concat(t))}))]})})},na=c.a.memo(ra),aa=r(284),ca=function(e){var t,r=e.editMode,n=e.handleSelectRegType,a=e.registeringType,c=e.contractor,o=e.control,s=e.errors,u=e.toggleShowMap,l=St()().xxl;return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)(Gn.b,{size:"small",column:l?4:3,layout:"vertical",labelStyle:{fontWeight:"bold"},children:[Object(m.jsx)(Gn.b.Item,{label:"\u0422\u0438\u043f \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430",children:r?Object(m.jsxs)(aa.a.Group,{onChange:n,value:a,children:[Object(m.jsx)(aa.a,{value:Y.SUPPLIER,children:"\u041f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a"}),Object(m.jsx)(aa.a,{value:Y.CUSTOMER,children:"\u0417\u0430\u043a\u0430\u0437\u0447\u0438\u043a"})]}):c.contractorType===Y.CUSTOMER?"\u0417\u0430\u043a\u0430\u0437\u0447\u0438\u043a":"\u041f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a"}),Object(m.jsx)(Gn.b.Item,{label:"\u0417\u0430\u044f\u0432\u043a\u0438 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430",children:Object(m.jsx)(i.b,{to:"/orders/?contractor=".concat(c.id),children:"\u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c"})}),Object(m.jsx)(Gn.b.Item,{label:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u043d\u043e\u0435 \u043b\u0438\u0446\u043e",children:Object(m.jsx)(Qn,{defaultValue:c.contactName,editMode:r,control:o,error:s.contactName,fieldName:"contactName",placeholder:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u043d\u043e\u0435 \u043b\u0438\u0446\u043e"})}),Object(m.jsx)(Gn.b.Item,{label:"\u0413\u043e\u0440\u043e\u0434",children:Object(m.jsx)(Qn,{defaultValue:c.location,editMode:r,control:o,error:s.location,fieldName:"location",placeholder:"\u0413\u043e\u0440\u043e\u0434"})}),Object(m.jsx)(Gn.b.Item,{label:"\u041a\u043e\u043e\u0440\u0434\u0438\u043d\u0430\u0442\u044b",children:Object(m.jsx)(J.a,{size:"small",type:"link",onClick:u,children:"\u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u043d\u0430 \u043a\u0430\u0440\u0442\u0435"})}),Object(m.jsx)(Gn.b.Item,{label:"\u0421\u0430\u0439\u0442",children:Object(m.jsx)(Qn,{defaultValue:c.contacts.webSite,editMode:r,control:o,error:s.webSite,fieldName:"webSite",placeholder:"\u0421\u0430\u0439\u0442"})}),Object(m.jsx)(Gn.b.Item,{label:"\u041f\u043e\u0447\u0442\u0430",children:Object(m.jsx)(Qn,{defaultValue:c.contacts.eMail,editMode:r,control:o,error:s.eMail,fieldName:"eMail",placeholder:"\u041f\u043e\u0447\u0442\u0430"})}),Object(m.jsx)(Gn.b.Item,{label:"\u0410\u0434\u0440\u0435\u0441",children:Object(m.jsx)(Qn,{defaultValue:c.contacts.address,editMode:r,control:o,error:s.address,fieldName:"address",placeholder:"\u0410\u0434\u0440\u0435\u0441"})}),Object(m.jsx)(Gn.b.Item,{label:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d",children:Object(m.jsx)(Qn,{defaultValue:"+".concat(c.phoneNumber),editMode:r,control:o,error:s.phoneNumber,fieldName:"phoneNumber",placeholder:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d",maxLength:12})}),Object(m.jsx)(Gn.b.Item,{label:"\u0418\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430",children:c.id}),Object(m.jsx)(Gn.b.Item,{label:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043b\u0441\u044f",children:(t=c.creationDate,he()(t).fromNow())})]})})},oa=c.a.memo(ca),sa=d.a.Content,ia=function(){var e=c.a.useState(!1),t=Object(l.a)(e,2),r=t[0],a=t[1],o=c.a.useState([]),s=Object(l.a)(o,2),i=s[0],d=s[1],j=c.a.useState(null),b=Object(l.a)(j,2),O=b[0],p=b[1],h=c.a.useState(Y.SUPPLIER),x=Object(l.a)(h,2),v=x[0],g=x[1],N=c.a.useState(!1),E=Object(l.a)(N,2),S=E[0],C=E[1],y=c.a.useState([]),_=Object(l.a)(y,2),R=_[0],T=_[1],A=Object(u.c)(Me),w=Object(u.c)(Ue),M=Object(u.c)(Ve),D=Object(u.c)(Le),L=Object(u.c)(Ye),U=Object(u.c)(We),V=Object(u.c)(Be),P=Object(u.c)(He),G=Object(u.c)(Ae),q=Object(f.i)().contractorId,F=Object($r.e)({resolver:Object(Qr.a)(v===Y.SUPPLIER?on:sn)}),H=F.control,z=F.handleSubmit,W=F.formState.errors,K=F.reset,X=Object(u.b)(),Z=Object(f.g)(),$=c.a.useCallback((function(){X(Yt(n.NEVER)),X(zt(null)),X(ar())}),[X]),Q=c.a.useCallback((function(){a((function(e){return X(Yt(n.NEVER)),!e}))}),[X]);c.a.useEffect((function(){return X(function(e){return function(){var t=Object(Ft.a)(qt.a.mark((function t(r){var n;return qt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r(Wt(!0)),t.next=4,Bt.getContractorById(e);case 4:0===(n=t.sent).length?cr("\u041a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d",r):r(zt(n[0])),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.log("getFullContractorInfo ===> ",t.t0),cr("\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0442\u0438, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437",r);case 12:return t.prev=12,r(Wt(!1)),t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[0,8,12,15]])})));return function(e){return t.apply(this,arguments)}}()}(Number(q))),function(){$()}}),[$,X,q]),c.a.useEffect((function(){var e;A&&(d(null===(e=A.categories)||void 0===e?void 0:e.map((function(e){return e.categoryId}))),g(A.contractorType),p({coordinatesLatitude:A.coordinates.coordinatesLatitude,coordinatesLongitude:A.coordinates.coordinatesLongitude}),X(Qt(A.attachments)),X(tr(A.avatars)),T(A.otherPhoneNumbers))}),[A,X]),c.a.useEffect((function(){A||w!==n.SUCCESS||Z.push("/contractors")}),[Z,A,w]);var ee=z((function(e){if(A){var t=i.map((function(e){return{categoryId:e}})),r={name:e.name,contactName:e.contactName,phoneNumber:A.phoneNumber,description:e.description?e.description:"",location:e.location,coordinates:O||{coordinatesLatitude:"",coordinatesLongitude:""},contacts:{address:e.address?e.address:"",webSite:e.webSite?e.webSite:"",eMail:e.eMail?e.eMail:""},contractorType:v,categories:t,attachments:V.map((function(e){return{attachmentId:e.id}})),avatars:L.map((function(e){return{attachmentId:e.id}})),otherPhoneNumbers:R};a(!1),X(function(e,t){return function(){var r=Object(Ft.a)(qt.a.mark((function r(a){var c;return qt.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,a(Wt(!0)),r.next=4,Bt.updateContractor(e,t);case 4:(c=r.sent).length>0?(a(Yt(n.SUCCESS)),a(ar()),a(zt(c[0]))):cr("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437",a),r.next=12;break;case 8:r.prev=8,r.t0=r.catch(0),console.log("getContracors ===> ",r.t0),cr("\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0442\u0438, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437",a);case 12:return r.prev=12,a(Wt(!1)),r.finish(12);case 15:case"end":return r.stop()}}),r,null,[[0,8,12,15]])})));return function(e){return r.apply(this,arguments)}}()}(r,A.id))}})),te=c.a.useCallback((function(e){d(e)}),[]),re=c.a.useCallback((function(){window.confirm("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430?")&&A&&X(sr(A.id))}),[A,X]),ne=c.a.useCallback((function(e){g(e.target.value)}),[]),ae=c.a.useCallback((function(){var e;(Q(),A)&&(d(null===(e=A.categories)||void 0===e?void 0:e.map((function(e){return e.categoryId}))),p({coordinatesLatitude:A.coordinates.coordinatesLatitude,coordinatesLongitude:A.coordinates.coordinatesLongitude}),X(ar()),X(Qt(A.attachments)),X(tr(A.avatars)),T(A.otherPhoneNumbers),K({name:A.name,phoneNumber:A.phoneNumber,contactName:A.contactName,location:A.location,webSite:A.contacts.webSite,eMail:A.contacts.eMail,address:A.contacts.address,description:A.description}))}),[A,X,K,Q]),ce=c.a.useCallback((function(){C(!S)}),[S]),oe=c.a.useCallback((function(e){r&&p({coordinatesLatitude:String(null===e||void 0===e?void 0:e.lat()),coordinatesLongitude:String(null===e||void 0===e?void 0:e.lng())})}),[r]),se=function(){var e=Object(Ft.a)(qt.a.mark((function e(t){var r,n,a;return qt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.currentTarget,(a=null===(r=n.files)||void 0===r?void 0:r[0])&&X(ir(a));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ie=function(){var e=Object(Ft.a)(qt.a.mark((function e(t){var r,n,a;return qt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.currentTarget,(a=null===(r=n.files)||void 0===r?void 0:r[0])&&X(ur(a));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ue=c.a.useCallback((function(){return v===Y.SUPPLIER?0!==Object.keys(W).length||0===i.length:0!==Object.keys(W).length}),[W,v,i.length]),le=c.a.useMemo((function(){return[Object(m.jsx)(J.a,{onClick:ee,disabled:ue(),children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"},"1"),Object(m.jsx)(J.a,{onClick:ae,danger:!0,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"},"2")]}),[ue,ae,ee]),de=c.a.useMemo((function(){return[Object(m.jsx)(Jn.a,{defaultValue:(null===A||void 0===A?void 0:A.rating)?A.rating:0,disabled:!0},"3"),Object(m.jsx)(J.a,{onClick:Q,children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"},"4"),Object(m.jsx)(J.a,{onClick:re,danger:!0,children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"},"5")]}),[null===A||void 0===A?void 0:A.rating,re,Q]);return S?Object(m.jsxs)(sa,{className:"content",children:[Object(m.jsxs)("div",{className:"map__header",children:[Object(m.jsx)(J.a,{className:"map-btn",type:"default",onClick:ce,children:"\u041d\u0430\u0437\u0430\u0434"}),O&&r&&Object(m.jsx)(J.a,{onClick:ce,children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]}),Object(m.jsx)(B,{containerElement:Object(m.jsx)(je.a,{className:"map"}),mapElement:Object(m.jsx)("div",{className:"map-element"}),googleMapURL:"https://maps.googleapis.com/maps/api/js?key=AIzaSyAsGwKuUn_xR3sDbzuebV85dIrgJMi5OpA&v=3.exp&libraries=geometry,drawing,places",loadingElement:Object(m.jsx)(I,{}),handleSelectCoords:oe,marker:O})]}):D?Object(m.jsx)(I,{}):Object(m.jsxs)(sa,{className:"content",children:[Object(m.jsx)(k,{onClose:function(){return X(Yt(n.NEVER))},errorMessage:M,status:w,successMessage:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b"}),A&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:"page-header",children:Object(m.jsx)(kn.a,{ghost:!1,onBack:function(){return window.history.back()},title:Object(m.jsx)(Qn,{defaultValue:A.name,editMode:r,control:H,error:W.name,fieldName:"name",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"}),extra:r?le:de,children:Object(m.jsx)(oa,{editMode:r,handleSelectRegType:ne,registeringType:v,contractor:A,control:H,errors:W,toggleShowMap:ce})})}),Object(m.jsx)(na,{defaultValue:A.description,editMode:r,control:H,error:W.description,categoriesTree:G,selectedCategories:i,handleSelectCategories:te,images:V,registeringType:v,handleRemoveImage:function(e){A&&X(function(e,t){return function(){var r=Object(Ft.a)(qt.a.mark((function r(n){return qt.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,n(Zt(!0)),r.next=4,Bt.removeContractorAttachment(e,t);case 4:r.sent?n(rr(t)):cr("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0432\u043b\u043e\u0436\u0435\u043d\u0438\u0435, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437",n),r.next=12;break;case 8:r.prev=8,r.t0=r.catch(0),console.log("removeContractorImage ===> ",r.t0),cr("\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0442\u0438, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437",n);case 12:return r.prev=12,n(Zt(!1)),r.finish(12);case 15:case"end":return r.stop()}}),r,null,[[0,8,12,15]])})));return function(e){return r.apply(this,arguments)}}()}(A.id,e))},handleAddImage:se,imageUploading:P,avatars:L,otherPhones:A.otherPhoneNumbers,handleRemoveAvatar:function(e){A&&X(function(e,t){return function(){var r=Object(Ft.a)(qt.a.mark((function r(n){return qt.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,n($t(!0)),r.next=4,Bt.removeContractorAttachment(e,t);case 4:r.sent?n(nr(t)):cr("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0432\u043b\u043e\u0436\u0435\u043d\u0438\u0435, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437",n),r.next=12;break;case 8:r.prev=8,r.t0=r.catch(0),console.log("removeContractorImage ===> ",r.t0),cr("\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0442\u0438, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437",n);case 12:return r.prev=12,n($t(!1)),r.finish(12);case 15:case"end":return r.stop()}}),r,null,[[0,8,12,15]])})));return function(e){return r.apply(this,arguments)}}()}(A.id,e))},avatarUploading:U,handleAddAvatar:ie,setOtherPhone:function(e){var t=e.contacts.map((function(e){return e.phoneNumber}));T(t)}})]})]})},ua=L.a.Text,la=function(e){var t=e.control,r=e.error,n=e.subtitle,a=e.fieldName,c=e.required,o=void 0===c||c,s=e.maxLength,i=e.textArea,u=e.defaultValue,l=i?Q.a.TextArea:Q.a;return Object(m.jsx)($r.a,{control:t,rules:{required:o},render:function(e){var t=e.field,a=t.onChange,c=t.value;return Object(m.jsxs)(se.a.Item,{validateStatus:r?"error":"success",help:null===r||void 0===r?void 0:r.message,className:"input form__input",required:o,children:[Object(m.jsx)(ua,{className:"subtitle",children:n}),Object(m.jsx)(l,{placeholder:n,value:c,onChange:a,maxLength:s})]})},name:a,defaultValue:u})},da=[{id:"1",fieldName:"name",subtitle:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u0438",required:!0},{id:"2",fieldName:"contactName",subtitle:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u043d\u043e\u0435 \u043b\u0438\u0446\u043e",required:!0},{id:"3",fieldName:"location",subtitle:"\u0413\u043e\u0440\u043e\u0434",required:!0},{id:"4",fieldName:"address",subtitle:"\u0410\u0434\u0440\u0435\u0441",required:!0},{id:"5",fieldName:"eMail",subtitle:"\u041f\u043e\u0447\u0442\u0430",required:!1},{id:"6",fieldName:"webSite",subtitle:"\u0421\u0430\u0439\u0442 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438",required:!1},{id:"7",fieldName:"phoneNumber",subtitle:"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430 \u0434\u043b\u044f \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438",maxLength:12,required:!0,defaultValue:"+7"},{id:"8",fieldName:"description",subtitle:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",required:!1,textArea:!0}],ja=function(e){var t=e.control,r=e.errors;return Object(m.jsx)(m.Fragment,{children:da.map((function(e){return Object(m.jsx)(la,{control:t,error:r[e.fieldName],subtitle:e.subtitle,fieldName:e.fieldName,required:e.required,maxLength:e.maxLength,textArea:e.textArea,defaultValue:e.defaultValue},e.id)}))})},ba=Zr.a.SHOW_ALL,Oa=function(e){var t=e.categoriesTree,r=e.selectedCategories,n=e.handleSelectCategories,a=e.toggleShowMap,c=e.latLng,o=e.handleUploadImage,s=e.contractorImageUploading,i=e.setOtherPhoneNumbers;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(Zr.a,{treeData:t,value:r,onChange:n,treeCheckable:!0,showCheckedStrategy:ba,placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430",style:{width:"100%",marginBottom:10},maxTagCount:5}),Object(m.jsx)(J.a,{className:"map-btn",type:"default",onClick:a,block:!0,children:c?"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043a\u043e\u043e\u0440\u0434\u0438\u043d\u0430\u0442\u044b":"\u041e\u0442\u043c\u0435\u0442\u0438\u0442\u044c \u043d\u0430 \u043a\u0430\u0440\u0442\u0435"}),Object(m.jsx)(A,{onChange:o,isUploading:s,buttonText:"\u0424\u043e\u0442\u043e"}),Object(m.jsx)(de,{onFinish:function(e){var t=e.contacts.map((function(e){return e.phoneNumber}));i(t)}})]})},fa=[{id:"1",fieldName:"name",subtitle:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u0438",required:!0},{id:"2",fieldName:"contactName",subtitle:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u043d\u043e\u0435 \u043b\u0438\u0446\u043e",required:!0},{id:"3",fieldName:"location",subtitle:"\u0413\u043e\u0440\u043e\u0434",required:!0},{id:"7",fieldName:"phoneNumber",subtitle:"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430 \u0434\u043b\u044f \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438",maxLength:12,required:!0,defaultValue:"+7"}],pa=function(e){var t=e.control,r=e.errors;return Object(m.jsx)(m.Fragment,{children:fa.map((function(e){return Object(m.jsx)(la,{control:t,error:r[e.fieldName],subtitle:e.subtitle,fieldName:e.fieldName,required:e.required,maxLength:e.maxLength,defaultValue:e.defaultValue},e.id)}))})},ma=d.a.Content,ha=L.a.Title,xa=function(){var e=c.a.useState([]),t=Object(l.a)(e,2),r=t[0],a=t[1],o=c.a.useState(Y.SUPPLIER),s=Object(l.a)(o,2),i=s[0],d=s[1],j=Object($r.e)({resolver:Object(Qr.a)(i===Y.SUPPLIER?on:sn)}),b=j.control,O=j.handleSubmit,p=j.reset,h=j.formState.errors,x=c.a.useState(!1),v=Object(l.a)(x,2),g=v[0],N=v[1],E=c.a.useState(null),S=Object(l.a)(E,2),C=S[0],y=S[1],_=c.a.useState([]),R=Object(l.a)(_,2),T=R[0],w=R[1],M=Object(u.c)(Ue),D=Object(u.c)(Ve),L=Object(u.c)(Le),U=Object(u.c)(Me),V=Object(u.c)(Be),P=Object(u.c)(He),G=Object(u.c)(Ye),q=Object(u.c)(We),F=Object(u.c)(Ae),H=Object(u.c)(Se),z=Object(u.c)(Te),W=Object(u.b)(),K=Object(f.g)(),X=c.a.useCallback((function(){W(Yt(n.NEVER)),W(Kt(null)),W(ar())}),[W]),Z=c.a.useCallback((function(){W(mn(n.NEVER)),W(pn(null))}),[W]);c.a.useEffect((function(){return function(){X(),Z()}}),[Z,X]),c.a.useEffect((function(){U&&M===n.SUCCESS&&K.push("/contractors/".concat(U.id))}),[U,K,M]);var Q=O((function(e){var t=r.map((function(e){return{categoryId:e}})),a={name:e.name,contactName:e.contactName,phoneNumber:"7".concat(String(e.phoneNumber).slice(-10)),description:e.description?e.description:"",location:e.location,coordinates:C||{coordinatesLatitude:"",coordinatesLongitude:""},contacts:{address:e.address?e.address:"",webSite:e.webSite?e.webSite:"",eMail:e.eMail?e.eMail:""},contractorType:i,categories:t,attachments:V.map((function(e){return{attachmentId:e.id}})),avatars:G.map((function(e){return{attachmentId:e.id}})),otherPhoneNumbers:T};W(function(e){return function(){var t=Object(Ft.a)(qt.a.mark((function t(r){var a;return qt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r(Wt(!0)),t.next=4,Bt.createContractor(e);case 4:(a=t.sent).length>0?(r(Yt(n.SUCCESS)),r(zt(a[0]))):cr("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437",r),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.log("createContractorProfile ERROR ===>",t.t0),cr("\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0442\u0438, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437",r);case 12:return t.prev=12,r(Wt(!1)),t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[0,8,12,15]])})));return function(e){return t.apply(this,arguments)}}()}(a))})),ee=function(){N(!g)},te=function(){var e=Object(Ft.a)(qt.a.mark((function e(t){var r,n,a;return qt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.currentTarget,(a=null===(r=n.files)||void 0===r?void 0:r[0])&&W(ir(a));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),re=function(){var e=Object(Ft.a)(qt.a.mark((function e(t){var r,n,a;return qt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.currentTarget,(a=null===(r=n.files)||void 0===r?void 0:r[0])&&W(ur(a));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return L?Object(m.jsx)(I,{}):g?Object(m.jsxs)(ma,{className:"content",children:[Object(m.jsxs)("div",{className:"map__header",children:[Object(m.jsx)(J.a,{className:"map-btn",type:"default",onClick:ee,children:"\u041d\u0430\u0437\u0430\u0434"}),C&&Object(m.jsx)(J.a,{onClick:ee,children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]}),Object(m.jsx)(B,{containerElement:Object(m.jsx)(je.a,{className:"map"}),mapElement:Object(m.jsx)("div",{className:"map-element"}),googleMapURL:"https://maps.googleapis.com/maps/api/js?key=AIzaSyAsGwKuUn_xR3sDbzuebV85dIrgJMi5OpA&v=3.exp&libraries=geometry,drawing,places",loadingElement:Object(m.jsx)(I,{}),handleSelectCoords:function(e){y({coordinatesLatitude:String(null===e||void 0===e?void 0:e.lat()),coordinatesLongitude:String(null===e||void 0===e?void 0:e.lng())})},marker:C})]}):Object(m.jsxs)(ma,{className:"content",children:[Object(m.jsx)(k,{onClose:X,errorMessage:D,successMessage:"\u041a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d",status:M}),Object(m.jsx)(k,{onClose:Z,errorMessage:H,status:z}),Object(m.jsxs)(je.a,{className:"form",children:[Object(m.jsx)(ha,{level:3,className:"title",children:"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430"}),Object(m.jsxs)(aa.a.Group,{onChange:function(e){p(),d(e.target.value)},value:i,className:"radio-group",children:[Object(m.jsx)(aa.a,{value:Y.SUPPLIER,children:"\u041f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a"}),Object(m.jsx)(aa.a,{value:Y.CUSTOMER,children:"\u0417\u0430\u043a\u0430\u0437\u0447\u0438\u043a"})]}),Object(m.jsx)($,{removeImage:function(e){W(function(e){return function(){var t=Object(Ft.a)(qt.a.mark((function t(r){return qt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r($t(!0)),t.next=4,Ht.removeAttachment(e);case 4:t.sent?r(nr(e)):cr("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0432\u043b\u043e\u0436\u0435\u043d\u0438\u0435, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437",r),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.log("removeNewContractorImage ===> ",t.t0),cr("\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0442\u0438, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437",r);case 12:return t.prev=12,r($t(!1)),t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[0,8,12,15]])})));return function(e){return t.apply(this,arguments)}}()}(e))},images:G,editMode:!0}),Object(m.jsx)(A,{onChange:re,isUploading:q,buttonText:"\u0410\u0432\u0430\u0442\u0430\u0440"}),i===Y.SUPPLIER?Object(m.jsx)(ja,{control:b,errors:h}):Object(m.jsx)(pa,{control:b,errors:h}),i===Y.SUPPLIER&&Object(m.jsx)(Oa,{categoriesTree:F,selectedCategories:r,handleSelectCategories:function(e){a(e)},toggleShowMap:ee,latLng:C,handleUploadImage:te,contractorImageUploading:P,setOtherPhoneNumbers:w}),Object(m.jsx)($,{removeImage:function(e){W(function(e){return function(){var t=Object(Ft.a)(qt.a.mark((function t(r){return qt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r(Zt(!0)),t.next=4,Ht.removeAttachment(e);case 4:t.sent?r(rr(e)):cr("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0432\u043b\u043e\u0436\u0435\u043d\u0438\u0435, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437",r),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.log("removeNewContractorImage ===> ",t.t0),cr("\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0442\u0438, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437",r);case 12:return t.prev=12,r(Zt(!1)),t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[0,8,12,15]])})));return function(e){return t.apply(this,arguments)}}()}(e))},images:V,editMode:!0}),Object(m.jsx)(J.a,{className:"order__save-btn",onClick:Q,disabled:Object.keys(h).length>0||i===Y.SUPPLIER&&0===r.length,children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})]})},va=r(150),ga={getAllAdmin:function(){var e=Object(Ft.a)(qt.a.mark((function e(){var t,r;return qt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.a.get("/admins");case 2:return t=e.sent,r=t.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),createAdmin:function(){var e=Object(Ft.a)(qt.a.mark((function e(t){var r,n;return qt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.a.post("/admins",t);case 2:return r=e.sent,n=r.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),checkAdmin:function(){var e=Object(Ft.a)(qt.a.mark((function e(t){var r,n;return qt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.a.post("/checkAdmin",t);case 2:return r=e.sent,n=r.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),banAdmin:function(){var e=Object(Ft.a)(qt.a.mark((function e(t){var r,n;return qt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.a.delete("admins/".concat(t));case 2:return r=e.sent,n=r.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updateAdmin:function(){var e=Object(Ft.a)(qt.a.mark((function e(t,r){var n,a;return qt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.a.patch("/admins/".concat(t),r);case 2:return n=e.sent,a=n.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),getAdminById:function(){var e=Object(Ft.a)(qt.a.mark((function e(t){var r,n;return qt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.a.get("/admins/".concat(t));case 2:return r=e.sent,n=r.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Na=function(e){return{type:"SET_IS_AUTH",payload:{isAuth:e}}},Ea=function(e){return{type:"SET_AUTH_ERROR_MESSAGE",payload:{authErrorMessage:e}}},Sa=function(e){return{type:"SET_AUTH_LOADING",payload:{authLoading:e}}},Ca=function(e){return{type:"SET_IS_INIT",payload:{isInit:e}}},ya=function(e){return{type:"SET_ADMIN_LOADING",payload:{adminLoading:e}}},_a=function(e){return{type:"SET_ADMIN_ERROR_MESSAGE",payload:{adminErrorMessage:e}}},Ra=function(e){return{type:"SET_ADMINS",payload:{admins:e}}},Ia=function(e){return{type:"SET_ADMIN_ACTION_STATUS",payload:{adminActionStatus:e}}},Ta=function(e,t){return{type:"CHANGE_BAN_STATUS",payload:{id:e,value:t}}},Aa=function(e){return{type:"SET_CURRENT_ADMIN",payload:{admin:e}}},wa=function(){return function(){var e=Object(Ft.a)(qt.a.mark((function e(t){return qt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(Ia(n.NEVER)),t(_a(null));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},ka=function(){return function(){var e=Object(Ft.a)(qt.a.mark((function e(t){var r;return qt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(_a(null)),t(ya(!0)),e.next=5,ga.getAllAdmin();case 5:r=e.sent,t(Ra(r)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),t(_a("\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0442\u0438! \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437."));case 12:return e.prev=12,t(ya(!1)),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[0,9,12,15]])})));return function(t){return e.apply(this,arguments)}}()},Ma=function(e){return e.admin},Da=function(e){return Ma(e).isAuth},La=function(e){return Ma(e).authLoading},Ua=function(e){return Ma(e).authErrorMessage},Va=function(e){return Ma(e).isInit},Pa=function(e){return Ma(e).adminLoading},Ga=function(e){return Ma(e).adminErrorMessage},qa=function(e){return Ma(e).admins},Fa=function(e){return Ma(e).adminActionStatus},Ba=function(e){return Ma(e).admin},Ha=L.a.Text,za=function(e){var t=e.control,r=e.error,n=e.subtitle,a=e.fieldName,c=e.required,o=void 0===c||c,s=e.maxLength,i=e.password,u=e.defaultValue,l=i?Q.a.Password:Q.a;return Object(m.jsx)($r.a,{control:t,rules:{required:o},render:function(e){var t=e.field,a=t.onChange,c=t.value;return Object(m.jsxs)(se.a.Item,{validateStatus:r?"error":"success",help:null===r||void 0===r?void 0:r.message,className:"input form__input",required:o,children:[Object(m.jsx)(Ha,{className:"subtitle",children:n}),Object(m.jsx)(l,{placeholder:n,value:c,onChange:a,maxLength:s})]})},name:a,defaultValue:u})},Wa=[{id:"1",fieldName:"phoneNumber",subtitle:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d",required:!0,defaultValue:"+7"},{id:"2",fieldName:"password",subtitle:"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",required:!0,password:!0}],Ya=function(e){var t=e.control,r=e.errors;return Object(m.jsx)(m.Fragment,{children:Wa.map((function(e){return Object(m.jsx)(za,{control:t,error:r[e.fieldName],subtitle:e.subtitle,fieldName:e.fieldName,required:e.required,password:e.password,defaultValue:e.defaultValue},e.id)}))})},Ka=L.a.Title,Xa=function(){var e=Object($r.e)({resolver:Object(Qr.a)(ln)}),t=e.control,r=e.handleSubmit,n=e.formState.errors,a=Object(u.c)(La),c=Object(u.c)(Ua),o=Object(u.b)(),s=r((function(e){o(function(e){return function(){var t=Object(Ft.a)(qt.a.mark((function t(r){var n;return qt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r(Ea(null)),r(Sa(!0)),t.next=5,ga.checkAdmin(e);case 5:(n=t.sent)?(r(Aa(n)),localStorage.setItem("adminId",String(n.id)),r(Na(!0))):r(Ea("\u041e\u0448\u0438\u0431\u043a\u0430 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438")),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),r(Ea("\u041e\u0448\u0438\u0431\u043a\u0430 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438"));case 12:return t.prev=12,r(Sa(!1)),t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[0,9,12,15]])})));return function(e){return t.apply(this,arguments)}}()}(Object(te.a)(Object(te.a)({},e),{},{phoneNumber:"7".concat(String(e.phoneNumber).slice(-10))})))}));return a?Object(m.jsx)(I,{}):Object(m.jsx)(va.Content,{className:"auth__content",children:Object(m.jsxs)(je.a,{className:"form",children:[c&&Object(m.jsx)(w.a,{className:"error",message:c,type:"error"}),Object(m.jsx)(Ka,{level:3,className:"title",children:"\u0412\u043e\u0439\u0442\u0438"}),Object(m.jsx)(Ya,{control:t,errors:n}),Object(m.jsx)(J.a,{className:"order__save-btn",onClick:s,disabled:Object.keys(n).length>0,children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})})},Ja=r(834),Za=r(843),$a=r(136),Qa=L.a.Text,ec=function(e){var t=e.placeholder,r=e.editMode,n=e.value,a=e.currentValue,c=e.error,o=e.onChange;return r?Object(m.jsx)(se.a.Item,{validateStatus:c?"error":"success",help:c,className:"input",required:!0,tooltip:"\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435",children:Object(m.jsx)(Q.a,{placeholder:t,onClick:function(e){e.stopPropagation()},value:a,onChange:o})}):Object(m.jsx)(Qa,{children:n})},tc=function(e){var t=e.editMode,r=e.disabledBtn,n=e.onSave,a=e.onEdit,c=e.category,o=e.onRemove;return Object(m.jsx)("div",{className:"categories__actions",children:t?Object(m.jsx)(J.a,{onClick:n,disabled:r,children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(J.a,{className:"categories__btn",onClick:function(e){e.stopPropagation(),a(c)},children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"}),Object(m.jsx)(J.a,{className:"categories__btn",onClick:function(e){e.stopPropagation(),o(c.id)},danger:!0,children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]})})},rc=d.a.Content,nc=L.a.Text,ac=Ja.a.Panel,cc=function(){var e=c.a.useState(null),t=Object(l.a)(e,2),r=t[0],a=t[1],o=Object(u.b)(),s=Object(u.c)(ye),i=Object(u.c)(_e),d=Object(u.c)(Ce),j=Object(u.c)(Se),b=Object(u.c)(Ie),O=Object(u.c)(Te),f=c.a.useCallback((function(){o(mn(n.NEVER)),o(pn(null))}),[o]);c.a.useEffect((function(){return function(){return f()}}),[f]);var p=function(e){window.confirm("\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044e?")&&o(function(e){return function(){var t=Object(Ft.a)(qt.a.mark((function t(r){return qt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r(fn(!0)),t.next=4,bn.deleteCategoryById(e);case 4:t.sent?(r(mn(n.SUCCESS)),r(vn(e))):Nn("\u041d\u0435 \u043f\u043e\u043b\u0443\u0447\u0438\u043b\u043e\u0441\u044c \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044e, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437",r),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.log("deleteCategoryById...",t.t0),Nn("\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0442\u0438, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437",r);case 12:return t.prev=12,r(fn(!1)),t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[0,8,12,15]])})));return function(e){return t.apply(this,arguments)}}()}(e))},h=function(e){a(e)},x=function(e){e.stopPropagation(),r&&o(En(r)),a(null)},v=function(e){a((function(t){return t?Object(te.a)(Object(te.a)({},t),{},{name:e.target.value}):t}))},g=function(e){a((function(t){return t?Object(te.a)(Object(te.a)({},t),{},{parentId:e}):t}))};return d?Object(m.jsx)(I,{size:"large"}):Object(m.jsxs)(rc,{className:"content",children:[Object(m.jsx)(k,{onClose:f,errorMessage:j,successMessage:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b",status:O}),s&&s.length>0?Object(m.jsx)(Ja.a,{accordion:!0,children:s.map((function(e){return Object(m.jsx)(ac,{header:Object(m.jsx)("div",{className:"categories__header",children:b===e.id?Object(m.jsx)(nc,{children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435..."}):Object(m.jsx)(ec,{editMode:(null===r||void 0===r?void 0:r.id)===e.id,value:e.name,currentValue:null===r||void 0===r?void 0:r.name,onChange:v})}),extra:Object(m.jsx)(tc,{editMode:(null===r||void 0===r?void 0:r.id)===e.id,disabledBtn:0===(null===r||void 0===r?void 0:r.name.length),onSave:x,onEdit:h,category:e,onRemove:p}),children:i&&Object(m.jsx)(Za.b,{dataSource:i.filter((function(t){return t.parentId===e.id})),renderItem:function(e){return Object(m.jsx)(Za.b.Item,{actions:(null===r||void 0===r?void 0:r.id)===e.id?[Object(m.jsx)(J.a,{onClick:x,disabled:0===(null===r||void 0===r?void 0:r.name.length),children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]:[Object(m.jsx)(J.a,{size:"small",onClick:function(t){t.stopPropagation(),h(e)},children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"}),Object(m.jsx)(J.a,{size:"small",onClick:function(t){t.stopPropagation(),p(e.id)},danger:!0,children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})],children:Object(m.jsx)(Za.b.Item.Meta,{description:Object(m.jsx)(m.Fragment,{children:b===e.id?Object(m.jsx)(nc,{children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435..."}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(ec,{editMode:(null===r||void 0===r?void 0:r.id)===e.id,value:e.name,currentValue:null===r||void 0===r?void 0:r.name,onChange:v}),(null===r||void 0===r?void 0:r.id)===e.id&&Object(m.jsx)(q,{mainCategories:s,handleChangeParentId:g,item:e})]})})})})}})},e.id)}))}):Object(m.jsx)($a.a,{description:"\u0414\u0430\u043d\u043d\u044b\u0445 \u043d\u0435\u0442"})]})},oc=d.a.Content,sc=L.a.Text,ic=L.a.Title,uc=function(){var e=Object($r.e)({resolver:Object(Qr.a)(jn)}),t=e.control,r=e.handleSubmit,a=e.formState.errors,o=Object(u.c)(Se),s=Object(u.c)(Te),i=Object(u.c)(ye),l=Object(u.c)(Ce),d=Object(u.b)(),j=c.a.useCallback((function(){d(mn(n.NEVER)),d(pn(null))}),[d]),b=r((function(e){d(function(e){return function(){var t=Object(Ft.a)(qt.a.mark((function t(r){var a;return qt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r(fn(!0)),t.next=4,bn.addCategory({name:e.name,parentId:Number(e.parentId),isDeleted:!1});case 4:(a=t.sent).length>0?(r(mn(n.SUCCESS)),r(gn(a[0]))):Nn("\u041d\u0435 \u043f\u043e\u043b\u0443\u0447\u0438\u043b\u043e\u0441\u044c \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044e, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437",r),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.log("addCategory...",t.t0),Nn("\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0442\u0438, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437",r);case 12:return t.prev=12,r(fn(!1)),t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[0,8,12,15]])})));return function(e){return t.apply(this,arguments)}}()}(e))}));return c.a.useEffect((function(){return function(){return j()}}),[j]),l?Object(m.jsx)(I,{}):Object(m.jsxs)(oc,{className:"content",children:[Object(m.jsx)(k,{onClose:j,errorMessage:o,successMessage:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0430",status:s}),Object(m.jsxs)(je.a,{className:"form",children:[Object(m.jsx)(ic,{level:3,className:"title",children:"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438"}),Object(m.jsx)($r.a,{control:t,rules:{required:!0},render:function(e){var t,r=e.field,n=r.onChange,c=r.value;return Object(m.jsxs)(se.a.Item,{validateStatus:a.name?"error":"success",help:null===(t=a.name)||void 0===t?void 0:t.message,className:"input",required:!0,children:[Object(m.jsx)(sc,{className:"subtitle",children:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438"}),Object(m.jsx)(Q.a,{placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438",value:c,onChange:n})]})},name:"name",defaultValue:""}),i&&Object(m.jsx)($r.a,{control:t,rules:{required:!0},render:function(e){var t,r=e.field,n=r.onChange;r.value;return Object(m.jsx)(q,{mainCategories:i,handleChangeParentId:n,error:null===(t=a.parentId)||void 0===t?void 0:t.message})},name:"parentId",defaultValue:0}),Object(m.jsx)(J.a,{className:"categories__save-btn",onClick:b,disabled:l||Object.keys(a).length>0,children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})]})},lc=L.a.Text,dc=function(){var e=Object(u.c)(Re),t=Object(u.c)(Se),r=Object(u.c)(Te),a=Object(u.c)(Ie),o=Object(u.b)(),s=c.a.useCallback((function(){o(mn(n.NEVER)),o(pn(null))}),[o]);return Object(m.jsxs)(va.Content,{className:"content",children:[Object(m.jsx)(k,{onClose:s,errorMessage:t,successMessage:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b",status:r}),e&&0===e.length?Object(m.jsx)($a.a,{}):Object(m.jsx)(je.a,{children:Object(m.jsx)(Za.b,{dataSource:e,renderItem:function(e){return Object(m.jsx)(Za.b.Item,{actions:[Object(m.jsx)(J.a,{onClick:function(){return function(e){if(window.confirm("\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u0443\u044e \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044e?")){var t=Object(te.a)(Object(te.a)({},e),{},{isDeleted:!1});o(En(t))}}(e)},children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"})],children:Object(m.jsx)(Za.b.Item.Meta,{description:a===e.id?Object(m.jsx)(lc,{children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435..."}):Object(m.jsx)(lc,{children:e.name})})})}})})]})},jc=function(){var e=Object(f.i)().orderId,t=Object(u.c)(pt),r=Object(u.c)(tt),n=Object(u.b)();return c.a.useEffect((function(){n(function(e){return function(){var t=Object(Ft.a)(qt.a.mark((function t(r){var n;return qt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r(br(!0)),t.next=4,dr.getOrderChats(e);case 4:(n=t.sent)?r(Sr(n)):Cr("\u041e\u0448\u0438\u0431\u043a\u0430, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437",r),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),Cr("\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0442\u0438, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437",r);case 11:return t.prev=11,r(br(!1)),t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[0,8,11,14]])})));return function(e){return t.apply(this,arguments)}}()}(Number(e)))}),[n,e]),r?Object(m.jsx)(I,{}):Object(m.jsx)(va.Content,{className:"content",children:t?0===t.length?Object(m.jsx)($a.a,{image:$a.a.PRESENTED_IMAGE_SIMPLE}):Object(m.jsx)(m.Fragment,{children:t.map((function(e){return Object(m.jsxs)(je.a,{title:"\u0427\u0430\u0442 \u2116".concat(e.id),bodyStyle:{display:"flex"},children:[Object(m.jsxs)(je.a.Grid,{children:["\u041f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a:"," ",Object(m.jsx)(i.b,{to:"/contractors/".concat(e.supplierId),children:e.supplierName})]}),Object(m.jsxs)(je.a.Grid,{children:["\u0417\u0430\u043a\u0430\u0437\u0447\u0438\u043a:"," ",Object(m.jsx)(i.b,{to:"/contractors/".concat(e.customerId),children:e.customerName})]}),Object(m.jsx)(je.a.Grid,{children:Object(m.jsx)(i.b,{to:"/orders/".concat(e.orderId,"/chats/").concat(e.id),children:"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f"})})]},e.id)}))}):null})},bc=function(e){return{type:"SET_CHATS_ERROR_MESSAGE",payload:{errorMessage:e}}},Oc=function(e){return{type:"SET_CHATS_LOADING",payload:{chatsLoading:e}}},fc=function(e){return{type:"SET_NEW_MESSAGES",payload:{messages:e}}},pc=function(e){return e.chats},mc=function(e){return pc(e).chatsLoading},hc=function(e){return pc(e).messages};!function(e){e.TEXT="TEXT",e.ATTACHMENT="ATTACHMENT",e.SYSTEM="SYSTEM"}(Pr||(Pr={})),function(e){e.TEXT="TEXT",e.ATTACHMENT="ATTACHMENT",e.SYSTEM="SYSTEM",e.ADD_CHAT="ADD_CHAT"}(Gr||(Gr={})),function(e){e.DOCUMENT="DOCUMENT",e.PICTURE="PICTURE",e.VIDEO="VIDEO",e.NONE="NONE"}(qr||(qr={}));var xc=function(e){return e.type===Gr.TEXT?Object(m.jsxs)(Za.b.Item,{children:[Object(m.jsx)(L.a.Text,{children:Br(e.timeStamp)}),Object(m.jsxs)(L.a.Text,{className:"message__sender",mark:!0,children:["[",e.senderName,"]"]})," ",e.text]}):e.type===Gr.ATTACHMENT?Object(m.jsxs)(Za.b.Item,{className:"message",children:[Object(m.jsx)(L.a.Text,{children:Br(e.timeStamp)}),Object(m.jsxs)(L.a.Text,{className:"message__sender",mark:!0,children:["[",e.senderName,"]"]})," ",e.attachmentType===qr.PICTURE&&Object(m.jsx)(Z.a,{src:"".concat(W).concat(e.text),className:"message__image"}),e.attachmentType===qr.VIDEO&&Object(m.jsx)("video",{className:"message__video",controls:!0,children:Object(m.jsx)("source",{src:"".concat(W).concat(e.text)})}),e.attachmentType===qr.DOCUMENT&&Object(m.jsx)("a",{href:"".concat(W).concat(e.text),children:e.attachmentName?e.attachmentName:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0432\u043b\u043e\u0436\u0435\u043d\u0438\u0435"})]}):null},vc=function(){var e=Object(f.i)(),t=e.orderId,r=e.chatId,n=Object(u.c)(hc),a=Object(u.c)(mc),o=Object(u.b)();return c.a.useEffect((function(){o(function(e,t){return function(){var r=Object(Ft.a)(qt.a.mark((function r(n){var a;return qt.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,n(Oc(!0)),r.next=4,dr.getAllChatMessage(e,t);case 4:a=r.sent,n(a?fc(a):bc("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437")),r.next=12;break;case 8:r.prev=8,r.t0=r.catch(0),console.log("getChatMessages ---- ",r.t0),n(bc("\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0442\u0438, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437"));case 12:return r.prev=12,n(Oc(!1)),r.finish(12);case 15:case"end":return r.stop()}}),r,null,[[0,8,12,15]])})));return function(e){return r.apply(this,arguments)}}()}(Number(t),Number(r)))}),[r,o,t]),a?Object(m.jsx)(I,{}):Object(m.jsx)(va.Content,{className:"content",children:n&&Object(m.jsx)(Za.b,{bordered:!0,dataSource:n,renderItem:xc})})},gc=L.a.Text,Nc=function(e){var t=e.control,r=e.error,n=e.subtitle,a=e.fieldName,c=e.required,o=void 0===c||c,s=e.maxLength,i=e.password,u=e.defaultValue,l=i?Q.a.Password:Q.a;return Object(m.jsx)($r.a,{control:t,rules:{required:o},render:function(e){var t=e.field,a=t.onChange,c=t.value;return Object(m.jsxs)(se.a.Item,{validateStatus:r?"error":"success",help:null===r||void 0===r?void 0:r.message,className:"input form__input",required:o,children:[Object(m.jsx)(gc,{className:"subtitle",children:n}),Object(m.jsx)(l,{placeholder:n,value:c,onChange:a,maxLength:s})]})},name:a,defaultValue:u})},Ec=[{id:"1",fieldName:"phoneNumber",subtitle:"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430 \u0434\u043b\u044f \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438",maxLength:12,required:!0,defaultValue:"+7"},{id:"2",fieldName:"password",subtitle:"\u041f\u0430\u0440\u043e\u043b\u044c",required:!0,password:!0},{id:"3",fieldName:"confirm",subtitle:"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",required:!0,password:!0}],Sc=function(e){var t=e.control,r=e.errors;return Object(m.jsx)(m.Fragment,{children:Ec.map((function(e){return Object(m.jsx)(Nc,{control:t,error:r[e.fieldName],subtitle:e.subtitle,fieldName:e.fieldName,required:e.required,maxLength:e.maxLength,defaultValue:e.defaultValue,password:e.password},e.id)}))})},Cc=d.a.Content,yc=L.a.Title,_c=function(){var e=Object($r.e)({resolver:Object(Qr.a)(un)}),t=e.control,r=e.handleSubmit,a=e.formState.errors,c=Object(u.c)(Pa),o=Object(u.c)(Ga),s=Object(u.c)(Fa),i=Object(u.b)(),l=r((function(e){i(function(e){return function(){var t=Object(Ft.a)(qt.a.mark((function t(r){var a;return qt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r(ya(!0)),t.next=4,ga.createAdmin(e);case 4:a=t.sent,console.log("resp --\x3e ",a),a.length>0?r(Ia(n.SUCCESS)):(r(Ia(n.ERROR)),r(_a("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u0430! \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437."))),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),r(Ia(n.ERROR)),r(_a("\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0442\u0438! \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437."));case 13:return t.prev=13,r(ya(!1)),t.finish(13);case 16:case"end":return t.stop()}}),t,null,[[0,9,13,16]])})));return function(e){return t.apply(this,arguments)}}()}(Object(te.a)(Object(te.a)({},e),{},{phoneNumber:"7".concat(String(e.phoneNumber).slice(-10)),isBlocked:!1})))}));return c?Object(m.jsx)(I,{}):Object(m.jsxs)(Cc,{className:"content",children:[Object(m.jsx)(k,{onClose:function(){i(wa())},errorMessage:o,successMessage:"\u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d",status:s}),Object(m.jsxs)(je.a,{className:"form",children:[Object(m.jsx)(yc,{level:3,className:"title",children:"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u0430"}),Object(m.jsx)(Sc,{errors:a,control:t}),Object(m.jsx)(J.a,{className:"order__save-btn",onClick:l,disabled:Object.keys(a).length>0,children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})]})},Rc=d.a.Content,Ic=Mr.a.Column,Tc=function(){var e=Object(u.c)(qa),t=Object(u.c)(Pa),r=Object(u.c)(Fa),a=Object(u.c)(Ga),o=Object(u.b)(),s=St()().xxl,i=c.a.useCallback((function(){o(wa())}),[o]),l=function(e){var t,r;if(e.isBlocked){if(window.confirm("\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0440\u0430\u0437\u0431\u0430\u043d\u0438\u0442\u044c \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u0430?")){var a=window.prompt("\u041f\u0440\u0438\u0434\u0443\u043c\u0430\u0439\u0442\u0435 \u043d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c");a&&o((t=e.id,r={phoneNumber:e.phoneNumber,password:a,isBlocked:!1},function(){var e=Object(Ft.a)(qt.a.mark((function e(a){var c;return qt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a(ya(!0)),e.next=4,ga.updateAdmin(t,r);case 4:c=e.sent,console.log("resp --\x3e ",c),c?(a(Ia(n.SUCCESS)),a(Ta(t,!1))):(a(Ia(n.ERROR)),a(_a("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u0430! \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437."))),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),a(Ia(n.ERROR)),a(_a("\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0442\u0438! \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437."));case 13:return e.prev=13,a(ya(!1)),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[0,9,13,16]])})));return function(t){return e.apply(this,arguments)}}()))}}else window.confirm("\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0437\u0430\u0431\u0430\u043d\u0438\u0442\u044c \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u0430?")&&o(function(e){return function(){var t=Object(Ft.a)(qt.a.mark((function t(r){return qt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r(ya(!0)),t.next=4,ga.banAdmin(e);case 4:t.sent?(r(Ia(n.SUCCESS)),r(Ta(e,!0))):(r(Ia(n.ERROR)),r(_a("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u0430! \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437."))),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),r(Ia(n.ERROR)),r(_a("\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0442\u0438! \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437."));case 12:return t.prev=12,r(ya(!1)),t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[0,8,12,15]])})));return function(e){return t.apply(this,arguments)}}()}(e.id))},d=c.a.useCallback((function(){o(ka())}),[o]);return c.a.useEffect((function(){return o(ka()),function(){i()}}),[o,i]),t?Object(m.jsx)(I,{size:"large"}):Object(m.jsxs)(Rc,{className:"content",children:[Object(m.jsx)(k,{onClose:i,errorMessage:a,successMessage:"\u041e\u043f\u0435\u0440\u0430\u0446\u0438\u044f \u043f\u0440\u043e\u0448\u043b\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e",status:r}),Object(m.jsx)("div",{className:"contractors__header",children:Object(m.jsx)(J.a,{type:"primary",icon:Object(m.jsx)(Ur.a,{}),size:"large",onClick:d})}),Object(m.jsxs)(Mr.a,{pagination:{position:["topRight"]},showSorterTooltip:!1,dataSource:e,rowKey:"id",size:s?"middle":"small",children:[Object(m.jsx)(Ic,{title:"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430",dataIndex:"phoneNumber",className:"table-value"},"phoneNumber"),Object(m.jsx)(Ic,{title:"\u0421\u0442\u0430\u0442\u0443\u0441",dataIndex:"id",className:"table-value",render:function(e,t){return t.isBlocked?"\u0417\u0430\u0431\u0430\u043d\u0435\u043d":"\u0410\u043a\u0442\u0438\u0432\u043d\u044b\u0439"}},"id"),Object(m.jsx)(Ic,{title:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f",dataIndex:"id",className:"table-value",render:function(e,t){return Object(m.jsx)(J.a,{onClick:function(){return l(t)},danger:!t.isBlocked,children:t.isBlocked?"\u0420\u0430\u0437\u0431\u0430\u043d\u0438\u0442\u044c":"\u0417\u0430\u0431\u0430\u043d\u0438\u0442\u044c"})}},"id")]})]})},Ac=L.a.Text,wc=function(e){var t=e.control,r=e.error,n=e.subtitle,a=e.fieldName,c=e.required,o=void 0===c||c,s=e.maxLength,i=e.password,u=e.defaultValue,l=i?Q.a.Password:Q.a;return Object(m.jsx)($r.a,{control:t,rules:{required:o},render:function(e){var t=e.field,a=t.onChange,c=t.value;return Object(m.jsxs)(se.a.Item,{validateStatus:r?"error":"success",help:null===r||void 0===r?void 0:r.message,className:"input form__input",required:o,children:[Object(m.jsx)(Ac,{className:"subtitle",children:n}),Object(m.jsx)(l,{placeholder:n,value:c,onChange:a,maxLength:s})]})},name:a,defaultValue:u})},kc=[{id:"1",fieldName:"password",subtitle:"\u041d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c",required:!0,password:!0},{id:"2",fieldName:"confirm",subtitle:"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",required:!0,password:!0}],Mc=function(e){var t=e.control,r=e.errors;return Object(m.jsx)(m.Fragment,{children:kc.map((function(e){return Object(m.jsx)(wc,{control:t,error:r[e.fieldName],subtitle:e.subtitle,fieldName:e.fieldName,required:e.required,password:e.password},e.id)}))})},Dc=d.a.Content,Lc=L.a.Title,Uc=function(){var e=Object($r.e)({resolver:Object(Qr.a)(dn)}),t=e.control,r=e.handleSubmit,a=e.formState.errors,o=e.reset,s=Object(u.c)(Pa),i=Object(u.c)(Ga),l=Object(u.c)(Fa),d=Object(u.c)(Ba),j=Object(u.b)(),b=r((function(e){if(d){var t=e.password,r=d.id,a=d.phoneNumber,c=d.isBlocked;j(function(e,t){return function(){var r=Object(Ft.a)(qt.a.mark((function r(a){var c;return qt.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,a(ya(!0)),r.next=4,ga.updateAdmin(e,t);case 4:(c=r.sent).length>0?(a(Ia(n.SUCCESS)),a(Aa(c[0]))):(a(Ia(n.ERROR)),a(_a("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043e\u0431\u043d\u043e\u0432\u043e\u0438\u0442\u044c \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u0430! \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437."))),r.next=12;break;case 8:r.prev=8,r.t0=r.catch(0),a(Ia(n.ERROR)),a(_a("\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0442\u0438! \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437."));case 12:return r.prev=12,a(ya(!1)),r.finish(12);case 15:case"end":return r.stop()}}),r,null,[[0,8,12,15]])})));return function(e){return r.apply(this,arguments)}}()}(r,{password:t,phoneNumber:a,isBlocked:c}))}}));return c.a.useEffect((function(){l===n.SUCCESS&&o()}),[l,o]),s?Object(m.jsx)(I,{}):Object(m.jsxs)(Dc,{className:"content",children:[Object(m.jsx)(k,{onClose:function(){j(wa())},errorMessage:i,successMessage:"\u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d",status:l}),Object(m.jsxs)(je.a,{className:"form",children:[Object(m.jsx)(Lc,{level:3,className:"title",children:"\u0421\u043c\u0435\u043d\u0430 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(m.jsx)(Mc,{errors:a,control:t}),Object(m.jsx)(J.a,{className:"order__save-btn",onClick:b,disabled:Object.keys(a).length>0||!d,children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})]})},Vc=function(){var e=Object(u.b)();return Object(m.jsxs)(d.a,{className:"wrapper",children:[Object(m.jsx)(x,{logout:function(){localStorage.removeItem("adminId"),e(Na(!1))}}),Object(m.jsxs)(d.a,{children:[Object(m.jsx)(_,{}),Object(m.jsx)(d.a,{children:Object(m.jsxs)(f.d,{children:[Object(m.jsx)(f.b,{exact:!0,path:"/",render:function(){return Object(m.jsx)(f.a,{to:"/home"})}}),Object(m.jsx)(f.b,{exact:!0,path:"/home",children:Object(m.jsx)(wr,{})}),Object(m.jsx)(f.b,{exact:!0,path:"/orders",children:Object(m.jsx)(Jr,{})}),Object(m.jsx)(f.b,{exact:!0,path:"/orders/create",children:Object(m.jsx)(wn,{})}),Object(m.jsx)(f.b,{exact:!0,path:"/orders/:orderId",children:Object(m.jsx)(Bn,{})}),Object(m.jsx)(f.b,{exact:!0,path:"/orders/:orderId/chats",children:Object(m.jsx)(jc,{})}),Object(m.jsx)(f.b,{exact:!0,path:"/orders/:orderId/chats/:chatId",children:Object(m.jsx)(vc,{})}),Object(m.jsx)(f.b,{exact:!0,path:"/contractors",children:Object(m.jsx)(Xn,{})}),Object(m.jsx)(f.b,{exact:!0,path:"/contractors/create",children:Object(m.jsx)(xa,{})}),Object(m.jsx)(f.b,{path:"/contractors/:contractorId",children:Object(m.jsx)(ia,{})}),Object(m.jsx)(f.b,{exact:!0,path:"/categories",children:Object(m.jsx)(cc,{})}),Object(m.jsx)(f.b,{exact:!0,path:"/categories/deleted",children:Object(m.jsx)(dc,{})}),Object(m.jsx)(f.b,{exact:!0,path:"/categories/create",children:Object(m.jsx)(uc,{})}),Object(m.jsx)(f.b,{exact:!0,path:"/profile/:contractorId",children:Object(m.jsx)(ia,{})}),Object(m.jsx)(f.b,{exact:!0,path:"/admins",children:Object(m.jsx)(Tc,{})}),Object(m.jsx)(f.b,{exact:!0,path:"/admins/create",children:Object(m.jsx)(_c,{})}),Object(m.jsx)(f.b,{exact:!0,path:"/admins/password",children:Object(m.jsx)(Uc,{})}),Object(m.jsx)(f.b,{exact:!0,path:"*",render:function(){return Object(m.jsx)(f.a,{to:"/"})}})]})})]})]})},Pc=function(){return Object(m.jsx)("div",{className:"auth",children:Object(m.jsxs)(f.d,{children:[Object(m.jsx)(f.b,{path:"/login",component:function(){return Object(m.jsx)(Xa,{})}}),Object(m.jsx)(f.b,{path:"*",render:function(){return Object(m.jsx)(f.a,{to:"/login"})}})]})})};var Gc=function(){var e=Object(u.b)(),t=Object(u.c)(Da),r=Object(u.c)(Va);return c.a.useEffect((function(){e(function(){var e=Object(Ft.a)(qt.a.mark((function e(t){var r;return qt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(fn(!0)),e.next=4,bn.getAllCategories();case 4:r=e.sent,t(On(r)),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("getAllCategories...",e.t0),Nn("\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0442\u0438, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437",t);case 12:return e.prev=12,t(fn(!1)),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[0,8,12,15]])})));return function(t){return e.apply(this,arguments)}}())}),[e]),c.a.useEffect((function(){var t,r=localStorage.getItem("adminId");r?e((t=Number(r),function(){var e=Object(Ft.a)(qt.a.mark((function e(r){var n;return qt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ga.getAdminById(t);case 3:(n=e.sent).length>0&&!n[0].isBlocked?(r(Aa(n[0])),r(Na(!0))):(r(Ea("\u041e\u0448\u0438\u0431\u043a\u0430 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438")),r(Na(!1))),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),r(Ea("\u041e\u0448\u0438\u0431\u043a\u0430 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438")),r(Na(!1));case 11:return e.prev=11,r(Ca(!0)),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,7,11,14]])})));return function(t){return e.apply(this,arguments)}}())):(e(Na(!1)),e(Ca(!0)))}),[e]),r?Object(m.jsx)("div",{className:"app",children:t?Object(m.jsx)(Vc,{}):Object(m.jsx)(Pc,{})}):Object(m.jsx)("div",{className:"app",children:Object(m.jsx)(I,{})})},qc=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,852)).then((function(t){var r=t.getCLS,n=t.getFID,a=t.getFCP,c=t.getLCP,o=t.getTTFB;r(e),n(e),a(e),c(e),o(e)}))},Fc=r(232),Bc=r(482),Hc={isInit:!1,isAuth:!1,authErrorMessage:null,authLoading:!1,adminLoading:!1,adminErrorMessage:null,admins:[],admin:null,adminActionStatus:n.NEVER},zc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Hc,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ADMIN_LOADING":case"SET_ADMIN_ERROR_MESSAGE":case"SET_AUTH_ERROR_MESSAGE":case"SET_AUTH_LOADING":case"SET_IS_AUTH":case"SET_IS_INIT":case"SET_ADMINS":case"SET_ADMIN_ACTION_STATUS":case"SET_CURRENT_ADMIN":return Object(te.a)(Object(te.a)({},e),t.payload);case"CHANGE_BAN_STATUS":return Object(te.a)(Object(te.a)({},e),{},{admins:e.admins.map((function(e){return e.id===t.payload.id?Object(te.a)(Object(te.a)({},e),{},{isBlocked:t.payload.value}):e}))});default:return e}},Wc={categories:null,isLoadingCategories:!1,errorMessage:null,categoriesActionStatus:n.NEVER,currentCategory:null,categoryInProcessEdit:null},Yc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wc,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CATEGORIES":case"SET_IS_LOADING_CATEGORIES":case"SET_CATEGORIES_ERROR_MESSAGE":case"SET_CATEGORIES_ACTION_STATUS":case"SET_CURRENT_CATEGORY":case"SET_CATEGORY_IN_EDIT_PROCESS":return Object(te.a)(Object(te.a)({},e),t.payload);case"REPLACE_CATEGORY":var r,n=null===(r=e.categories)||void 0===r?void 0:r.map((function(e){return e.id===t.payload.category.id?t.payload.category:e}));return Object(te.a)(Object(te.a)({},e),{},{categories:n});case"REMOVE_CATEGORY":var a,c=null===(a=e.categories)||void 0===a?void 0:a.filter((function(e){return e.id!==t.payload.id}));return Object(te.a)(Object(te.a)({},e),{},{categories:c});case"CLEAR_CATEGORIES":return Object(te.a)(Object(te.a)({},e),{},{categories:null});case"ADD_NEW_CATEGORY":return Object(te.a)(Object(te.a)({},e),{},{categories:e.categories?[].concat(Object(M.a)(e.categories),[t.payload.category]):[t.payload.category]});default:return e}},Kc={contractors:null,currentContractor:null,contractorsLoading:!1,contractorsActionStatus:n.NEVER,errorMessage:null,contractorImages:[],contractorImageUploading:!1,contractorAvatarUploading:!1,contractorAvatars:[]},Xc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Kc,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CURRENT_CONTRACTOR":case"SET_CONTRACTORS_LOADING":case"SET_CONTRACTORS_ACTION_STATUS":case"SET_CONTRACTORS_ERROR_MESSAGE":case"SET_CONTRACTORS":case"SET_CONTRACTOR_IMAGE_UPLOADING":case"SET_CONTRACTOR_AVATAR_UPLOADING":return Object(te.a)(Object(te.a)({},e),t.payload);case"REMOVE_CONTRACTOR":var r;return Object(te.a)(Object(te.a)({},e),{},{contractors:null===(r=e.contractors)||void 0===r?void 0:r.filter((function(e){return e.id!==t.payload.contractorId}))});case"SET_CONTRACTOR_IMAGES":return Object(te.a)(Object(te.a)({},e),{},{contractorImages:t.payload.images});case"ADD_CONTRACTOR_IMAGE":return Object(te.a)(Object(te.a)({},e),{},{contractorImages:[].concat(Object(M.a)(e.contractorImages),Object(M.a)(t.payload.images))});case"ADD_CONTRACTOR_AVATARS":return Object(te.a)(Object(te.a)({},e),{},{contractorAvatars:t.payload.images});case"REMOVE_CONTRACTOR_IMAGE":return Object(te.a)(Object(te.a)({},e),{},{contractorImages:e.contractorImages.filter((function(e){return e.id!==t.payload.imageId}))});case"REMOVE_CONTRACTOR_AVATAR":return Object(te.a)(Object(te.a)({},e),{},{contractorAvatars:[]});case"CLEAR_CONTRACTOR_IMAGES":return Object(te.a)(Object(te.a)({},e),{},{contractorImages:[],contractorAvatars:[]});default:return e}},Jc={orders:null,ordersLoading:!1,errorMessage:null,orderActionStatus:n.NEVER,currentOrder:null,orderImages:[],orderImageUploading:!1,orderChats:null},Zc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jc,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ORDERS":case"SET_ORDERS_LOADING":case"SET_ORDERS_ERROR":case"SET_ORDER_ACTION_STATUS":case"SET_CURRENT_ORDER":case"SET_ORDER_IMAGE_UPLOADING":case"SET_ORDER_CHATS":return Object(te.a)(Object(te.a)({},e),t.payload);case"ADD_NEW_ORDER":return Object(te.a)(Object(te.a)({},e),{},{orders:e.orders?[].concat(Object(M.a)(e.orders),[t.payload.order]):[t.payload.order]});case"UPDATE_ORDER":var r;return Object(te.a)(Object(te.a)({},e),{},{orders:null===(r=e.orders)||void 0===r?void 0:r.map((function(e){return e.id===t.payload.order.id?t.payload.order:e}))});case"REMOVE_ORDER":var n;return Object(te.a)(Object(te.a)({},e),{},{orders:null===(n=e.orders)||void 0===n?void 0:n.filter((function(e){return e.id!==t.payload.id}))});case"SET_ORDER_IMAGES":return Object(te.a)(Object(te.a)({},e),{},{orderImages:t.payload.images});case"ADD_ORDER_IMAGE":return Object(te.a)(Object(te.a)({},e),{},{orderImages:[].concat(Object(M.a)(e.orderImages),Object(M.a)(t.payload.images))});case"REMOVE_ORDER_IMAGE":return Object(te.a)(Object(te.a)({},e),{},{orderImages:e.orderImages.filter((function(e){return e.id!==t.payload.imageId}))});case"CLEAR_ORDER_IMAGES":return Object(te.a)(Object(te.a)({},e),{},{orderImages:[]});default:return e}},$c={errorMessage:null,chatsLoading:!1,messages:[]},Qc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$c,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CHATS_ERROR_MESSAGE":case"SET_CHATS_LOADING":return Object(te.a)(Object(te.a)({},e),t.payload);case"SET_NEW_MESSAGES":return Object(te.a)(Object(te.a)({},e),{},{messages:t.payload.messages});default:return e}},eo=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Fc.c,to=Object(Fc.b)({admin:zc,categories:Yc,contractors:Xc,orders:Zc,chats:Qc}),ro=Object(Fc.d)(to,eo(Object(Fc.a)(Bc.a)));s.a.render(Object(m.jsx)(i.a,{children:Object(m.jsx)(u.a,{store:ro,children:Object(m.jsx)(Gc,{})})}),document.getElementById("root")),qc()}},[[813,1,2]]]);
//# sourceMappingURL=main.5fa1ae49.chunk.js.map